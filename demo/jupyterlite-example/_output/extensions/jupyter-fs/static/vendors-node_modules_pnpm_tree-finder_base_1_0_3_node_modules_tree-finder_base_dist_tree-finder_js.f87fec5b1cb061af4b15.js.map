{"version":3,"file":"vendors-node_modules_pnpm_tree-finder_base_1_0_3_node_modules_tree-finder_base_dist_tree-finder_js.f87fec5b1cb061af4b15.js","mappings":"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","sources":["webpack://jupyter-fs/@tree-finder/base/webpack/universalModuleDefinition","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/regular-table@0.6.8/node_modules/regular-table/dist/esm/regular-table.js","webpack://jupyter-fs/@tree-finder/base/webpack/bootstrap","webpack://jupyter-fs/@tree-finder/base/webpack/runtime/define property getters","webpack://jupyter-fs/@tree-finder/base/webpack/runtime/hasOwnProperty shorthand","webpack://jupyter-fs/@tree-finder/base/webpack/runtime/make namespace object","webpack://jupyter-fs/@tree-finder/base/./src/util.ts","webpack://jupyter-fs/@tree-finder/base/./src/content.ts","webpack://jupyter-fs/@tree-finder/base/./src/element/breadcrumbs.ts","webpack://jupyter-fs/@tree-finder/base/./src/element/filter.ts","webpack://jupyter-fs/@tree-finder/base/./src/element/filters.ts","webpack://jupyter-fs/@tree-finder/base/./src/element/grid.ts","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/config.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Observable.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subject.js","webpack://jupyter-fs/@tree-finder/base/./src/model/clipboard.ts","webpack://jupyter-fs/@tree-finder/base/./src/model/mock.ts","webpack://jupyter-fs/@tree-finder/base/./node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js","webpack://jupyter-fs/@tree-finder/base/./src/filtersort.ts","webpack://jupyter-fs/@tree-finder/base/./src/model/model.ts","webpack://jupyter-fs/@tree-finder/base/./src/element/panel.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","var T=new WeakMap,st=!0,pt=navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1,_t=pt?5e6:1e7;var j=0,O=0,nt=performance.now();function rt(){let u=performance.now(),t=u-nt,e=j,i=O*1e3/t,s=1e3/e,o=O;return j=0,O=0,nt=u,{avg:e,real_fps:i,virtual_fps:s,num_frames:o,elapsed:t}}function ht(u){j=(j*O+u)/(O+1),O+=1}var q=(u,...t)=>u.map((e,i)=>[e,t[i]]).flat().filter(e=>!!e).join(\"\"),wt=()=>{let u,t=new Promise(e=>{u=e});return t.resolve=u,t},C=new Map;async function ct(u){return await new Promise(requestAnimationFrame),await C.get(u)}async function U(u,t){if(C.has(u)&&(await C.get(u),C.has(u))){await C.get(u);return}C.set(u,wt());try{return await t()}finally{let e=C.get(u);C.delete(u),e.resolve()}}var dt=\":host{position:absolute;top:0px;left:0px;right:0px;bottom:0px;overflow:scroll;overflow-anchor:none;overscroll-behavior:none;-webkit-overflow-scrolling:touch;}div.rt-virtual-panel{position:absolute;top:0;left:0;right:0;pointer-events:none;}div.rt-scroll-table-clip{position:sticky;contain:strict;overflow-anchor:none;width:100%;height:100%;}div.rt-tree-container{display:flex;align-items:center;height:100%;}slot{position:absolute;overflow:hidden;overflow-anchor:none;}\";var ut=\":host ::slotted(table){--regular-table--transform-x:0px;--regular-table--transform-y:0px;--regular-table--clip-x:0px;--regular-table--clip-y:0px;}\";var K=class extends HTMLElement{create_shadow_dom(){this.attachShadow({mode:\"open\"});let t=\"<slot></slot>\";this.shadowRoot.innerHTML=q`\n            <style>\n                ${dt}\n            </style>\n            <style>\n                ${ut}\n            </style>\n            <div class=\"rt-virtual-panel\"></div>\n            <div class=\"rt-scroll-table-clip\">${t}</div>\n        `;let[,e,i,s]=this.shadowRoot.children;this._sub_cell_style=e,this._table_clip=s,this._virtual_panel=i,this._setup_virtual_scroll()}_setup_virtual_scroll(){this._table_clip&&(this._virtual_mode===\"both\"||this._virtual_mode===\"vertical\"?this._table_clip.style.top=\"0px\":this._table_clip.style.removeProperty(\"top\"),this._virtual_mode===\"both\"||this._virtual_mode===\"horizontal\"?this._table_clip.style.left=\"0px\":this._table_clip.style.removeProperty(\"left\"),this._virtual_mode!==\"both\"?this._table_clip.style.contain=\"none\":this._table_clip.style.removeProperty(\"contain\"))}_calculate_viewport(t,e){let{start_row:i,end_row:s}=this._calculate_row_range(t),{start_col:o,end_col:l}=this._calculate_column_range(e);return this._nrows=t,{start_col:o,end_col:l,start_row:i,end_row:s}}_calculate_row_range(t){let{height:e}=this._container_size,i=this._column_sizes.row_height||19,s=this._view_cache.config.column_pivots.length,o=Math.max(1,this._virtual_panel.offsetHeight-e),l=Math.max(Math.ceil(this.scrollTop),0)/o,_=e/i-s,m=Math.max(0,(t||0)-_)*l,h=Math.max(0,Math.min(m+_,t));return{start_row:m,end_row:h}}_calc_start_column(){let t=this._view_cache.config.row_pivots.length,e=0,i=0,s=0;for(;i<this.scrollLeft;){let o=this._column_sizes.indices[e+t];s=this.scrollLeft-i,e+=1,i+=o!==void 0?o:60}return e+=s/(this._column_sizes.indices[e+t-1]||60),Math.max(0,e-1)}_calculate_column_range(t){if(this._virtual_mode===\"none\"||this._virtual_mode===\"vertical\")return{start_col:0,end_col:1/0};{let e=this._calc_start_column(),i=this.table_model.num_columns()||Math.min(t,Math.ceil(this._container_size.width/60)),s=e+i+1;return{start_col:e,end_col:s}}}_max_scroll_column(t){let e=0;if(this._view_cache.config.row_pivots.length>0)for(let o of this._column_sizes.indices.slice(0,this._view_cache.config.row_pivots.length))e+=o;let i=this._view_cache.config.row_pivots.length,s=t;for(;e<this._container_size.width&&s>=0;)s--,e+=this._column_sizes.indices[s+i]||60;return Math.min(t-1,s+1)}_validate_viewport({start_col:t,end_col:e,start_row:i,end_row:s}){i=Math.floor(i),s=Math.ceil(s),t=Math.floor(t),e=Math.ceil(e);let o=this._start_col!==t,l=this._start_row!==i||this._end_row!==s||this._end_col!==e;return this._start_col=t,this._end_col=e,this._start_row=i,this._end_row=s,{invalid_column:o,invalid_row:l}}_calc_scrollable_column_width(t){let e=this._view_cache.config.row_pivots.length,i=this._max_scroll_column(t),s=e,o=0;for(;s<i+e;)o+=this._column_sizes.indices[s]||60,s++;if(s<this._column_sizes.indices.length){let l=this._column_sizes.indices.slice(0,this._view_cache.config.row_pivots.length).reduce((_,a)=>_+a,0);o+=Math.max(0,this._column_sizes.indices[s]-(this._container_size.width-l)||0)}return o}_update_virtual_panel_width(t,e){if(t)if(this._virtual_mode===\"vertical\"||this._virtual_mode===\"none\")this._virtual_panel.style.width=this._column_sizes.indices.reduce((i,s)=>i+s,0)+\"px\";else{let i=this._calc_scrollable_column_width(e);if(i!==0){let s=this._container_size.width+i+2;this._virtual_panel.style.width=s+\"px\"}else this._virtual_panel.style.width=\"1px\"}}_update_virtual_panel_height(t){let{row_height:e=19}=this._column_sizes,i=this._view_cache.config.column_pivots.length*e,s;s=Math.min(_t,t*e+i),this._virtual_panel.style.height=`${s}px`}async draw(t={}){return typeof t.throttle<\"u\"&&!t.throttle?await ft.call(this,t):await U(this,()=>ft.call(this,t))}async _draw_flush(){await ct(this)}update_sub_cell_offset(t){let e=this._column_sizes.row_height*(t.start_row%1)||0,i=this._column_sizes.indices[(this.table_model._row_headers_length||0)+Math.floor(t.start_col)]*(t.start_col%1)||0,s=this._sub_cell_style.sheet?.cssRules[0].style;s&&(s.setProperty(\"--regular-table--clip-x\",`${i}px`),s.setProperty(\"--regular-table--clip-y\",`${e}px`),s.setProperty(\"--regular-table--transform-x\",`-${i}px`),s.setProperty(\"--regular-table--transform-y\",`-${e}px`))}};async function ft(u){let t=st&&performance.now(),{invalid_viewport:e=!0,preserve_width:i=!1}=u,{num_columns:s,num_rows:o,num_row_headers:l,num_column_headers:_,row_height:a}=await this._view_cache.view(0,0,0,0);l!==void 0&&(this._view_cache.row_pivots=Array(l).fill(0)),_!==void 0&&(this._view_cache.column_pivots=Array(_).fill(0)),this._container_size={width:this._virtual_mode===\"none\"||this._virtual_mode===\"vertical\"?1/0:this._table_clip.clientWidth,height:this._virtual_mode===\"none\"||this._virtual_mode===\"horizontal\"?1/0:this._table_clip.clientHeight},this._update_virtual_panel_height(o),i||this._update_virtual_panel_width(e,s);let c=this._calculate_viewport(o,s),{invalid_row:m,invalid_column:h}=this._validate_viewport(c);if(this._invalid_schema||m||h||e){let r=[],w=!0;for await(let y of this.table_model.draw(this._container_size,this._view_cache,this._selected_id,i,c,s)){y!==void 0&&(r=r.concat(y)),w&&(this.update_sub_cell_offset(c),w=!1),this._is_styling=!0;let d=this._style_callbacks;for(let k of d)await k({detail:this});if(this._is_styling=!1,!this._invalidated&&y!==void 0)break;this._invalidated=!1}this.table_model.autosize_cells(r,a),this.table_model.header.reset_header_cache(),i||this._update_virtual_panel_width(this._invalid_schema||h,s),this._invalid_schema=!1}else this.update_sub_cell_offset(c);st&&ht(performance.now()-t)}var yt=!1,J=class extends K{register_listeners(){this.addEventListener(\"mousedown\",this._on_click_or_dblclick.bind(this)),this.addEventListener(\"scroll\",this._on_scroll.bind(this),{passive:!0}),this._register_glitch_scroll_listeners()}async _on_scroll(t){t.stopPropagation(),await this.draw({invalid_viewport:!1}),this.dispatchEvent(new CustomEvent(\"regular-table-scroll\"))}_register_glitch_scroll_listeners(){this.addEventListener(\"mousewheel\",this._on_mousewheel.bind(this),{passive:!0}),yt&&(this.addEventListener(\"touchmove\",this._on_touchmove.bind(this)),this.addEventListener(\"touchstart\",this._on_touchstart.bind(this),{passive:!0}))}_on_mousewheel(t){if(!window.safari)return;let{clientWidth:e,clientHeight:i,scrollTop:s,scrollLeft:o}=this;t.preventDefault(),t.returnValue=!1;let l=Math.max(1,this._virtual_panel.offsetHeight-i),_=Math.max(1,this._virtual_panel.offsetWidth-e);this.scrollTop=Math.max(0,Math.min(l,s+t.deltaY)),this.scrollLeft=Math.max(0,Math.min(_,o+t.deltaX)),this._on_scroll(t)}_on_touchmove(t){t.stopPropagation(),t.preventDefault(),t.returnValue=!1;let{clientWidth:e,clientHeight:i}=this,s=Math.max(1,this._virtual_panel.offsetHeight-i),o=Math.max(1,this._virtual_panel.offsetWidth-e);this.scrollTop=Math.min(s,this._memo_scroll_top+(this._memo_touch_startY-t.touches[0].pageY)),this.scrollLeft=Math.min(o,this._memo_scroll_left+(this._memo_touch_startX-t.touches[0].pageX)),this._on_scroll(t)}_on_touchstart(t){this._memo_touch_startY=t.touches[0].pageY,this._memo_touch_startX=t.touches[0].pageX,this._memo_scroll_top=this.scrollTop,this._memo_scroll_left=this.scrollLeft}async _on_dblclick(t){let e=t.target;for(;e.tagName!==\"TD\"&&e.tagName!==\"TH\";)if(e=e.parentElement,!this.contains(e))return;let i=t.target.classList.contains(\"rt-column-resize\"),s=T.get(e);if(i){t.stopImmediatePropagation(),e.style.minWidth=\"\",e.style.maxWidth=\"\",t.shiftKey?(this._column_sizes.override=[],this._column_sizes.auto=[],this._column_sizes.indices=[]):(this._column_sizes.override[s.size_key]=void 0,this._column_sizes.auto[s.size_key]=void 0,this._column_sizes.indices[s.size_key]=void 0);for(let o of t.shiftKey?[this.table_model.header.cells[this.table_model.header.cells.length-1],...this.table_model.body.cells]:this.table_model.body.cells)for(let l of t.shiftKey?o:[o[s._virtual_x]])l&&(l.style.minWidth=\"\",l.style.maxWidth=\"\",l.classList.remove(\"rt-cell-clip\"));await this.draw()}}async _on_click(t){if(t.button!==0)return;let e=t.target;for(;e.tagName!==\"TD\"&&e.tagName!==\"TH\";)if(e=e.parentElement,!this.contains(e))return;let i=t.target.classList.contains(\"rt-column-resize\"),s=T.get(e);i&&(this._on_resize_column(t,e,s),t.stopImmediatePropagation())}async _on_click_or_dblclick(t){let e=performance.now();this._last_clicked_time&&e-this._last_clicked_time<500?(this._last_clicked_time=e,await this._on_dblclick(t)):(this._last_clicked_time=e,await this._on_click(t))}_on_resize_column(t,e,i){let{_virtual_x:s,size_key:o}=i,l=t.pageX,_=s+e.colSpan-1,a=this.table_model.header.get_column_header(_),c=this._column_sizes.indices[o],m=r=>U(this,async()=>await this._on_resize_column_move(r,a,l,c,o,_)),h=()=>{document.removeEventListener(\"mousemove\",m),document.removeEventListener(\"mouseup\",h);let r=this._column_sizes.override[o],w=this._column_sizes.indices[o]!==r;this._column_sizes.indices[o]=r,w&&this.draw()};document.addEventListener(\"mousemove\",m),document.addEventListener(\"mouseup\",h)}async _on_resize_column_move(t,e,i,s,o,l){await new Promise(requestAnimationFrame);let _=t.pageX-i,a=Math.max(1,s+_);if(this._column_sizes.override[o]=a,_<0)await this.draw({preserve_width:!0,throttle:!1});else{e.style.minWidth=a+\"px\",e.style.maxWidth=a+\"px\";let c=this._column_sizes.auto[o];for(let m of this.table_model.body.cells){let h=m[l];h&&(h.style.maxWidth=h.style.minWidth=a+\"px\",h.classList.toggle(\"rt-cell-clip\",c>a))}}}};var ot=class{constructor(t){this._name=t,this._elements=[],this._index=0}reset(){this._index=0}get(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));let t=this._elements[this._index];return this._index+=1,t}},$=class{constructor(t,e,i){this._column_sizes=t,this._container=e,this._span_factory=new ot(\"span\"),this.table=i,this.cells=[],this.rows=[]}num_columns(){return this._get_row(Math.max(0,this.rows.length-1)).row_container.length}num_rows(){return this.cells.length}_set_metadata(t,e){T.set(t,e)}_get_or_create_metadata(t){if(t===void 0)return{};if(T.has(t))return T.get(t);{let e={};return T.set(t,e),e}}_replace_cell(t,e){let{tr:i,row_container:s}=this._get_row(t),o=s[e];return o&&(i.removeChild(o),s.splice(e,1,void 0)),o}_fetch_cell(t,e){if(!(t<0||e<0))return this.cells[t]?.[e]}_get_row(t){let e=this.rows[t];e||(e=this.rows[t]=document.createElement(\"tr\"),this.table.appendChild(e));let i=this.cells[t];return i||(i=this.cells[t]=[]),{tr:e,row_container:i}}_get_cell(t=\"TD\",e,i){let{tr:s,row_container:o}=this._get_row(e),l=o[i];if(l||(i<o.length?(l=o[i]=document.createElement(t),s.insertBefore(l,o.slice(i+1).find(_=>_))):(l=o[i]=document.createElement(t),s.appendChild(l))),l.tagName!==t){let _=document.createElement(t);s.replaceChild(_,l),this.cells[e].splice(i,1,_),l=_}return l}_clean_columns(t){for(let e=0;e<this.rows.length;e++){let i=this.rows[e],s=this.cells[e];this.cells[e]=s.slice(0,t[e]||t);let o=this.cells[e].filter(l=>l!==void 0).length;for(;i.children[o];)i.removeChild(i.children[o])}}_clean_rows(t){for(;this.table.children[t];)this.table.removeChild(this.table.children[t]);this.rows=this.rows.slice(0,t),this.cells=this.cells.slice(0,t)}};var Q=class extends ${constructor(...t){super(...t),this._group_header_cache=[],this._offset_cache=[]}_draw_group_th(t,e,i){let s=this._get_cell(\"TH\",e,t[e]||0);if(t[e]+=1,s.removeAttribute(\"colspan\"),s.style.minWidth=\"0\",s.textContent=\"\",i instanceof HTMLElement)s.appendChild(i);else{let l=this._span_factory.get(\"span\");l.textContent=i,s.appendChild(l)}let o=this._span_factory.get(\"span\");return o.className=\"rt-column-resize\",s.appendChild(o),s}_draw_group(t,e,i){let s=this._get_or_create_metadata(i);return s.column_header=t,s.value=e,s.value=e,s}_draw_th(t,e,i,s,o){let l=this._get_or_create_metadata(i);if(l.column_header=t,l.value=e,l.size_key=o.length?o[0]:o,!(o.length>1)){let _=this._column_sizes.override[l.size_key],a=this._column_sizes.auto[l.size_key];_?(i.classList.toggle(\"rt-cell-clip\",a>_),i.style.minWidth=_+\"px\",i.style.maxWidth=_+\"px\"):a?(i.classList.remove(\"rt-cell-clip\"),i.style.maxWidth=\"\",i.style.minWidth=a+\"px\"):(i.style.maxWidth=\"\",i.style.maxWidth=\"\")}return l}get_column_header(t){return this._get_cell(\"TH\",this.num_rows()-1,t)}draw(t,e,i,s,o,l,_,a,c){let m=e?.length;if(m===0)return;let h,r,w,y;a=typeof a>\"u\"?m-1:a;for(let d=0;d<m;d++){if(w=e[d]?e[d]:\"\",this._offset_cache[d]=this._offset_cache[d]||0,d<a)c&&this._group_header_cache?.[d]?.[0]?.value===w?(h=this._group_header_cache[d][1],this._group_header_cache[d][2]+=1,i===1&&(this._group_header_cache[d][0].row_header_x=o),h.setAttribute(\"colspan\",this._group_header_cache[d][2])):(h=this._draw_group_th(this._offset_cache,d,w),r=this._draw_group(e,w,h),this._group_header_cache[d]=[r,h,1]);else{h=this._draw_group_th(this._offset_cache,d,w),r=this._draw_th(t||e,w,h,s,o),typeof y>\"u\"&&(y={th:h,metadata:r});for(let[k]of this._group_header_cache)k.size_key=r.size_key;h.removeAttribute(\"colspan\")}this._get_row(d).tr.classList.toggle(\"rt-autosize\",d===a),h.classList.toggle(\"rt-group-corner\",s===void 0),r&&(r.x=typeof s>\"u\"?s:Math.floor(s),r.column_header_y=d,r.x0=Math.floor(l),r._virtual_x=_,i===1&&(r.row_header_x=o))}return this._clean_rows(this._offset_cache.length),y=y||{th:h,metadata:r},y}clean(){this._clean_columns(this._offset_cache)}reset_header_cache(){this._offset_cache=[],this._group_header_cache=[]}};var Z=class extends ${_draw_td(t,e,i,s,{column_name:o},{ridx_offset:l},_){let a=this._get_cell(t,e,s),c=this._get_or_create_metadata(a);c.y=e+Math.floor(l),c.size_key=_,t===\"TD\"&&(c.column_header=o);let m=this._column_sizes.override[c.size_key];if(m){let h=this._column_sizes.auto[c.size_key];a.classList.toggle(\"rt-cell-clip\",h>m),a.style.minWidth=m+\"px\",a.style.maxWidth=m+\"px\"}else a.classList.remove(\"rt-cell-clip\"),a.style.minWidth=\"\",a.style.maxWidth=\"\";return c.value!==i&&(i instanceof HTMLElement?(a.textContent=\"\",a.appendChild(i)):a.textContent=i),c.value=i,{td:a,metadata:c}}draw(t,e,i,s=!1,o,l,_,a){let{cidx:c,column_data:m,row_headers:h,column_data_listener_metadata:r}=e,{row_height:w}=i,y,d=[],k=[],f=0,x=[];for(let g=0;g<(s?i.row_headers_length:1);g++){f=0;for(let P of m){let tt=h?.[f],n;if(s){let D=P[g],S=this._fetch_cell(f-(d[g]||1),c+g),et=this._get_or_create_metadata(S),p=this._fetch_cell(f,c+g-(x[f]||1)),z=this._get_or_create_metadata(p);a&&p&&(z.value===D||D===void 0)&&!p.hasAttribute(\"rowspan\")?(x[f]=x[f]?x[f]+1:2,p.setAttribute(\"colspan\",x[f]),this._replace_cell(f,c+g)):a&&S&&et.value===D&&!S.hasAttribute(\"colspan\")?(d[g]=d[g]?d[g]+1:2,S.setAttribute(\"rowspan\",d[g]),this._replace_cell(f,c+g)):(n=this._draw_td(\"TH\",f,D,c+g,e,i,g),n.td.style.display=\"\",n.td.removeAttribute(\"rowspan\"),n.td.removeAttribute(\"colspan\"),n.metadata.row_header=P,n.metadata.row_header_x=g,n.metadata.y0=Math.floor(i.ridx_offset),n.metadata.y1=Math.ceil(i.y1),n.metadata._virtual_x=g,typeof l<\"u\"&&(n.metadata.x0=Math.floor(l)),d[g]=1,x[f]=1,k[g]=n)}else n=this._draw_td(\"TD\",f,P,c,e,i,_),r&&(n.metadata.user=r[f]),n.metadata.x=typeof o>\"u\"?o:Math.floor(o),n.metadata.x1=Math.ceil(i.x1),n.metadata.row_header=tt||[],n.metadata.y0=Math.floor(i.ridx_offset),n.metadata.y1=Math.ceil(i.y1),n.metadata.dx=Math.floor(o-l),n.metadata.dy=n.metadata.y-Math.floor(n.metadata.y0),n.metadata._virtual_x=c,typeof l<\"u\"&&(n.metadata.x0=Math.floor(l)),k[0]=n;if(f++,y=n?n.metadata:y,w=w||n?.td.offsetHeight,f*w>t)break}}return this._clean_rows(f),{tds:k,ridx:f,metadata:y,row_height:w}}clean({ridx:t,cidx:e}){this._clean_rows(t),this._clean_columns(e)}};var V=class{constructor(t,e,i){this.clear(i);let[s]=i.children,[o,l]=s.children;this.table=s,this._column_sizes=e,this.header=new Q(e,t,o),this.body=new Z(e,t,l),this.fragment=document.createDocumentFragment()}num_columns(){return this.header.num_columns()}clear(t){t.innerHTML=q`\n            <table cellspacing=\"0\">\n                <thead></thead>\n                <tbody></tbody>\n            </table>\n        `}autosize_cells(t,e){for(;t.length>0;){let[i,s]=t.pop(),o=i.getBoundingClientRect();if(!o||(this._column_sizes.row_height=e||Math.max(10,Math.min(this._column_sizes.row_height||o.height,o.height)),!s))continue;this._column_sizes.indices[s.size_key]=o.width;let l=this._column_sizes.override[s.size_key]!==void 0;o.width&&!l&&(this._column_sizes.auto[s.size_key]=o.width),i.style.minWidth===\"0px\"&&(i.style.minWidth=`${o.width}px`)}}async*draw(t,e,i,s,o,l){let{width:_,height:a}=t,{view:c,config:m}=e,{data:h,row_headers:r,column_headers:w,metadata:y,num_row_headers:d,num_column_headers:k,column_header_merge_depth:f,merge_headers:x=\"both\"}=await c(Math.floor(o.start_col),Math.floor(o.start_row),Math.ceil(o.end_col),Math.ceil(o.end_row)),g=x===\"both\"||x===\"row\",P=x===\"both\"||x===\"column\",{start_row:tt=0,start_col:n=0,end_col:D=0,end_row:S=0}=o;r&&(this._row_headers_length=r.reduce((v,X)=>Math.max(v,X.length),0),r=r.map(v=>(v.length=this._row_headers_length,v))),d!==void 0?e.config.row_pivots=Array(d).fill(0):e.config.row_pivots=Array(r?.[0]?.length||0).fill(0),k!==void 0?e.config.column_pivots=Array(k).fill(0):e.config.column_pivots=Array(w?.[0]?.length||0).fill(0);let et=this._column_sizes.indices[(this._row_headers_length||0)+Math.floor(o.start_col)]||0,p={viewport_width:0,selected_id:i,ridx_offset:tt,sub_cell_offset:et,x0:n,x1:D,y1:S,row_height:this._column_sizes.row_height,row_headers_length:this._row_headers_length},z,M=0,R=[],F=!0;if(r?.length>0){let v=m.row_pivots.join(\",\"),X={column_name:v,cidx:0,column_data:r,row_headers:r,first_col:F},Y=M+Math.floor(n);z=this.body.draw(a,X,{...p,x0:0},!0,void 0,void 0,Y,g);let B=[];for(let b=0;b<e.config.row_pivots.length;b++){let E=this.header.draw(v,Array(e.config.column_pivots.length).fill(\"\"),1,void 0,b,n,b,f,P);E&&B.push(E)}if(F=!1,p.viewport_width+=B.reduce((b,{th:E},I)=>b+(this._column_sizes.indices[I]||E.offsetWidth),0),p.row_height=p.row_height||z.row_height,M=r[0].length,!s)for(let b=0;b<e.config.row_pivots.length;b++){let{td:E,metadata:I}=z.tds[b]||{},{th:G,metadata:N}=B[b]||{};(E||G)&&R.push([G||E,N||I])}}try{let v=0,X=l-o.start_col;for(;v<X;){if(!h[v]){let W=Math.max(o.end_col,0);o.start_col=W;let H=0,it=0;for(;this._column_sizes.indices.length>M+n+H+1&&it+p.viewport_width<_;)H++,it+=this._column_sizes.indices[M+n+H];if(it+p.viewport_width<_){let L=Math.min(l,W+5);o.end_col=Math.max(1,Math.min(l,L))}else o.end_col=Math.max(1,Math.min(l,W+H));let mt=c(Math.floor(o.start_col),Math.floor(o.start_row),Math.ceil(o.end_col),Math.ceil(o.end_row));yield void 0;let A=await mt;if(typeof A.column_header_merge_depth<\"u\"&&(f=A.column_header_merge_depth),typeof A.merge_headers<\"u\"&&(x=A.merge_headers),A.data.length===0){yield R;return}o.end_col=o.start_col+A.data.length;for(let L=0;L<A.data.length;L++)h[v+L]=A.data[L],A.metadata&&(y[v+L]=A.metadata[L]),w&&(w[v+L]=A.column_headers?.[L])}let Y=w?.[v]||\"\",B=h[v],b=y?.[v],E={column_name:Y,cidx:M,column_data:B,column_data_listener_metadata:b,row_headers:r,first_col:F},I=v+n,G=M+Math.floor(n),N=this.header.draw(void 0,Y,void 0,I,G,n,M,f,P);if(z=this.body.draw(a,E,p,!1,I,n,G,g),F=!1,!s)for(let{td:W,metadata:H}of z.tds)R.push([N?.th||W,N?.metadata||H]);let at=this._column_sizes.indices[M+Math.floor(n)];if(at?p.viewport_width+=at:p.viewport_width+=N?.th?.offsetWidth||z.tds.reduce((W,H)=>W+H.td?.offsetWidth,0),p.row_height=p.row_height||z.row_height,M++,v++,p.viewport_width-p.sub_cell_offset>_){this.body.clean({ridx:z?.ridx||0,cidx:M}),this.header.clean(),yield R,p.viewport_width=0;for(let[W]of R)p.viewport_width+=W.offsetWidth;if(p.viewport_width-p.sub_cell_offset>_)return}}this.body.clean({ridx:z?.ridx||0,cidx:M}),this.header.clean(),yield R}finally{this.body.clean({ridx:z?.ridx||0,cidx:M}),this.header.clean(),this.body._span_factory.reset(),this.header._span_factory.reset()}}};var bt=[\"both\",\"horizontal\",\"vertical\",\"none\"],lt=class extends J{constructor(){super(),this._column_sizes={auto:[],override:[],indices:[]},this._style_callbacks=[],this._initialized=!1}connectedCallback(){this._initialized||(this.create_shadow_dom(),this.register_listeners(),this.setAttribute(\"tabindex\",\"0\"),this._initialized=!0,this.table_model=new V(this._table_clip,this._column_sizes,this))}_reset_viewport(){this._start_row=void 0,this._end_row=void 0,this._start_col=void 0,this._end_col=void 0}_reset_scroll(){this._column_sizes.indices=[],this.scrollTop=0,this.scrollLeft=0,this._reset_viewport()}_resetAutoSize(){this._column_sizes.auto=[],this._column_sizes.override=[],this._column_sizes.indices=[];for(let t=0;t<this.table_model.header.num_columns();t++){let e=this.table_model.header.get_column_header(t);e.style.minWidth=\"\",e.style.maxWidth=\"\"}}clear(){this.table_model=new V(this._table_clip,this._column_sizes,this)}addStyleListener(t){this._style_callbacks=this._style_callbacks.concat(t);let e=!0;return()=>{if(!e)return;e=!1;let s=this._style_callbacks=this._style_callbacks.slice(),o=s.indexOf(t);s.splice(o,1)}}removeStyleListener(t){let e=this._style_callbacks.length;this._style_callbacks=this._style_callbacks.filter(i=>i!==t),console.assert(this._style_callbacks.length===e-1,\"No listener found\")}invalidate(){if(!this._is_styling)throw new Error(\"Cannot call `invalidate()` outside of a `StyleListener`\");this._invalidated=!0}getMeta(t){if(!(typeof t>\"u\")){if(t instanceof HTMLElement)return T.get(t);if(t.row_header_x>=0){if(t.row_header_x<this._view_cache.config.row_pivots.length){let e=this.table_model.body._fetch_cell(t.y,t.row_header_x);return this.getMeta(e)}}else if(t.column_header_y>=0){if(t.column_header_y<this._view_cache.config.column_pivots.length){let e=this.table_model.body._fetch_cell(t.column_header_y,t.y);return this.getMeta(e)}}else return this.getMeta(this.table_model.body._fetch_cell(t.dy,t.dx+this.table_model._row_headers_length))}}getDrawFPS(){return rt()}async scrollToCell(t,e){if(!this._view_cache){console.warn(\"data listener not configured\");return}let i=this._column_sizes.row_height||19,s=this._view_cache.config.column_pivots.length*i,l=(this._table_clip.offsetHeight-s)%i,_=(this._virtual_panel.offsetHeight-l)/this._nrows;this.scrollTop=Math.ceil(_*e);let a=0;for(;t>0;)t--,a+=this._column_sizes.indices[t+this._view_cache.config.row_pivots.length]||60;this.scrollLeft=Math.ceil(a),await new Promise(requestAnimationFrame),await this._draw_flush()}setDataListener(t,{virtual_mode:e=\"both\",preserve_state:i=!1}={}){console.assert(bt.indexOf(e)>-1,`Unknown virtual_mode ${e};  valid options are \"both\" (default), \"horizontal\", \"vertical\" or \"none\"`);let s=this._virtual_mode!==e;if(i)console.assert(!s,\"preserve_state called with modified virtual_mode\"),this._view_cache.view=t;else{let o={row_pivots:[],column_pivots:[]};this._virtual_mode=e,this._invalid_schema=!0,this._view_cache={view:t,config:o},s&&this._setup_virtual_scroll()}}__noop_jsdoc_hints(){}};document.createElement(\"regular-table\").constructor===HTMLElement&&window.customElements.define(\"regular-table\",lt);\n//# sourceMappingURL=regular-table.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\nimport { MetaData, RegularTableElement } from \"regular-table\";\n\nexport namespace Format {\n    export const DATE_FORMATTER = new Intl.DateTimeFormat(\"en-us\");\n\n    /**\n     * Format bytes as human-readable text.\n     * ref: https://stackoverflow.com/a/14919494\n     *\n     * @param bytes Number of bytes.\n     * @param si True to use metric (SI) units, aka powers of 1000. False to use\n     *           binary (IEC), aka powers of 1024.\n     * @param dp Number of decimal places to display.\n     *\n     * @return Formatted string.\n     */\n    export function bytesToHumanReadable(bytes: number, si = false, dp = 1) {\n        if (!bytes) {\n            return \"--\";\n        }\n\n        const thresh = si ? 1000 : 1024;\n\n        if (Math.abs(bytes) < thresh) {\n            return bytes + \" B\";\n        }\n\n        const units = si\n            ? [\"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"]\n            : [\"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\", \"EiB\", \"ZiB\", \"YiB\"];\n        let u = -1;\n        const r = 10 ** dp;\n\n        do {\n            bytes /= thresh;\n            ++u;\n        } while (\n            Math.round(Math.abs(bytes) * r) / r >= thresh &&\n            u < units.length - 1\n        );\n\n        return bytes.toFixed(dp) + \" \" + units[u];\n    }\n\n    export function dateToStr(date: Date, str: string) {\n        return DATE_FORMATTER.format(date).includes(str);\n    }\n\n    export function timeSince(date: Date | string) {\n        date = !(date instanceof Date) ? new Date(date) : date;\n        const seconds = Math.floor((Date.now() - date.valueOf()) / 1000);\n        let interval = seconds / 31536000;\n\n        if (interval > 1) {\n            return Math.floor(interval) + \" years\";\n        }\n        interval = seconds / 2592000;\n        if (interval > 1) {\n            return Math.floor(interval) + \" months\";\n        }\n        interval = seconds / 86400;\n        if (interval > 1) {\n            return Math.floor(interval) + \" days\";\n        }\n        interval = seconds / 3600;\n        if (interval > 1) {\n            return Math.floor(interval) + \" hours\";\n        }\n        interval = seconds / 60;\n        if (interval > 1) {\n            return Math.floor(interval) + \" minutes\";\n        }\n        return Math.floor(seconds) + \" seconds\";\n    }\n}\n\nexport namespace RegularTable {\n    const TOP_LEVEL_TAGNAME = \"TREE-FINDER-GRID\";\n\n    /*\n     * click-related functions\n     */\n\n    export function cellClicked(metadata: MetaData): boolean {\n        return typeof metadata?.y !== \"undefined\" && !metadata?.column_header_y;\n    }\n\n    export function columnHeaderClicked(metadata: MetaData): boolean {\n        return (\n            typeof (metadata as any)?.column_header_y !== \"undefined\" &&\n            !!metadata?.column_header\n        );\n    }\n\n    export function rowClicked(metadata: MetaData): boolean {\n        return cellClicked(metadata) || rowHeaderClicked(metadata);\n    }\n\n    export function rowHeaderClicked(metadata: MetaData): boolean {\n        return (\n            typeof (metadata as any)?.row_header_x !== \"undefined\" &&\n            !!metadata?.row_header\n        );\n    }\n\n    /*\n     * debug utils\n     */\n\n    export function clickLoggingListener(\n        event: MouseEvent,\n        rt: RegularTableElement,\n    ) {\n        const metadata = metadataFromElement(\n            event.target as HTMLElement,\n            rt,\n            true,\n        );\n\n        if (!metadata) {\n            console.log(`event has no metadata`);\n            return;\n        }\n\n        if (cellClicked(metadata)) {\n            console.log(`cell clicked`);\n        }\n        if (columnHeaderClicked(metadata)) {\n            console.log(`column header clicked`);\n        }\n        if (rowClicked(metadata)) {\n            console.log(`row clicked`);\n        }\n        if (rowHeaderClicked(metadata)) {\n            console.log(`row header clicked`);\n        }\n    }\n\n    /*\n     * general metadata-related functions\n     */\n\n    export function colNameFromMeta(meta: MetaData): string {\n        const { column_header, value } = meta;\n        return (\n            value instanceof HTMLElement\n                ? value.textContent\n                : (column_header as any) === \"0\"\n                  ? \"path\"\n                  : value\n        )! as string;\n    }\n\n    export function metadataFromElement(\n        target: Element,\n        rt: RegularTableElement,\n        recursive = true,\n    ): MetaData | undefined {\n        if (target.tagName === TOP_LEVEL_TAGNAME) {\n            return;\n        }\n\n        let metadata = rt.getMeta(target as HTMLTableCellElement);\n\n        if (!recursive || metadata || !target.parentElement) {\n            return metadata;\n        }\n\n        return metadataFromElement(target.parentElement, rt, recursive);\n    }\n}\n\nexport namespace Path {\n    export type PathArray = string[];\n\n    export function equal(l: PathArray, r: PathArray) {\n        return l.length === r.length && l.every((lvalue, i) => lvalue === r[i]);\n    }\n\n    export function fromarray(x: PathArray): string {\n        const [first, ...rest] = x;\n        const drive = first ? first + \":\" : \"\";\n        const local = rest.join(\"/\");\n\n        return `${drive}${local}`;\n    }\n\n    export function toarray(x: string): PathArray {\n        const splits = x.split(/:/g);\n        const [drive, local] = splits.length >= 2 ? splits : [\"\", x];\n\n        return [drive, ...(local ? local.split(/[\\/\\\\]/g) : [])];\n    }\n\n    /**\n     * remove all back/slashes, then add a trailing slash if requested to a string\n     */\n    export function normSlash(x: string, trailing: boolean) {\n        return Path.trimSlash(x) + (trailing ? \"/\" : \"\");\n    }\n\n    /**\n     * remove all back/slashes from string\n     */\n    export function trimSlash(x: string) {\n        return x.replace(/[\\/\\\\]/g, \"\");\n    }\n}\n\nexport namespace Tag {\n    export const html = (strings: TemplateStringsArray, ...args: any[]) =>\n        strings\n            .map((str, i) => [str, args[i]])\n            .flat()\n            .filter((a) => !!a)\n            .join(\"\");\n\n    /**\n     * for generating element attributes in html markup\n     */\n    type attrSpec = { key: string; values: (boolean | string)[] };\n    export const attrs = (specs: attrSpec[]) => {\n        return specs\n            .map((s) => {\n                const value = s.values.filter((x) => x).join(\" \");\n                return value ? ` ${s.key}=\"${value}\"` : \"\";\n            })\n            .join(\"\");\n    };\n}\n\nexport namespace Trait {\n    export type Keyof<T> = Exclude<keyof T, number>;\n}\n\nexport namespace Tree {\n    const treeTemplate = document.createElement(\"template\");\n    const inputSpanTemplate = document.createElement(\"template\");\n    const nameSpanTemplate = document.createElement(\"template\");\n\n    export function breadcrumbsSpans(path: string[]): string {\n        return (\n            `<div class=\"tf-breadcrumbs-home\"><span class=\"tf-breadcrumbs-crumb tf-breadcrumbs-icon tf-breadcrumbs-dir-icon\" data-crumbix=\"0\"></span><span>/</span></div>` +\n            [...path.slice(1)]\n                .map(\n                    (x, i) =>\n                        `<span class=\"tf-breadcrumbs-crumb\" data-crumbix=\"${\n                            i + 1\n                        }\">${x}</span>`,\n                )\n                .join(`<span class=\"tf-breadcrumbs-separator\">/</span>`)\n        );\n    }\n\n    export function colHeaderSpans(name: string, filter: boolean = false) {\n        nameSpanTemplate.innerHTML = `<span class=\"tf-header\"><span class=\"tf-header-name\">${name}</span><span class=\"tf-header-sort\"></span></span>`;\n\n        if (filter) {\n            inputSpanTemplate.innerHTML = `<input class=\"tf-header-input\"></input>`;\n            return [\n                inputSpanTemplate.content.firstChild!,\n                nameSpanTemplate.content.firstChild!,\n            ];\n        } else {\n            return [nameSpanTemplate.content.firstChild!];\n        }\n    }\n\n    function rowHeaderLevelsHtml({\n        hasChildren,\n        isExpand,\n        path = [],\n    }: {\n        hasChildren: boolean;\n        isExpand: boolean;\n        path?: string[];\n    }) {\n        const tree_levels = path\n            .slice(1)\n            .map(() => '<span class=\"rt-tree-group\"></span>');\n        if (hasChildren) {\n            const group_icon = isExpand ? \"remove\" : \"add\";\n            const tree_button = `<span class=\"rt-row-header-icon\">${group_icon}</span>`;\n            tree_levels.push(tree_button);\n        }\n\n        return tree_levels.join(\"\");\n    }\n\n    export function rowHeaderSpan({\n        hasChildren,\n        isExpand,\n        path,\n        editable = false,\n        pathRender = \"tree\",\n    }: {\n        hasChildren: boolean;\n        isExpand: boolean;\n        path: string[];\n        editable?: boolean;\n        pathRender?: \"regular\" | \"relative\" | \"tree\";\n    }): [HTMLSpanElement] | [string, HTMLSpanElement] {\n        // normalize forward/backslash usage in path parts, and ensure that all dirs have a trailing forward slash\n        path = path.map((x, ix) =>\n            Path.normSlash(x, ix < path.length - 1 || hasChildren),\n        );\n\n        const header_attrs = Tag.attrs([\n            {\n                key: \"class\",\n                values: [\n                    \"rt-group-name\",\n                    !hasChildren && \"rt-group-leaf\",\n                    editable && \"tf-mod-editable\",\n                ],\n            },\n        ]);\n        const header_text =\n            pathRender === \"relative\" ? path.join(\"\") : path.slice(-1).join(\"\");\n        const tree_levels = rowHeaderLevelsHtml({\n            hasChildren,\n            isExpand,\n            path: pathRender === \"tree\" ? path : [],\n        });\n\n        treeTemplate.innerHTML = `<span class=\"rt-tree-container\">${tree_levels}<span${header_attrs}>${header_text}</span></span>`;\n\n        if (pathRender === \"regular\") {\n            return [\n                path.slice(0, -1).join(\"\"),\n                treeTemplate.content.firstChild!,\n            ] as [string, HTMLSpanElement];\n        } else {\n            return [treeTemplate.content.firstChild!] as [HTMLSpanElement];\n        }\n    }\n}\n","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\nimport { Path } from \"./util\";\n\nexport const DEFAULT_COL = \"path\";\n\nexport interface IContentRow {\n    path: Path.PathArray;\n    kind: \"dir\" | string;\n    getChildren?: () => Promise<IContentRow[]>;\n}\n\nexport class Content<T extends IContentRow> {\n    constructor({\n        row,\n        filterer,\n        sorter,\n    }: {\n        row: T;\n        filterer?: Content.Filterer<T>;\n        sorter?: Content.Sorter<T>;\n    }) {\n        this.init({ row, filterer, sorter });\n    }\n\n    init({\n        row,\n        filterer,\n        sorter,\n    }: {\n        row: T;\n        filterer?: Content.Filterer<T>;\n        sorter?: Content.Sorter<T>;\n    }) {\n        this.row = row;\n\n        this.filterer = filterer;\n        this.sorter = sorter;\n\n        return this;\n    }\n\n    collapse() {\n        this._isExpand = false;\n    }\n\n    equalPath(otherPath: Path.PathArray) {\n        return Path.equal(this.row.path, otherPath);\n    }\n\n    async expand() {\n        this._isExpand = true;\n        await this.getChildren();\n    }\n\n    async getChildren() {\n        // isContentDirRow is a typeguard that asserts that T extends IContentDirRow\n        if (!this._row.getChildren) {\n            return;\n        }\n\n        if (this._dirtyChildren) {\n            if (this._cacheMap) {\n                // attempt to reseat existing Content row\n                this._cache = (await this._row.getChildren()).map(\n                    (row: T) =>\n                        this._cacheMap!.get(row.path.join(\"/\"))?.init({\n                            row,\n                            sorter: this._sorter,\n                        }) ?? new Content<T>({ row, sorter: this._sorter }),\n                );\n            } else {\n                this._cache = (await this._row.getChildren()).map(\n                    (row: T) => new Content<T>({ row, sorter: this._sorter }),\n                );\n            }\n            this._cacheMap = new Map(this._cache.map((x) => [x.pathstr, x]));\n\n            this._dirtyChildren = false;\n            this._dirtySort = !!this._sorter;\n        }\n\n        if (this._dirtySort) {\n            this._cache!.sort(this._sorter);\n        }\n\n        return this._cache;\n    }\n\n    getPathAtDepth(depth = 0, fill?: string) {\n        const pth = this.row.path.slice(depth);\n\n        if (fill !== undefined && pth.length > 1) {\n            return [...Array(pth.length - 1).fill(fill), pth[pth.length - 1]];\n        } else {\n            return pth;\n        }\n    }\n\n    protected async _flatten(_flat: Content<T>[] = []): Promise<Content<T>[]> {\n        if (this.hasChildren) {\n            for (const child of (await this.getChildren())!) {\n                _flat.push(child);\n                if (child.isExpand) {\n                    await child._flatten(_flat);\n                }\n            }\n        }\n\n        return _flat;\n    }\n\n    async flatten(): Promise<Content<T>[]> {\n        return this._filterer\n            ? (await this._flatten()).filter(this._filterer)\n            : await this._flatten();\n    }\n\n    /**\n     * If _recursive, mark any subcache as invalid as well\n     */\n    invalidate(_recursive = false) {\n        if (this.hasChildren) {\n            [this._dirtyChildren, this._dirtySort] = [true, false];\n            if (_recursive && this._cache) {\n                for (const child of this._cache) {\n                    child.invalidate(_recursive);\n                }\n            }\n        }\n    }\n\n    get hasChildren() {\n        return this._hasChildren;\n    }\n\n    get isExpand() {\n        return this._isExpand;\n    }\n\n    get nchildren() {\n        return this._cache?.length ?? 0;\n        // return this._children?.size ?? 0;\n    }\n\n    get name() {\n        return this.row.path.slice(-1)[0];\n    }\n\n    get pathstr() {\n        return this._pathstr;\n    }\n\n    get row() {\n        return this._row;\n    }\n\n    set row(row: T) {\n        this._row = row;\n        this._hasChildren = !!this._row.getChildren;\n        this._pathstr = this._row.path.join(\"/\");\n\n        this.invalidate();\n    }\n\n    set filterer(filterer: Content.Filterer<T> | undefined) {\n        this._filterer = filterer;\n        // this._dirtyFilter = !!filterer;\n    }\n\n    set sorter(sorter: Content.Sorter<T> | undefined) {\n        this._sorter = sorter;\n        this._dirtySort = !!(sorter && this._cache);\n\n        if (this._cache) {\n            for (const child of this._cache) {\n                child.sorter = sorter;\n            }\n        }\n    }\n\n    protected get _dirty() {\n        return this._dirtyChildren || this._dirtySort; //|| this._dirtyFilter;\n    }\n\n    protected _row: T;\n\n    protected _hasChildren: boolean = false;\n    protected _isExpand: boolean = false;\n    protected _name: string;\n    protected _pathstr: string;\n\n    protected _cache?: Content<T>[];\n    protected _cacheMap?: Map<string, Content<T>>;\n\n    protected _dirtyChildren: boolean = false;\n    // protected _dirtyFilter: boolean = false;\n    protected _dirtySort: boolean = false;\n\n    protected _filterer?: Content.Filterer<T>;\n    protected _sorter?: Content.Sorter<T>;\n}\n\nexport namespace Content {\n    export type Filterer<T extends IContentRow> = (c: Content<T>) => boolean;\n    export type Sorter<T extends IContentRow> = (\n        l: Content<T>,\n        r: Content<T>,\n    ) => number;\n\n    export function blank<T extends IContentRow>(cols: (keyof T)[]) {\n        return new Content({\n            row: cols.reduce((x, col) => {\n                if (col === \"path\") {\n                    x[\"path\"] = [];\n                } else {\n                    x[col] = \"\" as any;\n                }\n                return x;\n            }, {} as T),\n        });\n    }\n}\n","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\nimport { IContentRow } from \"../content\";\nimport { ContentsModel } from \"../model\";\nimport { Tag, Tree } from \"../util\";\n\nexport class TreeFinderBreadcrumbsElement<\n    T extends IContentRow,\n> extends HTMLElement {\n    connectedCallback() {\n        if (!this._initialized) {\n            this.create_shadow_dom();\n\n            this._initialized = true;\n        }\n\n        if (!this._initializedListeners) {\n            this.addEventListener(\"mouseup\", (event) => this.onClick(event));\n\n            this._initializedListeners = true;\n        }\n    }\n\n    init(model: ContentsModel<T>) {\n        this.model = model;\n\n        this.model.crumbModel.crumbNamesSub.subscribe({\n            next: (x) => this._onCrumbUpdate(x),\n        });\n    }\n\n    protected async _onCrumbUpdate(path: string[]) {\n        this.innerHTML = Tree.breadcrumbsSpans(path);\n    }\n\n    create_shadow_dom() {\n        this.attachShadow({ mode: \"open\" });\n\n        const crumbsSlot = `<slot></slot>`;\n\n        this.shadowRoot!.innerHTML = Tag.html`\n      <style>\n        :host > .tf-breadcrumbs-top {\n          display: flex;\n          align-items: flex-start;\n        }\n      </style>\n      <div class=\"tf-breadcrumbs-top\">\n        ${crumbsSlot}\n      </div>\n    `;\n\n        [this.shadowSheet, this.top] = this.shadowRoot!.children as any as [\n            StyleSheet,\n            HTMLElement,\n        ];\n    }\n\n    async onClick(event: MouseEvent) {\n        if (event.button !== 0) {\n            return;\n        }\n\n        const target = event.target as HTMLElement;\n\n        if (target.dataset.crumbix) {\n            this.model.crumbModel.revert(parseInt(target.dataset.crumbix));\n        }\n    }\n\n    protected model: ContentsModel<T>;\n    protected shadowSheet: StyleSheet;\n    protected top: HTMLElement;\n\n    private _initialized: boolean = false;\n    private _initializedListeners: boolean = false;\n}\n\n// export namespace TreeFinderBreadcrumbsElement {\n// }\n\nif (\n    document.createElement(\"tree-finder-breadcrumbs\").constructor ===\n    HTMLElement\n) {\n    customElements.define(\n        \"tree-finder-breadcrumbs\",\n        TreeFinderBreadcrumbsElement,\n    );\n}\n","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\nimport { IContentRow } from \"../content\";\nimport { ContentsModel } from \"../model\";\nimport { Tag } from \"../util\";\n\nexport class TreeFinderFilterElement<\n    T extends IContentRow,\n> extends HTMLElement {\n    clear() {\n        this.innerHTML = `<input class=\"tf-filter-input\"></input>`;\n\n        [this._input] = this.children as any as [HTMLInputElement];\n    }\n\n    connectedCallback() {\n        if (!this._initialized) {\n            this.create_shadow_dom();\n\n            this._initialized = true;\n        }\n\n        if (!this._initializedListeners) {\n            this.addEventListener(\"input\", (event) =>\n                this.onInput(event as InputEvent),\n            );\n\n            this._initializedListeners = true;\n        }\n    }\n\n    init(model: ContentsModel<T>, ix: number = 0) {\n        this.model = model;\n\n        this.clear();\n\n        if (ix === 0) {\n            this._col = \"path\";\n        } else {\n            this._col = this.model.columns[ix - 1];\n        }\n    }\n\n    create_shadow_dom() {\n        this.attachShadow({ mode: \"open\" });\n\n        const inputSlot = `<slot></slot>`;\n\n        this.shadowRoot!.innerHTML = Tag.html`\n      <style>\n        :host > .tf-filter-top {\n          display: inline-block;\n          padding: 8px 0px 4px 0px;\n          width: 100%;\n        }\n      </style>\n      <div class=\"tf-filter-top\">\n        ${inputSlot}\n      </div>\n    `;\n\n        [this.shadowSheet, this.top] = this.shadowRoot!.children as any as [\n            StyleSheet,\n            HTMLElement,\n        ];\n    }\n\n    onInput(event: InputEvent) {\n        const fpat = {\n            col: this._col,\n            pattern: (event.target as HTMLInputElement).value,\n        };\n        this.model.filterCol = this._col;\n        this.model.onFilterInput(fpat);\n    }\n\n    get col() {\n        return this._col;\n    }\n\n    get input() {\n        return this._input;\n    }\n\n    protected _col: keyof T;\n    protected _input: HTMLInputElement;\n\n    protected model: ContentsModel<T>;\n    protected shadowSheet: StyleSheet;\n    protected top: HTMLElement;\n\n    private _initialized: boolean = false;\n    private _initializedListeners: boolean = false;\n}\n\nif (document.createElement(\"tree-finder-filter\").constructor === HTMLElement) {\n    customElements.define(\"tree-finder-filter\", TreeFinderFilterElement);\n}\n","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\nimport { IContentRow } from \"../content\";\nimport { ContentsModel } from \"../model\";\nimport { Tag } from \"../util\";\n\nimport { TreeFinderFilterElement } from \"./filter\";\n\nexport class TreeFinderFiltersElement<\n    T extends IContentRow,\n> extends HTMLElement {\n    clear() {\n        this.innerHTML = `<tree-finder-filter></tree-finder-filter>`.repeat(\n            this.model.columns.length + 1,\n        );\n\n        this.filters = Array.from(\n            this.children,\n        ) as TreeFinderFilterElement<T>[];\n    }\n\n    connectedCallback() {\n        if (!this._initialized) {\n            this.create_shadow_dom();\n\n            this._initialized = true;\n        }\n\n        // if (!this._initializedListeners) {\n        //   this.addEventListener(\"mouseup\", event => this.onClick(event));\n\n        //   this._initializedListeners = true;\n        // }\n    }\n\n    init(model: ContentsModel<T>) {\n        if (!this._initialized) {\n            this.create_shadow_dom();\n\n            this._initialized = true;\n        }\n\n        this.model = model;\n\n        this.clear();\n\n        for (const [index, element] of this.filters.entries()) {\n            element.init(model, index);\n        }\n    }\n\n    create_shadow_dom() {\n        this.attachShadow({ mode: \"open\" });\n\n        const filterSlot = `<slot></slot>`;\n\n        this.shadowRoot!.innerHTML = Tag.html`\n      <style>\n      </style>\n      <div class=\"tf-filters-top\">\n        ${filterSlot}\n      </div>\n    `;\n\n        [this.shadowSheet, this.top] = this.shadowRoot!.children as any as [\n            StyleSheet,\n            HTMLElement,\n        ];\n    }\n\n    entries() {\n        return this.filters.entries();\n    }\n\n    getChild(ix: number): TreeFinderFilterElement<T> {\n        return this.filters[ix];\n    }\n\n    getInput(ix: number): HTMLInputElement {\n        return this.getChild(ix)?.input;\n    }\n\n    protected filters: TreeFinderFilterElement<T>[];\n    protected model: ContentsModel<T>;\n    protected shadowSheet: StyleSheet;\n    protected top: HTMLElement;\n\n    private _initialized: boolean = false;\n    // private _initializedListeners: boolean = false;\n}\n\n// export namespace TreeFinderFiltersElement {\n// }\n\nif (document.createElement(\"tree-finder-filters\").constructor === HTMLElement) {\n    customElements.whenDefined(\"tree-finder-filter\").then(() => {\n        customElements.define(\"tree-finder-filters\", TreeFinderFiltersElement);\n    });\n}\n","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\nimport * as rt from \"regular-table\";\n\nimport { Content, IContentRow } from \"../content\";\nimport { ContentsModel } from \"../model\";\nimport { Format, RegularTable, Tree } from \"../util\";\n\nimport { TreeFinderFilterElement } from \"./filter\";\nimport { TreeFinderFiltersElement } from \"./filters\";\n\n// await customElements.whenDefined('regular-table');\nif (document.createElement(\"regular-table\").constructor === HTMLElement) {\n    window.customElements.define(\"regular-table\", rt.RegularTableElement);\n}\nconst RegularTableElement = customElements.get(\"regular-table\");\n\nexport class TreeFinderGridElement<\n    T extends IContentRow,\n> extends RegularTableElement {\n    init(\n        model: ContentsModel<T>,\n        options: TreeFinderGridElement.IOptions<T> = {},\n    ) {\n        this.model = model;\n        this.options = options;\n\n        // TODO: apply the setDataListener typing fix below, once regular-table has pulled in the relevant typing fixes upstream\n        // this.setDataListener(this.dataListener.bind(this), {virtual_mode: this._options.virtual_mode});\n        (this as any).setDataListener(this.dataListener.bind(this), {\n            virtual_mode: this._options.virtual_mode,\n        });\n\n        // run listener initializations only once\n        if (!this._initializedListeners) {\n            const [thead, tbody] = [\n                (this as any).table_model.header.table,\n                (this as any).table_model.body.table,\n            ] as HTMLTableSectionElement[];\n\n            this.addStyleListener(() => this.columnHeaderStyleListener());\n            this.addStyleListener(() => this.rowStyleListener());\n\n            this.addEventListener(\"mouseover\", (event) =>\n                this.onMouseover(event),\n            );\n\n            thead.addEventListener(\"mouseup\", (event) =>\n                this.onSortClick(event),\n            );\n\n            // handle selection by triggering onRowClick on both left and contextmenu (ie right) button click\n            tbody.addEventListener(\"contextmenu\", (event) =>\n                this.onRowClick(event),\n            );\n            tbody.addEventListener(\"dblclick\", (event) =>\n                this.onRowDoubleClick(event),\n            );\n            tbody.addEventListener(\"mouseup\", (event) =>\n                this.onRowClick(event),\n            );\n            tbody.addEventListener(\"mouseup\", (event) =>\n                this.onTreeClick(event),\n            );\n\n            // click debug listener\n            // this.addEventListener(\"mousedown\", event => RegularTable.clickLoggingListener(event, this));\n\n            if (this.options.doWindowResize) {\n                // resize whenever window size changes, if requested\n                window.addEventListener(\"resize\", async () => {\n                    await this.draw();\n                });\n            }\n\n            // effectively a listener for model.requestDraw invocations\n            this.model.drawSub.subscribe(async (x) => {\n                if (x) {\n                    (this as any)._resetAutoSize();\n                }\n\n                await this.draw();\n\n                if (this.model.options.needsWidths) {\n                    // correct handling of autowidth seems to frequently require the second draw\n                    await this.draw();\n                }\n            });\n\n            this._initializedListeners = true;\n        }\n\n        this.model.requestDraw();\n    }\n\n    async dataListener(\n        start_col: number,\n        start_row: number,\n        end_col: number,\n        end_row: number,\n    ) {\n        return {\n            // num_columns/rows: number -> count of cols/rows\n            num_columns: this.model.columns.length,\n            num_rows: this.model.contents.length,\n\n            // column/row_headers: string[] -> arrays of path parts that get displayed as the first value in each col/row. Length > 1 implies a tree structure\n            column_headers: this.model.columns\n                .slice(start_col, end_col)\n                .map((x, i) =>\n                    this.options.showFilter\n                        ? [\n                              this.filters!.getChild(i + 1),\n                              ...Tree.colHeaderSpans(x as string),\n                          ]\n                        : Tree.colHeaderSpans(x as string),\n                ),\n            row_headers: this.model.contents\n                .slice(start_row, end_row)\n                .map((x) => this._getRowHeader(x)),\n\n            // data: object[][] -> array of arrays, each subarray containing all of the visible values for one column\n            // .isBlank works around issue with formatting placeholder row that shows up when data is blank\n            // TODO: refactor away .isBlank workaround\n            data: this.model.isBlank\n                ? Array(this.model.columns.length).fill([\"\"])\n                : this._getData(start_col, start_row, end_col, end_row),\n        };\n    }\n\n    columnHeaderStyleListener() {\n        this.cornerHeaderStyleListener();\n\n        for (const th of this.querySelectorAll(\n            \"thead tr:first-child th\",\n        ) as any as HTMLTableHeaderCellElement[]) {\n            th.classList.toggle(\"tf-header-align-left\", true);\n\n            const filter = th.querySelector(\n                \"tree-finder-filter\",\n            ) as TreeFinderFilterElement<T>;\n            if (filter) {\n                filter.input.classList.toggle(\"tf-header-input\", true);\n                if (this.model.filterCol === filter.col) {\n                    filter.input.focus();\n                    delete this.model.filterCol;\n                }\n            }\n        }\n\n        for (const th of this.querySelectorAll(\n            \"thead tr:last-child th\",\n        ) as any as HTMLTableHeaderCellElement[]) {\n            const meta = this.getMeta(th);\n            const col = RegularTable.colNameFromMeta(meta) as keyof T;\n\n            if (col) {\n                const sortOrder =\n                    this.model.sortStates.byColumn[col === \"0\" ? \"path\" : col]\n                        ?.order;\n                th.querySelector(\".tf-header-sort\")?.classList.toggle(\n                    `tf-header-sort-${sortOrder}`,\n                    !!sortOrder,\n                );\n            }\n\n            th.classList.toggle(\n                \"tf-header-corner\",\n                typeof meta.x === \"undefined\",\n            );\n            th.classList.toggle(\"tf-header-align-left\", true);\n        }\n\n        if (this.model.options.needsWidths) {\n            this.columnWidthStyleListener();\n        }\n    }\n\n    columnWidthStyleListener() {\n        // complete and accurate autowidth for the tree-finder-filter input elems\n        let pxs = [...(this as any)._column_sizes.indices];\n        if (this._pathRender === \"regular\" && pxs.length > 0) {\n            pxs = [pxs[0] + pxs[1], ...pxs.slice(2)];\n        }\n        this.model.columnWidthsSub.next(\n            pxs.map((px) => `calc(${px}px - 12px)`),\n        );\n    }\n\n    cornerHeaderStyleListener() {\n        const initSpans = this.querySelectorAll(\n            `thead tr > th:first-child > span:first-child:not([class])`,\n        );\n        const newSpans = this.options.showFilter\n            ? [this.filters!.getChild(0), ...Tree.colHeaderSpans(\"path\")]\n            : Tree.colHeaderSpans(\"path\");\n        for (let i = 0; i < initSpans.length; i++) {\n            initSpans[i].replaceWith(newSpans[i]);\n        }\n    }\n\n    rowStyleListener() {\n        const spans = this.querySelectorAll(\n            \"tbody th span.rt-group-name\",\n        ) as any as HTMLSpanElement[];\n        for (const span of spans) {\n            const { y } = RegularTable.metadataFromElement(\n                span as HTMLTableCellElement,\n                this,\n            )!;\n\n            if (y != null) {\n                const content = this.model.contents[y];\n\n                // style the filetype icon for this row\n                span.classList.add(\n                    \"tf-grid-filetype-icon\",\n                    `tf-grid-${content.row.kind}-icon`,\n                );\n\n                // style the path renamer for this row, if neded\n                this._renamerStyleListener(span, content);\n            }\n        }\n\n        this._selectedStyleListener();\n    }\n\n    async onMouseover(event: MouseEvent) {\n        if (this._pathRender === \"regular\") {\n            const element = event.target as HTMLTableCellElement;\n            const metadata = RegularTable.metadataFromElement(element, this);\n            const rowHeader = metadata?.row_header?.[0] as any as string;\n\n            for (let tr of (this as any).table_model.body\n                .rows as HTMLElement[]) {\n                if (tr.childElementCount > this.model.columns.length + 1) {\n                    const th = tr.children[0];\n                    th.classList.toggle(\n                        \"tf-mod-hover\",\n                        th.textContent === rowHeader,\n                    );\n                }\n            }\n        }\n    }\n\n    async onRowClick(event: MouseEvent) {\n        // allow both left and right click to fire this handler\n        if (event.button !== 0 && event.button !== 2) {\n            return;\n        }\n\n        const element = event.target as HTMLTableCellElement;\n        if (element.classList.contains(\"rt-row-header-icon\")) {\n            // if open/close icon is clicked, don't select\n            return;\n        }\n        const metadata = RegularTable.metadataFromElement(element, this);\n        if (!metadata || !RegularTable.rowClicked(metadata)) {\n            return;\n        }\n\n        const content = this.model.contents[metadata.y!];\n\n        if (event.button === 2 && this.model.selectionModel.has(content)) {\n            // if right-clicking on an existing selection, don't change it\n            return;\n        }\n\n        if (event.shiftKey) {\n            this.model.selectionModel.selectRange(content, this.model.contents);\n        } else {\n            this.model.selectionModel.select(\n                content,\n                event.ctrlKey || event.metaKey,\n            );\n        }\n\n        // can't call draw, breaks any subsequent doubleClick event. Instead call style listener directly\n        this._selectedStyleListener();\n    }\n\n    async onSortClick(event: MouseEvent) {\n        if (event.button !== 0) {\n            return;\n        }\n\n        const element = event.target as HTMLTableCellElement;\n        if (element.classList.contains(\"rt-column-resize\")) {\n            // don't sort when the column resize handle nodes are clicked\n            return;\n        }\n\n        const meta = RegularTable.metadataFromElement(element, this);\n        if (\n            !meta ||\n            !RegularTable.columnHeaderClicked(meta) ||\n            meta.column_header_y! <\n                (this as any).table_model.header.rows.length - 1\n        ) {\n            return;\n        }\n\n        await this.model.sort({\n            col: RegularTable.colNameFromMeta(meta) as keyof T,\n            multisort: event.shiftKey,\n        });\n    }\n\n    async onTreeClick(event: MouseEvent) {\n        if (event.button !== 0) {\n            return;\n        }\n\n        let element = event.target as HTMLTableCellElement;\n        if (!element.classList.contains(\"rt-row-header-icon\")) {\n            // only open/close node when open/close icon is clicked\n            return;\n        }\n\n        // assert that metadata exists, given element.classList check above\n        const metadata = RegularTable.metadataFromElement(element, this)!;\n\n        if (this.model.contents[metadata.y!].isExpand) {\n            await this.model.collapse(metadata.y!);\n        } else {\n            await this.model.expand(metadata.y!);\n        }\n\n        // (this as any)._resetAutoSize();\n        // this.draw();\n    }\n\n    async onRowDoubleClick(event: MouseEvent) {\n        if (event.button !== 0) {\n            return;\n        }\n\n        const element = event.target as HTMLTableCellElement;\n        const metadata = RegularTable.metadataFromElement(element, this);\n        if (!metadata || !RegularTable.rowClicked(metadata)) {\n            return;\n        }\n\n        // event.preventDefault();\n        // event.stopPropagation();\n        // event.stopImmediatePropagation();\n        // event.returnValue = false;\n\n        const newRootContent = this.model.contents[metadata.y!];\n        await this.model.open(newRootContent.row);\n    }\n\n    get options() {\n        return { ...this._options };\n    }\n\n    set options({\n        columnFormatters = undefined,\n        doWindowResize = false,\n        pathRender = \"tree\",\n        pathRenderOnFilter = \"relative\",\n        showFilter = false,\n        virtual_mode = \"vertical\",\n    }: TreeFinderGridElement.IOptions<T>) {\n        this._options = {\n            columnFormatters,\n            doWindowResize,\n            pathRender,\n            pathRenderOnFilter,\n            showFilter,\n            virtual_mode,\n        };\n\n        this.showFilter = this._options.showFilter!;\n    }\n\n    set showFilter(flag: boolean) {\n        if (flag) {\n            this.filters = document.createElement(\"tree-finder-filters\");\n            this.filters.init(this.model);\n        } else {\n            delete this.filters;\n        }\n\n        this._options.showFilter = flag;\n    }\n\n    protected _getData(\n        start_col: number,\n        start_row: number,\n        end_col: number,\n        end_row: number,\n    ) {\n        const data: T[keyof T][][] = [];\n        // using slice creates an unneeded shallow copy, but is currently the \"official\"\n        // regular-table endorsed pattern for guarding against spuriously large end_col/end_row values\n        // TODO: refactor away slice by just doing the damn math\n        for (const column of this.model.columns.slice(start_col, end_col)) {\n            const formatter =\n                this.options.columnFormatters?.[column] ?? ((x) => x);\n            data.push(\n                this.model.contents.slice(start_row, end_row).map((content) => {\n                    const val = formatter(content.row[column]);\n                    return (\n                        val instanceof Date\n                            ? Format.DATE_FORMATTER.format(val)\n                            : val\n                    ) as T[keyof T];\n                }),\n            );\n        }\n\n        return data;\n    }\n\n    protected _getRowHeader(target: Content<T>) {\n        return Tree.rowHeaderSpan({\n            hasChildren: target.hasChildren,\n            isExpand: target.isExpand,\n            path: target.getPathAtDepth(this.model.pathDepth),\n            editable: this.model.renamerTest(target),\n            pathRender: this._pathRender,\n        });\n    }\n\n    protected _renamerStyleListener(element: HTMLElement, target: Content<T>) {\n        // if this path span is a renamer element, initialize it\n        if (element.classList.contains(\"tf-mod-editable\")) {\n            if (!element.getAttribute(\"contenteditable\")) {\n                // activate renamer on enter, cancel it on escape\n                element.addEventListener(\"keydown\", (event: KeyboardEvent) => {\n                    if (event.key === \"Enter\") {\n                        element.blur();\n                    } else if (event.key === \"Escape\") {\n                        element.textContent = target.name;\n                        element.blur();\n                    }\n                });\n                // activate then destroy renamer when it loses focus\n                element.addEventListener(\"blur\", () => {\n                    const name = element.textContent;\n                    if (name) {\n                        // if name is blank, skip. Otherwise, perform the actual renaming\n                        target.row.path = [\n                            ...target.row.path.slice(0, -1),\n                            name,\n                        ];\n                        element.classList.toggle(\"tf-mod-editable\", false);\n                        element.removeAttribute(\"contenteditable\");\n                        // publish renamer info when the editable element loses focus\n                        this.model.renamerSub.next({ name, target: target });\n                    }\n                    // in any case, reset the renamer\n                    this.model.renamerPath = null;\n                });\n                element.setAttribute(\"contenteditable\", \"true\");\n            }\n            // ensure that the renamer has focus so long as it exists and is visible\n            element.focus();\n        }\n    }\n\n    protected _selectedStyleListener() {\n        const colCount = this.model.columns.length + 1;\n        // there may be spurious rows in table, clamp selected check to contents length\n        // TODO: refactor away the any cast once upstream typing fixes are released in regular-table\n        // for (let tr of this.table_model.body.rows.slice(0, this.model.contents.length) as HTMLElement[]) {\n        for (let tr of (this as any).table_model.body.rows.slice(\n            0,\n            this.model.contents.length,\n        ) as HTMLElement[]) {\n            const { y } = RegularTable.metadataFromElement(\n                tr.children[0]!,\n                this,\n            )!;\n\n            if (tr && tr.tagName === \"TR\") {\n                tr.classList.toggle(\n                    \"tf-mod-select\",\n                    this.model.selectionModel.has(this.model.contents[y!]),\n                );\n\n                if (this._pathRender === \"regular\") {\n                    for (let i = 0; i < tr.children.length - colCount; i++) {\n                        tr.children[0].classList.toggle(\n                            \"tf-mod-select-not\",\n                            true,\n                        );\n                    }\n                }\n            }\n        }\n    }\n\n    protected get _pathRender() {\n        if (this.model.filterPatterns.any) {\n            return this.options.pathRenderOnFilter || \"tree\";\n        } else {\n            return this.options.pathRender || \"tree\";\n        }\n    }\n\n    protected _options: TreeFinderGridElement.IOptions<T>;\n    protected filters?: TreeFinderFiltersElement<T>;\n    protected model: ContentsModel<T>;\n\n    private _initializedListeners: boolean = false;\n}\n\nexport namespace TreeFinderGridElement {\n    export interface IOptions<T extends IContentRow> {\n        columnFormatters?: { [key in keyof T]?: (datum: T[key]) => any };\n\n        /**\n         * if true, redraw the tree-finder-grid element on window resize events\n         */\n        doWindowResize?: boolean;\n\n        /**\n         * select from different strategies for rendcering the paths\n         */\n        pathRender?: \"regular\" | \"relative\" | \"tree\";\n\n        /**\n         * if not null, the rendering of paths will change when any filter is set\n         */\n        pathRenderOnFilter?: \"regular\" | \"relative\" | \"tree\";\n\n        /**\n         * if true, add filter inputs to top of each colum\n         */\n        showFilter?: boolean;\n\n        /**\n         * pass through to .setDataListener \"virtual_mode\" opt\n         */\n        virtual_mode?: \"both\" | \"horizontal\" | \"none\" | \"vertical\";\n    }\n}\n\nif (document.createElement(\"tree-finder-grid\").constructor === HTMLElement) {\n    Promise.all([\n        customElements.whenDefined(\"tree-finder-breadcrumbs\"),\n        customElements.whenDefined(\"tree-finder-filters\"),\n        customElements.whenDefined(\"regular-table\"),\n    ]).then(() => {\n        customElements.define(\"tree-finder-grid\", TreeFinderGridElement);\n    });\n}\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\nimport { Subject } from \"rxjs\";\n\nimport { IContentRow } from \"../content\";\nimport { ContentsModel } from \"./model\";\n\nexport class ClipboardModel implements ClipboardModel.IClipboardModel {\n    /**\n     * low-level ccp support functions\n     */\n    copy<T extends IContentRow>(memo: T[]) {\n        this.doCut = false;\n        this.memo = memo;\n        this.copySub.next(memo);\n    }\n\n    cut<T extends IContentRow>(memo: T[]) {\n        this.doCut = true;\n        this.memo = memo;\n        this.cutSub.next(memo);\n    }\n\n    delete<T extends IContentRow>(memo: T[]) {\n        this.deleteSub.next(memo);\n    }\n\n    paste<T extends IContentRow>(destination: T) {\n        this.pasteSub.next({\n            destination,\n            doCut: this.doCut,\n            memo: this.memo,\n        });\n\n        this.doCut = false;\n    }\n\n    /**\n     * sugar for ccp from selection. contentsModel is left as a free variable\n     * to facilitate copying from one contentsModel to another\n     */\n    copySelection<T extends IContentRow>(contentsModel: ContentsModel<T>) {\n        this.copy(contentsModel.selection.map((x) => x.row));\n    }\n\n    cutSelection<T extends IContentRow>(contentsModel: ContentsModel<T>) {\n        this.cut(contentsModel.selection.map((x) => x.row));\n    }\n\n    deleteSelection<T extends IContentRow>(contentsModel: ContentsModel<T>) {\n        this.delete(contentsModel.selection.map((x) => x.row));\n    }\n\n    pasteSelection<T extends IContentRow>(contentsModel: ContentsModel<T>) {\n        const row = contentsModel.selectedLast?.row ?? contentsModel.root.row;\n        if (row) {\n            this.paste(row);\n        }\n    }\n\n    /**\n     * other\n     */\n    open<T extends IContentRow>(contentsModel: ContentsModel<T>, memo: T[]) {\n        contentsModel.openSub.next(memo);\n    }\n\n    refresh<T extends IContentRow>(contentsModel: ContentsModel<T>, memo: T[]) {\n        contentsModel.refreshSub.next(memo);\n    }\n\n    readonly copySub = new Subject<IContentRow[]>();\n    readonly cutSub = new Subject<IContentRow[]>();\n    readonly deleteSub = new Subject<IContentRow[]>();\n    readonly pasteSub = new Subject<ClipboardModel.IPaste>();\n\n    protected doCut: boolean = false;\n    protected memo: IContentRow[] = [];\n}\n\nexport namespace ClipboardModel {\n    export interface IClipboardModel {\n        copy<T extends IContentRow>(memo: T[]): void;\n        cut<T extends IContentRow>(memo: T[]): void;\n        delete<T extends IContentRow>(memo: T[]): void;\n        paste<T extends IContentRow>(destination: T): void;\n\n        readonly copySub: Subject<IContentRow[]>;\n        readonly cutSub: Subject<IContentRow[]>;\n        readonly deleteSub: Subject<IContentRow[]>;\n        readonly pasteSub: Subject<IPaste>;\n    }\n\n    export interface IPaste {\n        destination: IContentRow;\n        doCut: boolean;\n        memo: IContentRow[];\n    }\n}\n","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\n\nimport { IContentRow } from \"../content\";\nimport { Path } from \"../util\";\n\ninterface IMockContentRow extends IContentRow {\n    modified: Date;\n\n    writable: boolean;\n}\n\nconst _mockCache: { [key: string]: IMockContentRow[] } = {};\n\nlet mockFileIx = 0;\nlet modDaysIx = -1;\n\nexport function mockContent(props: {\n    path: Path.PathArray;\n    kind: string;\n    modDays?: number;\n    nchildren?: number;\n    ndirectories?: number;\n    randomize?: boolean;\n}): IMockContentRow {\n    // infinite recursive mock contents\n    const {\n        path,\n        kind,\n        modDays = modDaysIx++,\n        nchildren = 100,\n        ndirectories = 10,\n        randomize = false,\n    } = props;\n    const modified = new Date(modDays * 24 * 60 * 60 * 1000);\n    const writable = randomize && Random.bool();\n\n    if (kind === \"dir\") {\n        // is a dir\n        return {\n            kind,\n            path,\n            modified,\n            writable,\n            getChildren: async () => {\n                const pathstr = path.join(\"/\");\n\n                if (pathstr in _mockCache) {\n                    return _mockCache[pathstr];\n                }\n\n                const children = [];\n                const dirNames = randomize\n                    ? Random.shuffle(ALLIED_PHONETIC)\n                    : ALLIED_PHONETIC;\n\n                for (let i = 0; i < nchildren; i++) {\n                    children.push(\n                        mockContent({\n                            kind: i < ndirectories ? \"dir\" : \"text\",\n                            path: [\n                                ...path,\n                                i < ndirectories\n                                    ? `${dirNames[i]}`\n                                    : `file_${`${mockFileIx++}`.padStart(\n                                          7,\n                                          \"0\",\n                                      )}.txt`,\n                            ],\n                            nchildren,\n                            ndirectories,\n                            randomize,\n                        }),\n                    );\n                }\n\n                _mockCache[pathstr] = children;\n                return children;\n            },\n        };\n    } else {\n        // is a file\n        return {\n            kind,\n            path,\n            modified,\n            writable,\n        };\n    }\n}\n\nnamespace Random {\n    export function bool() {\n        return Math.random() < 0.5;\n    }\n\n    // randomize array in-place using Durstenfeld shuffle algorithm\n    // ref: https://stackoverflow.com/a/12646864\n    export function shuffle<T>(arr: T[], inPlace: boolean = false) {\n        arr = inPlace ? arr : [...arr];\n\n        for (let i = arr.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [arr[i], arr[j]] = [arr[j], arr[i]];\n        }\n\n        return arr;\n    }\n}\n\n/**\n * ref: https://en.wikipedia.org/wiki/Allied_military_phonetic_spelling_alphabets\n */\nconst ALLIED_PHONETIC = [\n    \"able\",\n    \"baker\",\n    \"charlie\",\n    \"dog\",\n    \"easy\",\n    \"fox\",\n    \"george\",\n    \"how\",\n    \"item\",\n    \"jig\",\n    \"king\",\n    \"love\",\n    \"mike\",\n    \"nan\",\n    \"oboe\",\n    \"peter\",\n    \"queen\",\n    \"roger\",\n    \"sugar\",\n    \"tare\",\n    \"uncle\",\n    \"victor\",\n    \"william\",\n    \"xray\",\n    \"yoke\",\n    \"zebra\",\n];\n","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nvar BehaviorSubject = (function (_super) {\n    __extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        !subscription.closed && subscriber.next(this._value);\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, _value = _a._value;\n        if (hasError) {\n            throw thrownError;\n        }\n        this._throwIfClosed();\n        return _value;\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, (this._value = value));\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\nimport { Content, DEFAULT_COL, IContentRow } from \"./content\";\nimport { Format } from \"./util\";\n\nconst SORT_ORDERS = [\"asc\", \"desc\", null] as const;\nexport type SortOrder = (typeof SORT_ORDERS)[number];\n\nconst DEFAULT_SORT_ORDER = SORT_ORDERS[0];\n\ninterface IFilterPattern<T extends IContentRow> {\n    col: keyof T;\n    pattern: string;\n}\n\nexport class FilterPatterns<T extends IContentRow> {\n    constructor(patterns?: IFilterPattern<T>[]) {\n        if (!patterns) {\n            return;\n        }\n\n        for (const fpat of patterns) {\n            this.set(fpat);\n        }\n    }\n\n    set(fpat: IFilterPattern<T>) {\n        const { col, pattern } = fpat;\n\n        if (!pattern) {\n            delete this._patterns[col];\n        } else {\n            this._patterns[col] = pattern;\n        }\n    }\n\n    get any(): boolean {\n        return !!Object.keys(this.patterns).length;\n    }\n\n    get patterns() {\n        return this._patterns;\n    }\n\n    protected _patterns = {} as { [k in keyof T]: string };\n}\n\ninterface ISortState<T extends IContentRow> {\n    col: keyof T;\n\n    order: SortOrder;\n}\n\ninterface ISortStateFull<T extends IContentRow> extends ISortState<T> {\n    sign: -1 | 1;\n\n    ix: number;\n}\n\nexport class SortStates<T extends IContentRow> {\n    readonly defaultColumn = DEFAULT_COL;\n\n    constructor(states?: ISortState<T>[]) {\n        states = states ?? [{ col: DEFAULT_COL, order: DEFAULT_SORT_ORDER }];\n\n        this.states = states.map((state, ix) => {\n            return {\n                ...state,\n                ix,\n                sign: state.order === \"desc\" ? -1 : 1,\n            };\n        });\n\n        this.byColumn = this.states.reduce((obj, state) => {\n            obj[state.col] = state;\n            return obj;\n        }, {} as any);\n    }\n\n    readonly byColumn: { [k in keyof T]: ISortStateFull<T> };\n    readonly states: ISortStateFull<T>[];\n}\n\nfunction contentsFiltererClosure<T extends IContentRow>(\n    filterPatterns: FilterPatterns<T>,\n    pathDepth: number = 0,\n) {\n    return function contentsFilterer(content: Content<T>): boolean {\n        for (const [key, pattern] of Object.entries(\n            filterPatterns.patterns,\n        ) as [keyof T, string][]) {\n            if (key === \"path\") {\n                // treat as path\n                return content\n                    .getPathAtDepth(pathDepth)\n                    .join(\"/\")\n                    .includes(pattern);\n            } else {\n                const val = content.row[key as keyof T];\n\n                if (typeof val === \"string\") {\n                    // treat as string\n                    return val.includes(pattern);\n                } else if (val instanceof Date) {\n                    // treat as date\n                    return Format.dateToStr(val, pattern);\n                } else if (typeof val === \"boolean\") {\n                    // treat as boolean\n                    const num = Number(pattern);\n                    return (\n                        (!Number.isNaN(num) && val === !!num) ||\n                        (val ? \"true\" : \"false\").includes(pattern)\n                    );\n                } else {\n                    // treat as number\n                    return (val as any) == Number(pattern);\n                }\n            }\n        }\n        return true;\n    };\n}\n\nfunction contentsSorterClosure<T extends IContentRow>(\n    sortStates: SortStates<T>,\n) {\n    return function contentsSorter(l: Content<T>, r: Content<T>): number {\n        for (const { col, sign } of sortStates.states) {\n            let cmp;\n            let lval = l.row[col];\n            let rval = r.row[col];\n\n            // the \"paths\" field will be an array of the parts of the path, just compare the last part\n            if (Array.isArray(lval)) {\n                lval = lval[lval.length - 1];\n                rval = (rval as any)[(rval as any).length - 1];\n            }\n\n            if (typeof lval === \"string\") {\n                cmp = lval.localeCompare(rval as any as string);\n            } else {\n                cmp = (lval as any as number) - (rval as any as number);\n            }\n\n            if (cmp) {\n                return sign * cmp;\n            }\n        }\n        return 0;\n    };\n}\n\nfunction updateSort<T extends IContentRow>(\n    sortStates: SortStates<T>,\n    col: keyof T,\n    multisort: boolean = false,\n): SortStates<T> {\n    let newStates: ISortState<T>[] = [...sortStates.states];\n\n    if (col in sortStates.byColumn) {\n        const { ix: currentIdx, order: oldOrder } = sortStates.byColumn[col];\n\n        const order =\n            SORT_ORDERS[\n                (SORT_ORDERS.indexOf(oldOrder) + 1) % SORT_ORDERS.length\n            ];\n        if (order) {\n            // update the sort_dir\n            newStates[currentIdx] = { col, order };\n        } else {\n            // remove this column from the sort\n            newStates.splice(currentIdx, 1);\n        }\n    } else {\n        const newState = { col, order: DEFAULT_SORT_ORDER };\n        if (multisort) {\n            newStates.push(newState);\n        } else {\n            newStates = [newState];\n        }\n    }\n\n    return new SortStates(newStates);\n}\n\nasync function flattenContents<T extends IContentRow>({\n    content,\n    contentsFlat = [],\n    filterer,\n    sorter,\n}: {\n    content: Content<T>;\n    contentsFlat?: Content<T>[];\n    filterer?: (c: Content<T>) => boolean;\n    sorter?: (l: Content<T>, r: Content<T>) => number;\n}) {\n    if (content.hasChildren) {\n        const cache = await content.getChildren();\n\n        if (cache) {\n            if (sorter) {\n                cache.sort(sorter);\n            }\n\n            for (const child of cache) {\n                contentsFlat.push(child);\n                if (child.isExpand) {\n                    await flattenContents({\n                        content: child,\n                        filterer,\n                        sorter,\n                        contentsFlat,\n                    });\n                }\n            }\n        }\n    }\n\n    if (filterer) {\n        return contentsFlat.filter(filterer);\n    } else {\n        return contentsFlat;\n    }\n}\n\nexport async function filterContentRoot<T extends IContentRow>({\n    root,\n    filterPatterns,\n    pathDepth,\n}: {\n    root: Content<T>;\n    filterPatterns: FilterPatterns<T>;\n    pathDepth?: number;\n}): Promise<Content<T>[]> {\n    root.filterer = contentsFiltererClosure(\n        filterPatterns,\n        pathDepth ?? root.row.path.length,\n    );\n\n    return root.flatten();\n}\n\nexport async function filterSortContentRoot<T extends IContentRow>({\n    root,\n    filterPatterns,\n    sortStates,\n    col,\n    multisort,\n    pathDepth,\n}: {\n    root: Content<T>;\n    filterPatterns: FilterPatterns<T>;\n    sortStates: SortStates<T>;\n    col?: keyof T;\n    multisort?: boolean;\n    pathDepth?: number;\n}): Promise<[Content<T>[], SortStates<T>]> {\n    // update sort orders, if requested\n    if (col) {\n        sortStates = updateSort(sortStates, col, multisort);\n\n        if (!sortStates.states.length) {\n            // if empty, use default sortStates\n            sortStates = new SortStates();\n        }\n    }\n\n    root.filterer = contentsFiltererClosure(\n        filterPatterns,\n        pathDepth ?? root.row.path.length,\n    );\n    root.sorter = contentsSorterClosure(sortStates);\n\n    return [await root.flatten(), sortStates];\n}\n\nexport async function sortContentRoot<T extends IContentRow>({\n    root,\n    sortStates,\n    col,\n    multisort,\n}: {\n    root: Content<T>;\n    sortStates: SortStates<T>;\n    col?: keyof T;\n    multisort?: boolean;\n}): Promise<[Content<T>[], SortStates<T>]> {\n    // update sort orders, if requested\n    if (col) {\n        sortStates = updateSort(sortStates, col, multisort);\n\n        if (!sortStates.states.length) {\n            // if empty, use default sortStates\n            sortStates = new SortStates();\n        }\n    }\n\n    root.sorter = contentsSorterClosure(sortStates);\n\n    return [await root.flatten(), sortStates];\n}\n","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\nimport { BehaviorSubject, Subject } from \"rxjs\";\n\nimport { Content, IContentRow } from \"../content\";\nimport {\n    filterContentRoot,\n    FilterPatterns,\n    filterSortContentRoot,\n    SortStates,\n} from \"../filtersort\";\nimport { Path } from \"../util\";\n\nclass CrumbModel<T extends IContentRow> {\n    constructor() {\n        this._crumbsRows = [];\n\n        this.crumbNamesSub = new BehaviorSubject([]);\n        this.revertedCrumbSub = new BehaviorSubject(undefined);\n    }\n\n    revert(crumbIx: number) {\n        this._crumbsRows = this._crumbsRows.slice(0, crumbIx + 1);\n        const last = this._crumbsRows.pop();\n\n        this.revertedCrumbSub.next(last);\n        return last;\n    }\n\n    extend(crumbs: T[]) {\n        this._crumbsRows = [...this._crumbsRows, ...crumbs];\n        this._onCrumbUpdate();\n\n        const last = this._crumbsRows[this._crumbsRows.length - 1];\n        return last;\n    }\n\n    protected async _onCrumbUpdate() {\n        this.crumbNamesSub.next(\n            this._crumbsRows.map((r) => r.path[r.path.length - 1]),\n        );\n    }\n\n    readonly crumbNamesSub: BehaviorSubject<string[]>;\n    readonly revertedCrumbSub: BehaviorSubject<T | undefined>;\n\n    protected _crumbsRows: T[] = [];\n}\n\nexport class ContentsModel<T extends IContentRow> {\n    constructor(root: T, options: ContentsModel.IOptions<T> = {}) {\n        this.crumbModel = new CrumbModel<T>();\n        this._filterPatterns = new FilterPatterns();\n        this._parentMap = new WeakMap();\n        this._sortStates = new SortStates();\n\n        this.options = options;\n\n        this.crumbModel.revertedCrumbSub.subscribe(async (x) => {\n            if (x) {\n                await this.open(x);\n                this.requestDraw({ autosize: true });\n            }\n        });\n\n        // infrastructural subscriptions\n        this.openSub.subscribe((rows) => rows.map((row) => this.openDir(row)));\n        this.refreshSub.subscribe((rows) => {\n            this._invalidate(rows);\n            this.flatten();\n        });\n        this.renamerSub.subscribe(() => (this._renamerPath = null));\n\n        this.open(root);\n    }\n\n    async open(...root: T[]): Promise<void> {\n        this.openSub.next(root);\n    }\n\n    async openDir(root: T) {\n        if (root.kind !== \"dir\") {\n            return;\n        }\n\n        this._contents = [];\n\n        const newCrumbs = [root];\n        while (this._parentMap.has(newCrumbs[0])) {\n            newCrumbs.unshift(this._parentMap.get(newCrumbs[0])!);\n        }\n        this.crumbModel.extend(newCrumbs);\n\n        this._parentMap = new WeakMap();\n        this._root = new Content({ row: root });\n\n        this.initColumns();\n\n        await this._root.getChildren();\n\n        // sort calls requestDraw\n        await this.sort({ autosize: true });\n    }\n\n    initColumns() {\n        const columns = (this.options.columnNames ??\n            Object.keys(this._root.row)) as (keyof T)[];\n        this._columns = columns.filter(\n            (x) => ![\"path\", \"getChildren\"].includes(x as string),\n        );\n\n        // build a columnName -> columnIx table; add 1 to account for leading \"path\" column\n        this._ixByColumn = Object.fromEntries(\n            this._columns.map((x, ix) => [x, ix + 1]),\n        ) as { [k in keyof T]: number };\n    }\n\n    // splice out the contents of the collapsed node and any expanded subnodes\n    async collapse(rix: number) {\n        const content = this._contents[rix];\n\n        let check_ix = rix + 1;\n        let npop = 0;\n\n        while (\n            this._contents[check_ix] &&\n            this._contents[check_ix].row.path.length > content.row.path.length\n        ) {\n            check_ix++;\n            npop++;\n        }\n\n        this._contents.splice(rix + 1, npop);\n        content.collapse();\n\n        this.requestDraw();\n    }\n\n    async expand(rix: number) {\n        const content = this._contents[rix];\n\n        await content.expand();\n        for (const child of (await content?.getChildren()) ?? []) {\n            this._parentMap.set(child.row, content.row);\n        }\n\n        let nodeContents;\n        [nodeContents, this._sortStates] = await filterSortContentRoot({\n            filterPatterns: this._filterPatterns,\n            pathDepth: this.pathDepth,\n            root: content,\n            sortStates: this._sortStates,\n        });\n        this._contents.splice(rix + 1, 0, ...nodeContents);\n\n        this.requestDraw();\n    }\n\n    async filter({ autosize = true }: { autosize?: boolean } = {}) {\n        await this._root.expand();\n\n        this._contents = await filterContentRoot({\n            filterPatterns: this._filterPatterns,\n            root: this._root,\n        });\n\n        this.requestDraw({ autosize });\n    }\n\n    async flatten({ autosize = true }: { autosize?: boolean } = {}) {\n        this._contents = await this._root.flatten();\n\n        this.requestDraw({ autosize });\n    }\n\n    onFilterInput(fpat: { col: keyof T; pattern: string }) {\n        this._filterPatterns.set(fpat);\n\n        this.filter();\n    }\n\n    renamerTest(x: Content<T>): boolean {\n        return this._renamerPath !== null\n            ? x.equalPath(this._renamerPath)\n            : false;\n    }\n\n    requestDraw(props: { autosize?: boolean; delay?: number } = {}) {\n        const { autosize = false } = props;\n        if (props.delay) {\n            // request draw in the future via a setTimeout\n            const { delay, ...propsWithoutDelay } = props;\n            setTimeout(() => this.requestDraw(propsWithoutDelay), delay);\n        }\n\n        this.drawSub.next(autosize);\n    }\n\n    async sort(\n        props: { autosize?: boolean; col?: keyof T; multisort?: boolean } = {},\n    ) {\n        const { autosize = false, col, multisort } = props;\n        await this._root.expand();\n\n        [this._contents, this._sortStates] = await filterSortContentRoot({\n            col,\n            filterPatterns: this._filterPatterns,\n            multisort,\n            root: this._root,\n            sortStates: this._sortStates,\n        });\n\n        this.requestDraw({ autosize });\n    }\n\n    protected _invalidate(rows?: T[]) {\n        if (!rows) {\n            this._root.invalidate(true);\n            // invalidate all visible dirs in contents\n        } else {\n            // invalidate parents of normal files\n            const invalidatedPathSet = new Set(\n                rows.map((r) =>\n                    r.getChildren\n                        ? r.path.join(\"/\")\n                        : r.path.slice(0, -1).join(\"/\"),\n                ),\n            );\n            this.contents\n                .filter((c) => invalidatedPathSet.has(c.pathstr))\n                .forEach((c) => c.invalidate());\n        }\n    }\n\n    get columns() {\n        return this._columns;\n    }\n\n    get contents() {\n        if (this.isBlank) {\n            // return a content with a blank row as a fallback\n            return [Content.blank([\"path\", ...this._columns])];\n        }\n\n        return this._contents;\n    }\n\n    get filterPatterns() {\n        return this._filterPatterns;\n    }\n\n    get isBlank() {\n        return !this._contents.length && this._columns.length;\n    }\n\n    get ixByColumn() {\n        return this._ixByColumn;\n    }\n\n    get options() {\n        return { ...this._options };\n    }\n\n    set options({\n        columnNames,\n        doRefetch = false,\n        needsWidths = false,\n    }: ContentsModel.IOptions<T>) {\n        this._options = {\n            columnNames,\n            doRefetch,\n            needsWidths,\n        };\n    }\n\n    get pathDepth() {\n        return this._root.row.path.length;\n    }\n\n    set renamerPath(path: Path.PathArray | null) {\n        this._renamerPath = path;\n    }\n\n    get root() {\n        return this._root;\n    }\n\n    get selection(): Content<T>[] {\n        return this.selectionModel.get(this._contents);\n    }\n\n    get selectedLast(): Content<T> | null {\n        return this.selectionModel.getLast(this._contents);\n    }\n\n    get sortStates() {\n        return this._sortStates;\n    }\n\n    // readonly colSizeObserver = new ResizeObserver(xs => {\n    //   for (let x of xs) {\n    //     for (const th of x.target.querySelectorAll(\"thead tr:last-child th\")) {\n    //       (th as HTMLElement).style.minWidth;\n    //     }\n    //   }\n    //   console.log('Size changed');\n    // });\n\n    filterCol?: keyof T;\n\n    readonly columnWidthsSub = new BehaviorSubject<string[]>([]);\n    readonly drawSub = new BehaviorSubject<boolean>(false);\n    readonly openSub = new Subject<T[]>();\n    readonly refreshSub = new Subject<T[]>();\n    readonly renamerSub = new Subject<ContentsModel.IRenamer<T>>();\n\n    readonly crumbModel: CrumbModel<T>;\n    readonly selectionModel = new SelectionModel<T>();\n\n    protected _columns: (keyof T)[];\n    protected _contents: Content<T>[];\n    protected _filterContents: Content<T>[];\n    protected _filterPatterns: FilterPatterns<T>;\n    protected _parentMap: ContentsModel.RefMap<T>;\n    protected _renamerPath: Path.PathArray | null = null;\n    protected _root: Content<T>;\n    protected _sortStates: SortStates<T>;\n\n    protected _options: ContentsModel.IOptions<T>;\n\n    private _ixByColumn: { [k in keyof T]: number };\n}\n\nexport namespace ContentsModel {\n    export interface IOptions<T extends IContentRow> {\n        /**\n         * optionally specify the visible columns, and the order they appear in\n         */\n        columnNames?: (keyof T)[];\n\n        /**\n         * if true, always (re)fetch children when opening a dir\n         */\n        doRefetch?: boolean;\n\n        /**\n         * if true, the columnWidthsSub will emit the auto column widths on each draw cycle\n         */\n        needsWidths?: boolean;\n    }\n\n    export interface IRenamer<T extends IContentRow> {\n        name: string;\n        target: Content<T>;\n    }\n\n    export type RefMap<T extends IContentRow> = WeakMap<T, T>;\n}\n\nexport class SelectionModel<T extends IContentRow> {\n    constructor() {\n        this.clear();\n    }\n\n    clear() {\n        this.pivot = null;\n        this.range = [];\n        this._lastPathstr = null;\n        this.selection = new Set<string>();\n    }\n\n    get(contents: Content<T>[]): Content<T>[] {\n        return contents.filter((c) => this.has(c));\n    }\n\n    getLast(contents: Content<T>[]): Content<T> | null {\n        if (!this._lastPathstr) {\n            return null;\n        }\n\n        for (let i = 0; i < contents.length; i++) {\n            if (contents[i].pathstr === this._lastPathstr) {\n                return contents[i];\n            }\n        }\n\n        return null;\n    }\n\n    has(content: Content<T>) {\n        return this.selection.has(content.pathstr);\n    }\n\n    select(lastContent: Content<T>, add: boolean = false) {\n        if (!add) {\n            this.clear();\n        } else {\n            this.range = [];\n        }\n\n        this._lastPathstr = lastContent.pathstr;\n\n        if (this.selection.has(this._lastPathstr)) {\n            this.selection.delete(this._lastPathstr);\n        } else {\n            this.selection.add(this._lastPathstr);\n        }\n\n        this.pivot = this.selection.size > 0 ? this._lastPathstr : null;\n    }\n\n    selectRange(lastContent: Content<T>, contents: Content<T>[]) {\n        for (const pathstr of this.range) {\n            // pivot around any existing range\n            this.selection.delete(pathstr);\n        }\n\n        this.range = SelectionModel.findRange(\n            this.pivot,\n            lastContent.pathstr,\n            contents.map((c) => c.pathstr),\n        );\n        for (const pathstr of this.range) {\n            this.selection.add(pathstr);\n        }\n    }\n\n    get lastPathstr(): string | null {\n        return this._lastPathstr;\n    }\n\n    protected _lastPathstr: string | null;\n    protected range: string[];\n    protected pivot: string | null;\n    protected selection: Set<string>;\n}\n\nexport namespace SelectionModel {\n    export function findRange(\n        start: string | null,\n        end: string,\n        vals: string[],\n    ) {\n        if (start === end) {\n            return [];\n        }\n\n        const pivotIx = start !== null ? vals.indexOf(start) : -1;\n        const endIx = vals.indexOf(end);\n\n        const range = [];\n        if (pivotIx > endIx) {\n            for (let i = endIx; i < pivotIx; i++) {\n                range.push(vals[i]);\n            }\n        } else {\n            for (let i = pivotIx + 1; i <= endIx; i++) {\n                range.push(vals[i]);\n            }\n        }\n\n        return range;\n    }\n}\n","/*\n * Copyright (c) 2020, Max Klein\n *\n * This file is part of the tree-finder library, distributed under the terms of\n * the BSD 3 Clause license. The full license can be found in the LICENSE file.\n */\nimport { IContentRow } from \"../content\";\nimport { ContentsModel } from \"../model\";\nimport { Tag } from \"../util\";\n\nimport { TreeFinderBreadcrumbsElement } from \"./breadcrumbs\";\nimport { TreeFinderFiltersElement } from \"./filters\";\nimport { TreeFinderGridElement } from \"./grid\";\n\nexport class TreeFinderPanelElement<T extends IContentRow> extends HTMLElement {\n    connectedCallback() {\n        if (!this._initialized) {\n            this.create_shadow_dom();\n            this._initialized = true;\n        }\n    }\n\n    clear() {\n        this.innerHTML = Tag.html`\n      <tree-finder-breadcrumbs class=\"tf-panel-breadcrumbs\" slot=\"breadcrumbs\"></tree-finder-breadcrumbs>\n      ${\n          this.options.showFilter\n              ? `<tree-finder-filters class=\"tf-panel-filters\" slot=\"filters\"></tree-finder-filters>`\n              : `<div slot=\"filters\"></div>`\n      }\n      <tree-finder-grid class=\"tf-panel-grid\" slot=\"grid\"></tree-finder-grid>\n    `;\n\n        [this.breadcrumbs, this.filters, this.grid] = this.children as any as [\n            TreeFinderBreadcrumbsElement<T>,\n            TreeFinderFiltersElement<T>,\n            TreeFinderGridElement<T>,\n        ];\n    }\n\n    init({\n        root,\n        options = {},\n        modelOptions = {},\n        gridOptions = {},\n    }: {\n        root: T;\n        options?: TreeFinderPanelElement.IOptions<T>;\n        modelOptions?: ContentsModel.IOptions<T>;\n        gridOptions?: TreeFinderGridElement.IOptions<T>;\n    }) {\n        this.options = options;\n\n        this.clear();\n\n        if (this._options.showFilter) {\n            modelOptions.needsWidths = true;\n        }\n        this._model = new ContentsModel(root, modelOptions);\n\n        this.breadcrumbs.init(this._model);\n        if (this.options.showFilter) {\n            this.filters.init(this._model);\n        }\n\n        this.grid.init(this._model, gridOptions);\n\n        this._model.columnWidthsSub.subscribe((widths) => {\n            if (!widths.length) {\n                return;\n            }\n\n            this.filters.getChild(0).style.marginLeft = \"12px\";\n            for (const [ix, width] of widths.entries()) {\n                const input = this.filters.getInput(ix);\n                if (input) {\n                    input.style.width = width;\n                }\n            }\n        });\n\n        this.draw();\n    }\n\n    async draw() {\n        await this.grid.draw();\n    }\n\n    create_shadow_dom() {\n        this.attachShadow({ mode: \"open\" });\n\n        const breadcrumbsSlot = `<slot name=\"breadcrumbs\"></slot>`;\n        const filterSlot = `<slot name=\"filters\"></slot>`;\n        const gridSlot = `<slot name=\"grid\"></slot>`;\n\n        this.shadowRoot!.innerHTML = Tag.html`\n      <style>\n        :host {\n          display: flex;\n          flex-flow: column;\n        }\n        :host > div {\n          position: relative;\n        }\n        :host > .tf-panel-filters-container {\n          display: inline-block;\n        }\n        :host > .tf-panel-grid-container {\n          flex: 1;\n        }\n      </style>\n      <div class=\"tf-panel-breadcrumbs-container\">\n        ${breadcrumbsSlot}\n      </div>\n      <div class=\"tf-panel-filters-container\">\n        ${filterSlot}\n      </div>\n      <div class=\"tf-panel-grid-container\">\n        ${gridSlot}\n      </div>\n    `;\n\n        [\n            this.shadowSheet,\n            this.breadcrumbsContainer,\n            this.filterContainer,\n            this.gridContainer,\n        ] = this.shadowRoot!.children as any as [\n            StyleSheet,\n            HTMLElement,\n            HTMLElement,\n            HTMLElement,\n        ];\n    }\n\n    get model() {\n        return this._model;\n    }\n\n    get options() {\n        return { ...this._options };\n    }\n\n    set options({ showFilter = false }: TreeFinderPanelElement.IOptions<T>) {\n        this._options = {\n            showFilter,\n        };\n    }\n\n    protected shadowSheet: StyleSheet;\n    protected breadcrumbsContainer: HTMLElement;\n    protected filterContainer: HTMLElement;\n    protected gridContainer: HTMLElement;\n\n    protected breadcrumbs: TreeFinderBreadcrumbsElement<T>;\n    protected filters: TreeFinderFiltersElement<T>;\n    protected grid: TreeFinderGridElement<T>;\n\n    protected _options: TreeFinderPanelElement.IOptions<T>;\n    protected _model: ContentsModel<T>;\n\n    private _initialized: boolean = false;\n}\n\nexport namespace TreeFinderPanelElement {\n    export interface IOptions<T extends IContentRow> {\n        /**\n         * if true, add filter inputs in a separate widget above the tree-finder-grid\n         */\n        showFilter?: boolean;\n    }\n}\n\nif (document.createElement(\"tree-finder-panel\").constructor === HTMLElement) {\n    Promise.all([\n        customElements.whenDefined(\"tree-finder-breadcrumbs\"),\n        customElements.whenDefined(\"tree-finder-filters\"),\n        customElements.whenDefined(\"tree-finder-grid\"),\n    ]).then(() => {\n        customElements.define(\"tree-finder-panel\", TreeFinderPanelElement);\n    });\n}\n"],"names":["root","factory","exports","module","define","amd","a","i","self","T","WeakMap","_t","navigator","userAgent","toLowerCase","indexOf","j","O","nt","performance","now","q","u","t","map","e","flat","filter","join","C","Map","async","U","has","get","set","Promise","resolve","wt","delete","K","HTMLElement","create_shadow_dom","this","attachShadow","mode","shadowRoot","innerHTML","s","children","_sub_cell_style","_table_clip","_virtual_panel","_setup_virtual_scroll","_virtual_mode","style","top","removeProperty","left","contain","_calculate_viewport","start_row","end_row","_calculate_row_range","start_col","o","end_col","l","_calculate_column_range","_nrows","height","_container_size","_column_sizes","row_height","_view_cache","config","column_pivots","length","Math","max","offsetHeight","ceil","scrollTop","_","m","min","_calc_start_column","row_pivots","scrollLeft","indices","table_model","num_columns","width","_max_scroll_column","slice","_validate_viewport","floor","_start_col","_start_row","_end_row","_end_col","invalid_column","invalid_row","_calc_scrollable_column_width","reduce","_update_virtual_panel_width","_update_virtual_panel_height","draw","throttle","ft","call","_draw_flush","requestAnimationFrame","ct","update_sub_cell_offset","_row_headers_length","sheet","cssRules","setProperty","invalid_viewport","preserve_width","num_rows","num_row_headers","num_column_headers","view","Array","fill","clientWidth","clientHeight","c","h","_invalid_schema","r","w","y","_selected_id","concat","_is_styling","d","_style_callbacks","k","detail","_invalidated","autosize_cells","header","reset_header_cache","ht","J","register_listeners","addEventListener","_on_click_or_dblclick","bind","_on_scroll","passive","_register_glitch_scroll_listeners","stopPropagation","dispatchEvent","CustomEvent","_on_mousewheel","window","safari","preventDefault","returnValue","offsetWidth","deltaY","deltaX","_on_touchmove","_memo_scroll_top","_memo_touch_startY","touches","pageY","_memo_scroll_left","_memo_touch_startX","pageX","_on_touchstart","_on_dblclick","target","tagName","parentElement","contains","classList","stopImmediatePropagation","minWidth","maxWidth","shiftKey","override","auto","size_key","cells","body","_virtual_x","remove","_on_click","button","_on_resize_column","_last_clicked_time","colSpan","get_column_header","_on_resize_column_move","document","removeEventListener","toggle","ot","constructor","_name","_elements","_index","reset","createElement","$","_container","_span_factory","table","rows","_get_row","row_container","_set_metadata","_get_or_create_metadata","_replace_cell","tr","removeChild","splice","_fetch_cell","appendChild","_get_cell","insertBefore","find","replaceChild","_clean_columns","_clean_rows","Q","super","_group_header_cache","_offset_cache","_draw_group_th","removeAttribute","textContent","className","_draw_group","column_header","value","_draw_th","row_header_x","setAttribute","th","metadata","x","column_header_y","x0","clean","Z","_draw_td","column_name","ridx_offset","td","cidx","column_data","row_headers","column_data_listener_metadata","f","g","row_headers_length","P","n","tt","D","S","et","p","z","hasAttribute","display","row_header","y0","y1","user","x1","dx","dy","tds","ridx","V","clear","fragment","createDocumentFragment","pop","getBoundingClientRect","data","column_headers","column_header_merge_depth","merge_headers","v","X","viewport_width","selected_id","sub_cell_offset","M","R","F","first_col","Y","B","b","E","push","I","G","N","W","H","it","L","mt","A","at","bt","customElements","_initialized","connectedCallback","_reset_viewport","_reset_scroll","_resetAutoSize","addStyleListener","removeStyleListener","console","assert","invalidate","Error","getMeta","getDrawFPS","avg","real_fps","virtual_fps","num_frames","elapsed","rt","scrollToCell","warn","setDataListener","virtual_mode","preserve_state","__noop_jsdoc_hints","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","definition","key","Object","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","Format","RegularTable","Path","Tag","Tree","DATE_FORMATTER","Intl","DateTimeFormat","bytesToHumanReadable","bytes","si","dp","thresh","abs","units","round","toFixed","dateToStr","date","str","format","includes","timeSince","Date","seconds","valueOf","interval","cellClicked","columnHeaderClicked","rowClicked","rowHeaderClicked","metadataFromElement","recursive","clickLoggingListener","event","log","colNameFromMeta","meta","equal","every","lvalue","fromarray","first","rest","toarray","splits","split","drive","local","normSlash","trailing","trimSlash","replace","html","strings","args","attrs","specs","values","treeTemplate","inputSpanTemplate","nameSpanTemplate","breadcrumbsSpans","path","colHeaderSpans","name","content","firstChild","rowHeaderSpan","hasChildren","isExpand","editable","pathRender","ix","header_attrs","header_text","tree_levels","tree_button","rowHeaderLevelsHtml","DEFAULT_COL","Content","row","filterer","sorter","_hasChildren","_isExpand","_dirtyChildren","_dirtySort","init","collapse","equalPath","otherPath","expand","getChildren","_row","_cacheMap","_cache","_sorter","pathstr","sort","getPathAtDepth","depth","pth","_flatten","_flat","child","flatten","_filterer","_recursive","nchildren","_pathstr","_dirty","blank","cols","col","TreeFinderBreadcrumbsElement","_initializedListeners","onClick","model","crumbModel","crumbNamesSub","subscribe","next","_onCrumbUpdate","shadowSheet","dataset","crumbix","revert","parseInt","TreeFinderFilterElement","_input","onInput","_col","columns","fpat","pattern","filterCol","onFilterInput","input","TreeFinderFiltersElement","repeat","filters","from","index","element","entries","getChild","getInput","whenDefined","then","RegularTableElement","TreeFinderGridElement","options","dataListener","_options","thead","tbody","columnHeaderStyleListener","rowStyleListener","onMouseover","onSortClick","onRowClick","onRowDoubleClick","onTreeClick","doWindowResize","drawSub","needsWidths","requestDraw","contents","showFilter","_getRowHeader","isBlank","_getData","cornerHeaderStyleListener","querySelectorAll","querySelector","focus","sortOrder","sortStates","byColumn","order","columnWidthStyleListener","pxs","_pathRender","columnWidthsSub","px","initSpans","newSpans","replaceWith","spans","span","add","kind","_renamerStyleListener","_selectedStyleListener","rowHeader","childElementCount","selectionModel","selectRange","select","ctrlKey","metaKey","multisort","newRootContent","open","columnFormatters","pathRenderOnFilter","flag","column","formatter","val","pathDepth","renamerTest","getAttribute","blur","renamerSub","renamerPath","colCount","filterPatterns","any","all","extendStatics","setPrototypeOf","__proto__","__extends","TypeError","String","__","create","__values","iterator","done","__read","ar","error","__spreadArray","to","pack","arguments","SuppressedError","isFunction","createErrorClass","createImpl","ctorFunc","instance","stack","UnsubscriptionError","_super","errors","message","err","toString","arrRemove","arr","item","Subscription","initialTeardown","closed","_parentage","_finalizers","empty","unsubscribe","e_1","_a","e_2","_b","isArray","_parentage_1","_parentage_1_1","e_1_1","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","_hasParent","_addParent","parent","_removeParent","EMPTY","EMPTY_SUBSCRIPTION","isSubscription","onUnhandledError","onStoppedNotification","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","timeoutProvider","setTimeout","handler","timeout","_i","delegate","apply","clearTimeout","handle","noop","COMPLETE_NOTIFICATION","createNotification","context","errorContext","cb","isRoot","errorThrown","Subscriber","destination","_this","isStopped","EMPTY_OBSERVER","complete","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_error","_complete","_bind","Function","fn","thisArg","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","reportUnhandledError","notification","subscriber","observable","identity","pipeFromArray","fns","prev","Observable","_subscribe","lift","operator","source","isObserver","_trySubscribe","sink","forEach","promiseCtor","getPromiseCtor","reject","pipe","operations","toPromise","ObjectUnsubscribedError","Subject","currentObservers","observers","hasError","thrownError","subject","AnonymousSubject","_throwIfClosed","_c","shift","configurable","_checkFinalizedStatuses","_innerSubscribe","asObservable","ClipboardModel","copySub","cutSub","deleteSub","pasteSub","doCut","memo","copy","cut","paste","copySelection","contentsModel","selection","cutSelection","deleteSelection","pasteSelection","selectedLast","openSub","refresh","refreshSub","_mockCache","mockFileIx","modDaysIx","mockContent","props","modDays","ndirectories","randomize","modified","writable","Random","bool","dirNames","shuffle","ALLIED_PHONETIC","padStart","random","inPlace","BehaviorSubject","_value","getValue","subscription","SORT_ORDERS","DEFAULT_SORT_ORDER","FilterPatterns","patterns","_patterns","keys","SortStates","states","defaultColumn","state","sign","contentsFiltererClosure","num","Number","isNaN","contentsSorterClosure","cmp","lval","rval","localeCompare","updateSort","newStates","currentIdx","oldOrder","newState","filterContentRoot","filterSortContentRoot","sortContentRoot","CrumbModel","_crumbsRows","revertedCrumbSub","crumbIx","last","extend","crumbs","ContentsModel","SelectionModel","_renamerPath","_filterPatterns","_parentMap","_sortStates","autosize","openDir","_invalidate","_contents","newCrumbs","unshift","_root","initColumns","columnNames","_columns","_ixByColumn","fromEntries","rix","check_ix","npop","nodeContents","delay","propsWithoutDelay","invalidatedPathSet","Set","ixByColumn","doRefetch","getLast","pivot","range","_lastPathstr","lastContent","size","findRange","lastPathstr","start","end","vals","pivotIx","endIx","TreeFinderPanelElement","breadcrumbs","grid","modelOptions","gridOptions","_model","widths","marginLeft","breadcrumbsContainer","filterContainer","gridContainer"],"sourceRoot":""}