(self["webpackChunkjupyter_fs"] = self["webpackChunkjupyter_fs"] || []).push([["vendors-node_modules_pnpm_tree-finder_base_1_0_3_node_modules_tree-finder_base_dist_tree-finder_js"],{

/***/ "./node_modules/.pnpm/@tree-finder+base@1.0.3/node_modules/@tree-finder/base/dist/tree-finder.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@tree-finder+base@1.0.3/node_modules/@tree-finder/base/dist/tree-finder.js ***!
  \*******************************************************************************************************/
/***/ ((module) => {

!function(t,e){if(true)module.exports=e();else // removed by dead control flow
{ var r, i; }}(self,()=>(()=>{var t={175:()=>{var t=new WeakMap,e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?5e6:1e7,i=0,r=0,s=performance.now();var o=(t,...e)=>t.map((t,i)=>[t,e[i]]).flat().filter(t=>!!t).join(""),n=new Map;async function l(t,e){if(n.has(t)&&(await n.get(t),n.has(t)))await n.get(t);else{n.set(t,(()=>{let t,e=new Promise(e=>{t=e});return e.resolve=t,e})());try{return await e()}finally{let e=n.get(t);n.delete(t),e.resolve()}}}var a=class extends HTMLElement{create_shadow_dom(){this.attachShadow({mode:"open"});this.shadowRoot.innerHTML=o`
            <style>
                ${":host{position:absolute;top:0px;left:0px;right:0px;bottom:0px;overflow:scroll;overflow-anchor:none;overscroll-behavior:none;-webkit-overflow-scrolling:touch;}div.rt-virtual-panel{position:absolute;top:0;left:0;right:0;pointer-events:none;}div.rt-scroll-table-clip{position:sticky;contain:strict;overflow-anchor:none;width:100%;height:100%;}div.rt-tree-container{display:flex;align-items:center;height:100%;}slot{position:absolute;overflow:hidden;overflow-anchor:none;}"}
            </style>
            <style>
                ${":host ::slotted(table){--regular-table--transform-x:0px;--regular-table--transform-y:0px;--regular-table--clip-x:0px;--regular-table--clip-y:0px;}"}
            </style>
            <div class="rt-virtual-panel"></div>
            <div class="rt-scroll-table-clip">${"<slot></slot>"}</div>
        `;let[,t,e,i]=this.shadowRoot.children;this._sub_cell_style=t,this._table_clip=i,this._virtual_panel=e,this._setup_virtual_scroll()}_setup_virtual_scroll(){this._table_clip&&("both"===this._virtual_mode||"vertical"===this._virtual_mode?this._table_clip.style.top="0px":this._table_clip.style.removeProperty("top"),"both"===this._virtual_mode||"horizontal"===this._virtual_mode?this._table_clip.style.left="0px":this._table_clip.style.removeProperty("left"),"both"!==this._virtual_mode?this._table_clip.style.contain="none":this._table_clip.style.removeProperty("contain"))}_calculate_viewport(t,e){let{start_row:i,end_row:r}=this._calculate_row_range(t),{start_col:s,end_col:o}=this._calculate_column_range(e);return this._nrows=t,{start_col:s,end_col:o,start_row:i,end_row:r}}_calculate_row_range(t){let{height:e}=this._container_size,i=this._column_sizes.row_height||19,r=this._view_cache.config.column_pivots.length,s=Math.max(1,this._virtual_panel.offsetHeight-e),o=Math.max(Math.ceil(this.scrollTop),0)/s,n=e/i-r,l=Math.max(0,(t||0)-n)*o;return{start_row:l,end_row:Math.max(0,Math.min(l+n,t))}}_calc_start_column(){let t=this._view_cache.config.row_pivots.length,e=0,i=0,r=0;for(;i<this.scrollLeft;){let s=this._column_sizes.indices[e+t];r=this.scrollLeft-i,e+=1,i+=void 0!==s?s:60}return e+=r/(this._column_sizes.indices[e+t-1]||60),Math.max(0,e-1)}_calculate_column_range(t){if("none"===this._virtual_mode||"vertical"===this._virtual_mode)return{start_col:0,end_col:1/0};{let e=this._calc_start_column();return{start_col:e,end_col:e+(this.table_model.num_columns()||Math.min(t,Math.ceil(this._container_size.width/60)))+1}}}_max_scroll_column(t){let e=0;if(this._view_cache.config.row_pivots.length>0)for(let t of this._column_sizes.indices.slice(0,this._view_cache.config.row_pivots.length))e+=t;let i=this._view_cache.config.row_pivots.length,r=t;for(;e<this._container_size.width&&r>=0;)r--,e+=this._column_sizes.indices[r+i]||60;return Math.min(t-1,r+1)}_validate_viewport({start_col:t,end_col:e,start_row:i,end_row:r}){i=Math.floor(i),r=Math.ceil(r),t=Math.floor(t),e=Math.ceil(e);let s=this._start_col!==t,o=this._start_row!==i||this._end_row!==r||this._end_col!==e;return this._start_col=t,this._end_col=e,this._start_row=i,this._end_row=r,{invalid_column:s,invalid_row:o}}_calc_scrollable_column_width(t){let e=this._view_cache.config.row_pivots.length,i=this._max_scroll_column(t),r=e,s=0;for(;r<i+e;)s+=this._column_sizes.indices[r]||60,r++;if(r<this._column_sizes.indices.length){let t=this._column_sizes.indices.slice(0,this._view_cache.config.row_pivots.length).reduce((t,e)=>t+e,0);s+=Math.max(0,this._column_sizes.indices[r]-(this._container_size.width-t)||0)}return s}_update_virtual_panel_width(t,e){if(t)if("vertical"===this._virtual_mode||"none"===this._virtual_mode)this._virtual_panel.style.width=this._column_sizes.indices.reduce((t,e)=>t+e,0)+"px";else{let t=this._calc_scrollable_column_width(e);if(0!==t){let e=this._container_size.width+t+2;this._virtual_panel.style.width=e+"px"}else this._virtual_panel.style.width="1px"}}_update_virtual_panel_height(t){let i,{row_height:r=19}=this._column_sizes,s=this._view_cache.config.column_pivots.length*r;i=Math.min(e,t*r+s),this._virtual_panel.style.height=`${i}px`}async draw(t={}){return typeof t.throttle<"u"&&!t.throttle?await h.call(this,t):await l(this,()=>h.call(this,t))}async _draw_flush(){await async function(t){return await new Promise(requestAnimationFrame),await n.get(t)}(this)}update_sub_cell_offset(t){let e=this._column_sizes.row_height*(t.start_row%1)||0,i=this._column_sizes.indices[(this.table_model._row_headers_length||0)+Math.floor(t.start_col)]*(t.start_col%1)||0,r=this._sub_cell_style.sheet?.cssRules[0].style;r&&(r.setProperty("--regular-table--clip-x",`${i}px`),r.setProperty("--regular-table--clip-y",`${e}px`),r.setProperty("--regular-table--transform-x",`-${i}px`),r.setProperty("--regular-table--transform-y",`-${e}px`))}};async function h(t){let e=performance.now(),{invalid_viewport:s=!0,preserve_width:o=!1}=t,{num_columns:n,num_rows:l,num_row_headers:a,num_column_headers:h,row_height:c}=await this._view_cache.view(0,0,0,0);void 0!==a&&(this._view_cache.row_pivots=Array(a).fill(0)),void 0!==h&&(this._view_cache.column_pivots=Array(h).fill(0)),this._container_size={width:"none"===this._virtual_mode||"vertical"===this._virtual_mode?1/0:this._table_clip.clientWidth,height:"none"===this._virtual_mode||"horizontal"===this._virtual_mode?1/0:this._table_clip.clientHeight},this._update_virtual_panel_height(l),o||this._update_virtual_panel_width(s,n);let d=this._calculate_viewport(l,n),{invalid_row:u,invalid_column:_}=this._validate_viewport(d);if(this._invalid_schema||u||_||s){let t=[],e=!0;for await(let i of this.table_model.draw(this._container_size,this._view_cache,this._selected_id,o,d,n)){void 0!==i&&(t=t.concat(i)),e&&(this.update_sub_cell_offset(d),e=!1),this._is_styling=!0;let r=this._style_callbacks;for(let t of r)await t({detail:this});if(this._is_styling=!1,!this._invalidated&&void 0!==i)break;this._invalidated=!1}this.table_model.autosize_cells(t,c),this.table_model.header.reset_header_cache(),o||this._update_virtual_panel_width(this._invalid_schema||_,n),this._invalid_schema=!1}else this.update_sub_cell_offset(d);!function(t){i=(i*r+t)/(r+1),r+=1}(performance.now()-e)}var c=class extends a{register_listeners(){this.addEventListener("mousedown",this._on_click_or_dblclick.bind(this)),this.addEventListener("scroll",this._on_scroll.bind(this),{passive:!0}),this._register_glitch_scroll_listeners()}async _on_scroll(t){t.stopPropagation(),await this.draw({invalid_viewport:!1}),this.dispatchEvent(new CustomEvent("regular-table-scroll"))}_register_glitch_scroll_listeners(){this.addEventListener("mousewheel",this._on_mousewheel.bind(this),{passive:!0})}_on_mousewheel(t){if(!window.safari)return;let{clientWidth:e,clientHeight:i,scrollTop:r,scrollLeft:s}=this;t.preventDefault(),t.returnValue=!1;let o=Math.max(1,this._virtual_panel.offsetHeight-i),n=Math.max(1,this._virtual_panel.offsetWidth-e);this.scrollTop=Math.max(0,Math.min(o,r+t.deltaY)),this.scrollLeft=Math.max(0,Math.min(n,s+t.deltaX)),this._on_scroll(t)}_on_touchmove(t){t.stopPropagation(),t.preventDefault(),t.returnValue=!1;let{clientWidth:e,clientHeight:i}=this,r=Math.max(1,this._virtual_panel.offsetHeight-i),s=Math.max(1,this._virtual_panel.offsetWidth-e);this.scrollTop=Math.min(r,this._memo_scroll_top+(this._memo_touch_startY-t.touches[0].pageY)),this.scrollLeft=Math.min(s,this._memo_scroll_left+(this._memo_touch_startX-t.touches[0].pageX)),this._on_scroll(t)}_on_touchstart(t){this._memo_touch_startY=t.touches[0].pageY,this._memo_touch_startX=t.touches[0].pageX,this._memo_scroll_top=this.scrollTop,this._memo_scroll_left=this.scrollLeft}async _on_dblclick(e){let i=e.target;for(;"TD"!==i.tagName&&"TH"!==i.tagName;)if(i=i.parentElement,!this.contains(i))return;let r=e.target.classList.contains("rt-column-resize"),s=t.get(i);if(r){e.stopImmediatePropagation(),i.style.minWidth="",i.style.maxWidth="",e.shiftKey?(this._column_sizes.override=[],this._column_sizes.auto=[],this._column_sizes.indices=[]):(this._column_sizes.override[s.size_key]=void 0,this._column_sizes.auto[s.size_key]=void 0,this._column_sizes.indices[s.size_key]=void 0);for(let t of e.shiftKey?[this.table_model.header.cells[this.table_model.header.cells.length-1],...this.table_model.body.cells]:this.table_model.body.cells)for(let i of e.shiftKey?t:[t[s._virtual_x]])i&&(i.style.minWidth="",i.style.maxWidth="",i.classList.remove("rt-cell-clip"));await this.draw()}}async _on_click(e){if(0!==e.button)return;let i=e.target;for(;"TD"!==i.tagName&&"TH"!==i.tagName;)if(i=i.parentElement,!this.contains(i))return;let r=e.target.classList.contains("rt-column-resize"),s=t.get(i);r&&(this._on_resize_column(e,i,s),e.stopImmediatePropagation())}async _on_click_or_dblclick(t){let e=performance.now();this._last_clicked_time&&e-this._last_clicked_time<500?(this._last_clicked_time=e,await this._on_dblclick(t)):(this._last_clicked_time=e,await this._on_click(t))}_on_resize_column(t,e,i){let{_virtual_x:r,size_key:s}=i,o=t.pageX,n=r+e.colSpan-1,a=this.table_model.header.get_column_header(n),h=this._column_sizes.indices[s],c=t=>l(this,async()=>await this._on_resize_column_move(t,a,o,h,s,n)),d=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d);let t=this._column_sizes.override[s],e=this._column_sizes.indices[s]!==t;this._column_sizes.indices[s]=t,e&&this.draw()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)}async _on_resize_column_move(t,e,i,r,s,o){await new Promise(requestAnimationFrame);let n=t.pageX-i,l=Math.max(1,r+n);if(this._column_sizes.override[s]=l,n<0)await this.draw({preserve_width:!0,throttle:!1});else{e.style.minWidth=l+"px",e.style.maxWidth=l+"px";let t=this._column_sizes.auto[s];for(let e of this.table_model.body.cells){let i=e[o];i&&(i.style.maxWidth=i.style.minWidth=l+"px",i.classList.toggle("rt-cell-clip",t>l))}}}},d=class{constructor(t){this._name=t,this._elements=[],this._index=0}reset(){this._index=0}get(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));let t=this._elements[this._index];return this._index+=1,t}},u=class{constructor(t,e,i){this._column_sizes=t,this._container=e,this._span_factory=new d("span"),this.table=i,this.cells=[],this.rows=[]}num_columns(){return this._get_row(Math.max(0,this.rows.length-1)).row_container.length}num_rows(){return this.cells.length}_set_metadata(e,i){t.set(e,i)}_get_or_create_metadata(e){if(void 0===e)return{};if(t.has(e))return t.get(e);{let i={};return t.set(e,i),i}}_replace_cell(t,e){let{tr:i,row_container:r}=this._get_row(t),s=r[e];return s&&(i.removeChild(s),r.splice(e,1,void 0)),s}_fetch_cell(t,e){if(!(t<0||e<0))return this.cells[t]?.[e]}_get_row(t){let e=this.rows[t];e||(e=this.rows[t]=document.createElement("tr"),this.table.appendChild(e));let i=this.cells[t];return i||(i=this.cells[t]=[]),{tr:e,row_container:i}}_get_cell(t="TD",e,i){let{tr:r,row_container:s}=this._get_row(e),o=s[i];if(o||(i<s.length?(o=s[i]=document.createElement(t),r.insertBefore(o,s.slice(i+1).find(t=>t))):(o=s[i]=document.createElement(t),r.appendChild(o))),o.tagName!==t){let s=document.createElement(t);r.replaceChild(s,o),this.cells[e].splice(i,1,s),o=s}return o}_clean_columns(t){for(let e=0;e<this.rows.length;e++){let i=this.rows[e],r=this.cells[e];this.cells[e]=r.slice(0,t[e]||t);let s=this.cells[e].filter(t=>void 0!==t).length;for(;i.children[s];)i.removeChild(i.children[s])}}_clean_rows(t){for(;this.table.children[t];)this.table.removeChild(this.table.children[t]);this.rows=this.rows.slice(0,t),this.cells=this.cells.slice(0,t)}},_=class extends u{constructor(...t){super(...t),this._group_header_cache=[],this._offset_cache=[]}_draw_group_th(t,e,i){let r=this._get_cell("TH",e,t[e]||0);if(t[e]+=1,r.removeAttribute("colspan"),r.style.minWidth="0",r.textContent="",i instanceof HTMLElement)r.appendChild(i);else{let t=this._span_factory.get("span");t.textContent=i,r.appendChild(t)}let s=this._span_factory.get("span");return s.className="rt-column-resize",r.appendChild(s),r}_draw_group(t,e,i){let r=this._get_or_create_metadata(i);return r.column_header=t,r.value=e,r.value=e,r}_draw_th(t,e,i,r,s){let o=this._get_or_create_metadata(i);if(o.column_header=t,o.value=e,o.size_key=s.length?s[0]:s,!(s.length>1)){let t=this._column_sizes.override[o.size_key],e=this._column_sizes.auto[o.size_key];t?(i.classList.toggle("rt-cell-clip",e>t),i.style.minWidth=t+"px",i.style.maxWidth=t+"px"):e?(i.classList.remove("rt-cell-clip"),i.style.maxWidth="",i.style.minWidth=e+"px"):(i.style.maxWidth="",i.style.maxWidth="")}return o}get_column_header(t){return this._get_cell("TH",this.num_rows()-1,t)}draw(t,e,i,r,s,o,n,l,a){let h,c,d,u,_=e?.length;if(0!==_){l=typeof l>"u"?_-1:l;for(let f=0;f<_;f++){if(d=e[f]?e[f]:"",this._offset_cache[f]=this._offset_cache[f]||0,f<l)a&&this._group_header_cache?.[f]?.[0]?.value===d?(h=this._group_header_cache[f][1],this._group_header_cache[f][2]+=1,1===i&&(this._group_header_cache[f][0].row_header_x=s),h.setAttribute("colspan",this._group_header_cache[f][2])):(h=this._draw_group_th(this._offset_cache,f,d),c=this._draw_group(e,d,h),this._group_header_cache[f]=[c,h,1]);else{h=this._draw_group_th(this._offset_cache,f,d),c=this._draw_th(t||e,d,h,r,s),typeof u>"u"&&(u={th:h,metadata:c});for(let[t]of this._group_header_cache)t.size_key=c.size_key;h.removeAttribute("colspan")}this._get_row(f).tr.classList.toggle("rt-autosize",f===l),h.classList.toggle("rt-group-corner",void 0===r),c&&(c.x=typeof r>"u"?r:Math.floor(r),c.column_header_y=f,c.x0=Math.floor(o),c._virtual_x=n,1===i&&(c.row_header_x=s))}return this._clean_rows(this._offset_cache.length),u=u||{th:h,metadata:c},u}}clean(){this._clean_columns(this._offset_cache)}reset_header_cache(){this._offset_cache=[],this._group_header_cache=[]}},f=class extends u{_draw_td(t,e,i,r,{column_name:s},{ridx_offset:o},n){let l=this._get_cell(t,e,r),a=this._get_or_create_metadata(l);a.y=e+Math.floor(o),a.size_key=n,"TD"===t&&(a.column_header=s);let h=this._column_sizes.override[a.size_key];if(h){let t=this._column_sizes.auto[a.size_key];l.classList.toggle("rt-cell-clip",t>h),l.style.minWidth=h+"px",l.style.maxWidth=h+"px"}else l.classList.remove("rt-cell-clip"),l.style.minWidth="",l.style.maxWidth="";return a.value!==i&&(i instanceof HTMLElement?(l.textContent="",l.appendChild(i)):l.textContent=i),a.value=i,{td:l,metadata:a}}draw(t,e,i,r=!1,s,o,n,l){let a,{cidx:h,column_data:c,row_headers:d,column_data_listener_metadata:u}=e,{row_height:_}=i,f=[],m=[],p=0,w=[];for(let v=0;v<(r?i.row_headers_length:1);v++){p=0;for(let g of c){let c,b=d?.[p];if(r){let t=g[v],r=this._fetch_cell(p-(f[v]||1),h+v),s=this._get_or_create_metadata(r),n=this._fetch_cell(p,h+v-(w[p]||1)),a=this._get_or_create_metadata(n);!l||!n||a.value!==t&&void 0!==t||n.hasAttribute("rowspan")?l&&r&&s.value===t&&!r.hasAttribute("colspan")?(f[v]=f[v]?f[v]+1:2,r.setAttribute("rowspan",f[v]),this._replace_cell(p,h+v)):(c=this._draw_td("TH",p,t,h+v,e,i,v),c.td.style.display="",c.td.removeAttribute("rowspan"),c.td.removeAttribute("colspan"),c.metadata.row_header=g,c.metadata.row_header_x=v,c.metadata.y0=Math.floor(i.ridx_offset),c.metadata.y1=Math.ceil(i.y1),c.metadata._virtual_x=v,typeof o<"u"&&(c.metadata.x0=Math.floor(o)),f[v]=1,w[p]=1,m[v]=c):(w[p]=w[p]?w[p]+1:2,n.setAttribute("colspan",w[p]),this._replace_cell(p,h+v))}else c=this._draw_td("TD",p,g,h,e,i,n),u&&(c.metadata.user=u[p]),c.metadata.x=typeof s>"u"?s:Math.floor(s),c.metadata.x1=Math.ceil(i.x1),c.metadata.row_header=b||[],c.metadata.y0=Math.floor(i.ridx_offset),c.metadata.y1=Math.ceil(i.y1),c.metadata.dx=Math.floor(s-o),c.metadata.dy=c.metadata.y-Math.floor(c.metadata.y0),c.metadata._virtual_x=h,typeof o<"u"&&(c.metadata.x0=Math.floor(o)),m[0]=c;if(p++,a=c?c.metadata:a,_=_||c?.td.offsetHeight,p*_>t)break}}return this._clean_rows(p),{tds:m,ridx:p,metadata:a,row_height:_}}clean({ridx:t,cidx:e}){this._clean_rows(t),this._clean_columns(e)}},m=class{constructor(t,e,i){this.clear(i);let[r]=i.children,[s,o]=r.children;this.table=r,this._column_sizes=e,this.header=new _(e,t,s),this.body=new f(e,t,o),this.fragment=document.createDocumentFragment()}num_columns(){return this.header.num_columns()}clear(t){t.innerHTML=o`
            <table cellspacing="0">
                <thead></thead>
                <tbody></tbody>
            </table>
        `}autosize_cells(t,e){for(;t.length>0;){let[i,r]=t.pop(),s=i.getBoundingClientRect();if(!s||(this._column_sizes.row_height=e||Math.max(10,Math.min(this._column_sizes.row_height||s.height,s.height)),!r))continue;this._column_sizes.indices[r.size_key]=s.width;let o=void 0!==this._column_sizes.override[r.size_key];s.width&&!o&&(this._column_sizes.auto[r.size_key]=s.width),"0px"===i.style.minWidth&&(i.style.minWidth=`${s.width}px`)}}async*draw(t,e,i,r,s,o){let{width:n,height:l}=t,{view:a,config:h}=e,{data:c,row_headers:d,column_headers:u,metadata:_,num_row_headers:f,num_column_headers:m,column_header_merge_depth:p,merge_headers:w="both"}=await a(Math.floor(s.start_col),Math.floor(s.start_row),Math.ceil(s.end_col),Math.ceil(s.end_row)),v="both"===w||"row"===w,g="both"===w||"column"===w,{start_row:b=0,start_col:y=0,end_col:x=0,end_row:S=0}=s;d&&(this._row_headers_length=d.reduce((t,e)=>Math.max(t,e.length),0),d=d.map(t=>(t.length=this._row_headers_length,t))),e.config.row_pivots=void 0!==f?Array(f).fill(0):Array(d?.[0]?.length||0).fill(0),e.config.column_pivots=void 0!==m?Array(m).fill(0):Array(u?.[0]?.length||0).fill(0);let M,E={viewport_width:0,selected_id:i,ridx_offset:b,sub_cell_offset:this._column_sizes.indices[(this._row_headers_length||0)+Math.floor(s.start_col)]||0,x0:y,x1:x,y1:S,row_height:this._column_sizes.row_height,row_headers_length:this._row_headers_length},z=0,C=[],L=!0;if(d?.length>0){let t=h.row_pivots.join(","),i={column_name:t,cidx:0,column_data:d,row_headers:d,first_col:L},s=z+Math.floor(y);M=this.body.draw(l,i,{...E,x0:0},!0,void 0,void 0,s,v);let o=[];for(let i=0;i<e.config.row_pivots.length;i++){let r=this.header.draw(t,Array(e.config.column_pivots.length).fill(""),1,void 0,i,y,i,p,g);r&&o.push(r)}if(L=!1,E.viewport_width+=o.reduce((t,{th:e},i)=>t+(this._column_sizes.indices[i]||e.offsetWidth),0),E.row_height=E.row_height||M.row_height,z=d[0].length,!r)for(let t=0;t<e.config.row_pivots.length;t++){let{td:e,metadata:i}=M.tds[t]||{},{th:r,metadata:s}=o[t]||{};(e||r)&&C.push([r||e,s||i])}}try{let t=0,e=o-s.start_col;for(;t<e;){if(!c[t]){let e=Math.max(s.end_col,0);s.start_col=e;let i=0,r=0;for(;this._column_sizes.indices.length>z+y+i+1&&r+E.viewport_width<n;)i++,r+=this._column_sizes.indices[z+y+i];if(r+E.viewport_width<n){let t=Math.min(o,e+5);s.end_col=Math.max(1,Math.min(o,t))}else s.end_col=Math.max(1,Math.min(o,e+i));let l=a(Math.floor(s.start_col),Math.floor(s.start_row),Math.ceil(s.end_col),Math.ceil(s.end_row));yield;let h=await l;if(typeof h.column_header_merge_depth<"u"&&(p=h.column_header_merge_depth),typeof h.merge_headers<"u"&&(w=h.merge_headers),0===h.data.length)return void(yield C);s.end_col=s.start_col+h.data.length;for(let e=0;e<h.data.length;e++)c[t+e]=h.data[e],h.metadata&&(_[t+e]=h.metadata[e]),u&&(u[t+e]=h.column_headers?.[e])}let e=u?.[t]||"",i=c[t],h=_?.[t],f={column_name:e,cidx:z,column_data:i,column_data_listener_metadata:h,row_headers:d,first_col:L},m=t+y,b=z+Math.floor(y),x=this.header.draw(void 0,e,void 0,m,b,y,z,p,g);if(M=this.body.draw(l,f,E,!1,m,y,b,v),L=!1,!r)for(let{td:t,metadata:e}of M.tds)C.push([x?.th||t,x?.metadata||e]);let S=this._column_sizes.indices[z+Math.floor(y)];if(E.viewport_width+=S||(x?.th?.offsetWidth||M.tds.reduce((t,e)=>t+e.td?.offsetWidth,0)),E.row_height=E.row_height||M.row_height,z++,t++,E.viewport_width-E.sub_cell_offset>n){this.body.clean({ridx:M?.ridx||0,cidx:z}),this.header.clean(),yield C,E.viewport_width=0;for(let[t]of C)E.viewport_width+=t.offsetWidth;if(E.viewport_width-E.sub_cell_offset>n)return}}this.body.clean({ridx:M?.ridx||0,cidx:z}),this.header.clean(),yield C}finally{this.body.clean({ridx:M?.ridx||0,cidx:z}),this.header.clean(),this.body._span_factory.reset(),this.header._span_factory.reset()}}},p=["both","horizontal","vertical","none"];document.createElement("regular-table").constructor===HTMLElement&&window.customElements.define("regular-table",class extends c{constructor(){super(),this._column_sizes={auto:[],override:[],indices:[]},this._style_callbacks=[],this._initialized=!1}connectedCallback(){this._initialized||(this.create_shadow_dom(),this.register_listeners(),this.setAttribute("tabindex","0"),this._initialized=!0,this.table_model=new m(this._table_clip,this._column_sizes,this))}_reset_viewport(){this._start_row=void 0,this._end_row=void 0,this._start_col=void 0,this._end_col=void 0}_reset_scroll(){this._column_sizes.indices=[],this.scrollTop=0,this.scrollLeft=0,this._reset_viewport()}_resetAutoSize(){this._column_sizes.auto=[],this._column_sizes.override=[],this._column_sizes.indices=[];for(let t=0;t<this.table_model.header.num_columns();t++){let e=this.table_model.header.get_column_header(t);e.style.minWidth="",e.style.maxWidth=""}}clear(){this.table_model=new m(this._table_clip,this._column_sizes,this)}addStyleListener(t){this._style_callbacks=this._style_callbacks.concat(t);let e=!0;return()=>{if(!e)return;e=!1;let i=this._style_callbacks=this._style_callbacks.slice(),r=i.indexOf(t);i.splice(r,1)}}removeStyleListener(t){let e=this._style_callbacks.length;this._style_callbacks=this._style_callbacks.filter(e=>e!==t),console.assert(this._style_callbacks.length===e-1,"No listener found")}invalidate(){if(!this._is_styling)throw new Error("Cannot call `invalidate()` outside of a `StyleListener`");this._invalidated=!0}getMeta(e){if(!(typeof e>"u")){if(e instanceof HTMLElement)return t.get(e);if(e.row_header_x>=0){if(e.row_header_x<this._view_cache.config.row_pivots.length){let t=this.table_model.body._fetch_cell(e.y,e.row_header_x);return this.getMeta(t)}}else{if(!(e.column_header_y>=0))return this.getMeta(this.table_model.body._fetch_cell(e.dy,e.dx+this.table_model._row_headers_length));if(e.column_header_y<this._view_cache.config.column_pivots.length){let t=this.table_model.body._fetch_cell(e.column_header_y,e.y);return this.getMeta(t)}}}}getDrawFPS(){return function(){let t=performance.now(),e=t-s,o=i,n=1e3*r/e,l=r;return i=0,r=0,s=t,{avg:o,real_fps:n,virtual_fps:1e3/o,num_frames:l,elapsed:e}}()}async scrollToCell(t,e){if(!this._view_cache)return void console.warn("data listener not configured");let i=this._column_sizes.row_height||19,r=this._view_cache.config.column_pivots.length*i,s=(this._table_clip.offsetHeight-r)%i,o=(this._virtual_panel.offsetHeight-s)/this._nrows;this.scrollTop=Math.ceil(o*e);let n=0;for(;t>0;)t--,n+=this._column_sizes.indices[t+this._view_cache.config.row_pivots.length]||60;this.scrollLeft=Math.ceil(n),await new Promise(requestAnimationFrame),await this._draw_flush()}setDataListener(t,{virtual_mode:e="both",preserve_state:i=!1}={}){console.assert(p.indexOf(e)>-1,`Unknown virtual_mode ${e};  valid options are "both" (default), "horizontal", "vertical" or "none"`);let r=this._virtual_mode!==e;if(i)console.assert(!r,"preserve_state called with modified virtual_mode"),this._view_cache.view=t;else{let i={row_pivots:[],column_pivots:[]};this._virtual_mode=e,this._invalid_schema=!0,this._view_cache={view:t,config:i},r&&this._setup_virtual_scroll()}}__noop_jsdoc_hints(){}})}},e={};function i(r){var s=e[r];if(void 0!==s)return s.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,i),o.exports}i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";var t,e,s,o,n;i.r(r),i.d(r,{ClipboardModel:()=>Z,Content:()=>a,ContentsModel:()=>pt,DEFAULT_COL:()=>l,FilterPatterns:()=>lt,Format:()=>t,Path:()=>s,RegularTable:()=>e,SelectionModel:()=>wt,SortStates:()=>at,Tag:()=>o,Tree:()=>n,TreeFinderBreadcrumbsElement:()=>h,TreeFinderFilterElement:()=>c,TreeFinderFiltersElement:()=>d,TreeFinderGridElement:()=>f,TreeFinderPanelElement:()=>vt,filterContentRoot:()=>ut,filterSortContentRoot:()=>_t,mockContent:()=>et,sortContentRoot:()=>ft}),function(t){t.DATE_FORMATTER=new Intl.DateTimeFormat("en-us"),t.bytesToHumanReadable=function(t,e=!1,i=1){if(!t)return"--";const r=e?1e3:1024;if(Math.abs(t)<r)return t+" B";const s=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let o=-1;const n=10**i;do{t/=r,++o}while(Math.round(Math.abs(t)*n)/n>=r&&o<s.length-1);return t.toFixed(i)+" "+s[o]},t.dateToStr=function(e,i){return t.DATE_FORMATTER.format(e).includes(i)},t.timeSince=function(t){t=t instanceof Date?t:new Date(t);const e=Math.floor((Date.now()-t.valueOf())/1e3);let i=e/31536e3;return i>1?Math.floor(i)+" years":(i=e/2592e3,i>1?Math.floor(i)+" months":(i=e/86400,i>1?Math.floor(i)+" days":(i=e/3600,i>1?Math.floor(i)+" hours":(i=e/60,i>1?Math.floor(i)+" minutes":Math.floor(e)+" seconds"))))}}(t||(t={})),function(t){function e(t){return void 0!==(null==t?void 0:t.y)&&!(null==t?void 0:t.column_header_y)}function i(t){return void 0!==(null==t?void 0:t.column_header_y)&&!!(null==t?void 0:t.column_header)}function r(t){return e(t)||s(t)}function s(t){return void 0!==(null==t?void 0:t.row_header_x)&&!!(null==t?void 0:t.row_header)}function o(t,e,i=!0){if("TREE-FINDER-GRID"===t.tagName)return;let r=e.getMeta(t);return i&&!r&&t.parentElement?o(t.parentElement,e,i):r}t.cellClicked=e,t.columnHeaderClicked=i,t.rowClicked=r,t.rowHeaderClicked=s,t.clickLoggingListener=function(t,n){const l=o(t.target,n,!0);l?(e(l)&&console.log("cell clicked"),i(l)&&console.log("column header clicked"),r(l)&&console.log("row clicked"),s(l)&&console.log("row header clicked")):console.log("event has no metadata")},t.colNameFromMeta=function(t){const{column_header:e,value:i}=t;return i instanceof HTMLElement?i.textContent:"0"===e?"path":i},t.metadataFromElement=o}(e||(e={})),function(t){t.equal=function(t,e){return t.length===e.length&&t.every((t,i)=>t===e[i])},t.fromarray=function(t){const[e,...i]=t;return`${e?e+":":""}${i.join("/")}`},t.toarray=function(t){const e=t.split(/:/g),[i,r]=e.length>=2?e:["",t];return[i,...r?r.split(/[\/\\]/g):[]]},t.normSlash=function(e,i){return t.trimSlash(e)+(i?"/":"")},t.trimSlash=function(t){return t.replace(/[\/\\]/g,"")}}(s||(s={})),function(t){t.html=(t,...e)=>t.map((t,i)=>[t,e[i]]).flat().filter(t=>!!t).join(""),t.attrs=t=>t.map(t=>{const e=t.values.filter(t=>t).join(" ");return e?` ${t.key}="${e}"`:""}).join("")}(o||(o={})),function(t){const e=document.createElement("template"),i=document.createElement("template"),r=document.createElement("template");t.breadcrumbsSpans=function(t){return'<div class="tf-breadcrumbs-home"><span class="tf-breadcrumbs-crumb tf-breadcrumbs-icon tf-breadcrumbs-dir-icon" data-crumbix="0"></span><span>/</span></div>'+[...t.slice(1)].map((t,e)=>`<span class="tf-breadcrumbs-crumb" data-crumbix="${e+1}">${t}</span>`).join('<span class="tf-breadcrumbs-separator">/</span>')},t.colHeaderSpans=function(t,e=!1){return r.innerHTML=`<span class="tf-header"><span class="tf-header-name">${t}</span><span class="tf-header-sort"></span></span>`,e?(i.innerHTML='<input class="tf-header-input"></input>',[i.content.firstChild,r.content.firstChild]):[r.content.firstChild]},t.rowHeaderSpan=function({hasChildren:t,isExpand:i,path:r,editable:n=!1,pathRender:l="tree"}){r=r.map((e,i)=>s.normSlash(e,i<r.length-1||t));const a=o.attrs([{key:"class",values:["rt-group-name",!t&&"rt-group-leaf",n&&"tf-mod-editable"]}]),h="relative"===l?r.join(""):r.slice(-1).join(""),c=function({hasChildren:t,isExpand:e,path:i=[]}){const r=i.slice(1).map(()=>'<span class="rt-tree-group"></span>');if(t){const t=`<span class="rt-row-header-icon">${e?"remove":"add"}</span>`;r.push(t)}return r.join("")}({hasChildren:t,isExpand:i,path:"tree"===l?r:[]});return e.innerHTML=`<span class="rt-tree-container">${c}<span${a}>${h}</span></span>`,"regular"===l?[r.slice(0,-1).join(""),e.content.firstChild]:[e.content.firstChild]}}(n||(n={}));const l="path";class a{constructor({row:t,filterer:e,sorter:i}){this._hasChildren=!1,this._isExpand=!1,this._dirtyChildren=!1,this._dirtySort=!1,this.init({row:t,filterer:e,sorter:i})}init({row:t,filterer:e,sorter:i}){return this.row=t,this.filterer=e,this.sorter=i,this}collapse(){this._isExpand=!1}equalPath(t){return s.equal(this.row.path,t)}async expand(){this._isExpand=!0,await this.getChildren()}async getChildren(){if(this._row.getChildren)return this._dirtyChildren&&(this._cacheMap?this._cache=(await this._row.getChildren()).map(t=>{var e,i;return null!==(i=null===(e=this._cacheMap.get(t.path.join("/")))||void 0===e?void 0:e.init({row:t,sorter:this._sorter}))&&void 0!==i?i:new a({row:t,sorter:this._sorter})}):this._cache=(await this._row.getChildren()).map(t=>new a({row:t,sorter:this._sorter})),this._cacheMap=new Map(this._cache.map(t=>[t.pathstr,t])),this._dirtyChildren=!1,this._dirtySort=!!this._sorter),this._dirtySort&&this._cache.sort(this._sorter),this._cache}getPathAtDepth(t=0,e){const i=this.row.path.slice(t);return void 0!==e&&i.length>1?[...Array(i.length-1).fill(e),i[i.length-1]]:i}async _flatten(t=[]){if(this.hasChildren)for(const e of await this.getChildren())t.push(e),e.isExpand&&await e._flatten(t);return t}async flatten(){return this._filterer?(await this._flatten()).filter(this._filterer):await this._flatten()}invalidate(t=!1){if(this.hasChildren&&([this._dirtyChildren,this._dirtySort]=[!0,!1],t&&this._cache))for(const e of this._cache)e.invalidate(t)}get hasChildren(){return this._hasChildren}get isExpand(){return this._isExpand}get nchildren(){var t,e;return null!==(e=null===(t=this._cache)||void 0===t?void 0:t.length)&&void 0!==e?e:0}get name(){return this.row.path.slice(-1)[0]}get pathstr(){return this._pathstr}get row(){return this._row}set row(t){this._row=t,this._hasChildren=!!this._row.getChildren,this._pathstr=this._row.path.join("/"),this.invalidate()}set filterer(t){this._filterer=t}set sorter(t){if(this._sorter=t,this._dirtySort=!(!t||!this._cache),this._cache)for(const e of this._cache)e.sorter=t}get _dirty(){return this._dirtyChildren||this._dirtySort}}!function(t){t.blank=function(e){return new t({row:e.reduce((t,e)=>("path"===e?t.path=[]:t[e]="",t),{})})}}(a||(a={}));class h extends HTMLElement{constructor(){super(...arguments),this._initialized=!1,this._initializedListeners=!1}connectedCallback(){this._initialized||(this.create_shadow_dom(),this._initialized=!0),this._initializedListeners||(this.addEventListener("mouseup",t=>this.onClick(t)),this._initializedListeners=!0)}init(t){this.model=t,this.model.crumbModel.crumbNamesSub.subscribe({next:t=>this._onCrumbUpdate(t)})}async _onCrumbUpdate(t){this.innerHTML=n.breadcrumbsSpans(t)}create_shadow_dom(){this.attachShadow({mode:"open"});this.shadowRoot.innerHTML=o.html`
      <style>
        :host > .tf-breadcrumbs-top {
          display: flex;
          align-items: flex-start;
        }
      </style>
      <div class="tf-breadcrumbs-top">
        ${"<slot></slot>"}
      </div>
    `,[this.shadowSheet,this.top]=this.shadowRoot.children}async onClick(t){if(0!==t.button)return;const e=t.target;e.dataset.crumbix&&this.model.crumbModel.revert(parseInt(e.dataset.crumbix))}}document.createElement("tree-finder-breadcrumbs").constructor===HTMLElement&&customElements.define("tree-finder-breadcrumbs",h);class c extends HTMLElement{constructor(){super(...arguments),this._initialized=!1,this._initializedListeners=!1}clear(){this.innerHTML='<input class="tf-filter-input"></input>',[this._input]=this.children}connectedCallback(){this._initialized||(this.create_shadow_dom(),this._initialized=!0),this._initializedListeners||(this.addEventListener("input",t=>this.onInput(t)),this._initializedListeners=!0)}init(t,e=0){this.model=t,this.clear(),this._col=0===e?"path":this.model.columns[e-1]}create_shadow_dom(){this.attachShadow({mode:"open"});this.shadowRoot.innerHTML=o.html`
      <style>
        :host > .tf-filter-top {
          display: inline-block;
          padding: 8px 0px 4px 0px;
          width: 100%;
        }
      </style>
      <div class="tf-filter-top">
        ${"<slot></slot>"}
      </div>
    `,[this.shadowSheet,this.top]=this.shadowRoot.children}onInput(t){const e={col:this._col,pattern:t.target.value};this.model.filterCol=this._col,this.model.onFilterInput(e)}get col(){return this._col}get input(){return this._input}}document.createElement("tree-finder-filter").constructor===HTMLElement&&customElements.define("tree-finder-filter",c);class d extends HTMLElement{constructor(){super(...arguments),this._initialized=!1}clear(){this.innerHTML="<tree-finder-filter></tree-finder-filter>".repeat(this.model.columns.length+1),this.filters=Array.from(this.children)}connectedCallback(){this._initialized||(this.create_shadow_dom(),this._initialized=!0)}init(t){this._initialized||(this.create_shadow_dom(),this._initialized=!0),this.model=t,this.clear();for(const[e,i]of this.filters.entries())i.init(t,e)}create_shadow_dom(){this.attachShadow({mode:"open"});this.shadowRoot.innerHTML=o.html`
      <style>
      </style>
      <div class="tf-filters-top">
        ${"<slot></slot>"}
      </div>
    `,[this.shadowSheet,this.top]=this.shadowRoot.children}entries(){return this.filters.entries()}getChild(t){return this.filters[t]}getInput(t){var e;return null===(e=this.getChild(t))||void 0===e?void 0:e.input}}document.createElement("tree-finder-filters").constructor===HTMLElement&&customElements.whenDefined("tree-finder-filter").then(()=>{customElements.define("tree-finder-filters",d)});var u=i(175);document.createElement("regular-table").constructor===HTMLElement&&window.customElements.define("regular-table",u.RegularTableElement);const _=customElements.get("regular-table");class f extends _{constructor(){super(...arguments),this._initializedListeners=!1}init(t,e={}){if(this.model=t,this.options=e,this.setDataListener(this.dataListener.bind(this),{virtual_mode:this._options.virtual_mode}),!this._initializedListeners){const[t,e]=[this.table_model.header.table,this.table_model.body.table];this.addStyleListener(()=>this.columnHeaderStyleListener()),this.addStyleListener(()=>this.rowStyleListener()),this.addEventListener("mouseover",t=>this.onMouseover(t)),t.addEventListener("mouseup",t=>this.onSortClick(t)),e.addEventListener("contextmenu",t=>this.onRowClick(t)),e.addEventListener("dblclick",t=>this.onRowDoubleClick(t)),e.addEventListener("mouseup",t=>this.onRowClick(t)),e.addEventListener("mouseup",t=>this.onTreeClick(t)),this.options.doWindowResize&&window.addEventListener("resize",async()=>{await this.draw()}),this.model.drawSub.subscribe(async t=>{t&&this._resetAutoSize(),await this.draw(),this.model.options.needsWidths&&await this.draw()}),this._initializedListeners=!0}this.model.requestDraw()}async dataListener(t,e,i,r){return{num_columns:this.model.columns.length,num_rows:this.model.contents.length,column_headers:this.model.columns.slice(t,i).map((t,e)=>this.options.showFilter?[this.filters.getChild(e+1),...n.colHeaderSpans(t)]:n.colHeaderSpans(t)),row_headers:this.model.contents.slice(e,r).map(t=>this._getRowHeader(t)),data:this.model.isBlank?Array(this.model.columns.length).fill([""]):this._getData(t,e,i,r)}}columnHeaderStyleListener(){var t,i;this.cornerHeaderStyleListener();for(const t of this.querySelectorAll("thead tr:first-child th")){t.classList.toggle("tf-header-align-left",!0);const e=t.querySelector("tree-finder-filter");e&&(e.input.classList.toggle("tf-header-input",!0),this.model.filterCol===e.col&&(e.input.focus(),delete this.model.filterCol))}for(const r of this.querySelectorAll("thead tr:last-child th")){const s=this.getMeta(r),o=e.colNameFromMeta(s);if(o){const e=null===(t=this.model.sortStates.byColumn["0"===o?"path":o])||void 0===t?void 0:t.order;null===(i=r.querySelector(".tf-header-sort"))||void 0===i||i.classList.toggle(`tf-header-sort-${e}`,!!e)}r.classList.toggle("tf-header-corner",void 0===s.x),r.classList.toggle("tf-header-align-left",!0)}this.model.options.needsWidths&&this.columnWidthStyleListener()}columnWidthStyleListener(){let t=[...this._column_sizes.indices];"regular"===this._pathRender&&t.length>0&&(t=[t[0]+t[1],...t.slice(2)]),this.model.columnWidthsSub.next(t.map(t=>`calc(${t}px - 12px)`))}cornerHeaderStyleListener(){const t=this.querySelectorAll("thead tr > th:first-child > span:first-child:not([class])"),e=this.options.showFilter?[this.filters.getChild(0),...n.colHeaderSpans("path")]:n.colHeaderSpans("path");for(let i=0;i<t.length;i++)t[i].replaceWith(e[i])}rowStyleListener(){const t=this.querySelectorAll("tbody th span.rt-group-name");for(const i of t){const{y:t}=e.metadataFromElement(i,this);if(null!=t){const e=this.model.contents[t];i.classList.add("tf-grid-filetype-icon",`tf-grid-${e.row.kind}-icon`),this._renamerStyleListener(i,e)}}this._selectedStyleListener()}async onMouseover(t){var i;if("regular"===this._pathRender){const r=t.target,s=e.metadataFromElement(r,this),o=null===(i=null==s?void 0:s.row_header)||void 0===i?void 0:i[0];for(let t of this.table_model.body.rows)if(t.childElementCount>this.model.columns.length+1){const e=t.children[0];e.classList.toggle("tf-mod-hover",e.textContent===o)}}}async onRowClick(t){if(0!==t.button&&2!==t.button)return;const i=t.target;if(i.classList.contains("rt-row-header-icon"))return;const r=e.metadataFromElement(i,this);if(!r||!e.rowClicked(r))return;const s=this.model.contents[r.y];2===t.button&&this.model.selectionModel.has(s)||(t.shiftKey?this.model.selectionModel.selectRange(s,this.model.contents):this.model.selectionModel.select(s,t.ctrlKey||t.metaKey),this._selectedStyleListener())}async onSortClick(t){if(0!==t.button)return;const i=t.target;if(i.classList.contains("rt-column-resize"))return;const r=e.metadataFromElement(i,this);!r||!e.columnHeaderClicked(r)||r.column_header_y<this.table_model.header.rows.length-1||await this.model.sort({col:e.colNameFromMeta(r),multisort:t.shiftKey})}async onTreeClick(t){if(0!==t.button)return;let i=t.target;if(!i.classList.contains("rt-row-header-icon"))return;const r=e.metadataFromElement(i,this);this.model.contents[r.y].isExpand?await this.model.collapse(r.y):await this.model.expand(r.y)}async onRowDoubleClick(t){if(0!==t.button)return;const i=t.target,r=e.metadataFromElement(i,this);if(!r||!e.rowClicked(r))return;const s=this.model.contents[r.y];await this.model.open(s.row)}get options(){return{...this._options}}set options({columnFormatters:t,doWindowResize:e=!1,pathRender:i="tree",pathRenderOnFilter:r="relative",showFilter:s=!1,virtual_mode:o="vertical"}){this._options={columnFormatters:t,doWindowResize:e,pathRender:i,pathRenderOnFilter:r,showFilter:s,virtual_mode:o},this.showFilter=this._options.showFilter}set showFilter(t){t?(this.filters=document.createElement("tree-finder-filters"),this.filters.init(this.model)):delete this.filters,this._options.showFilter=t}_getData(e,i,r,s){var o,n;const l=[];for(const a of this.model.columns.slice(e,r)){const e=null!==(n=null===(o=this.options.columnFormatters)||void 0===o?void 0:o[a])&&void 0!==n?n:t=>t;l.push(this.model.contents.slice(i,s).map(i=>{const r=e(i.row[a]);return r instanceof Date?t.DATE_FORMATTER.format(r):r}))}return l}_getRowHeader(t){return n.rowHeaderSpan({hasChildren:t.hasChildren,isExpand:t.isExpand,path:t.getPathAtDepth(this.model.pathDepth),editable:this.model.renamerTest(t),pathRender:this._pathRender})}_renamerStyleListener(t,e){t.classList.contains("tf-mod-editable")&&(t.getAttribute("contenteditable")||(t.addEventListener("keydown",i=>{"Enter"===i.key?t.blur():"Escape"===i.key&&(t.textContent=e.name,t.blur())}),t.addEventListener("blur",()=>{const i=t.textContent;i&&(e.row.path=[...e.row.path.slice(0,-1),i],t.classList.toggle("tf-mod-editable",!1),t.removeAttribute("contenteditable"),this.model.renamerSub.next({name:i,target:e})),this.model.renamerPath=null}),t.setAttribute("contenteditable","true")),t.focus())}_selectedStyleListener(){const t=this.model.columns.length+1;for(let i of this.table_model.body.rows.slice(0,this.model.contents.length)){const{y:r}=e.metadataFromElement(i.children[0],this);if(i&&"TR"===i.tagName&&(i.classList.toggle("tf-mod-select",this.model.selectionModel.has(this.model.contents[r])),"regular"===this._pathRender))for(let e=0;e<i.children.length-t;e++)i.children[0].classList.toggle("tf-mod-select-not",!0)}}get _pathRender(){return this.model.filterPatterns.any?this.options.pathRenderOnFilter||"tree":this.options.pathRender||"tree"}}document.createElement("tree-finder-grid").constructor===HTMLElement&&Promise.all([customElements.whenDefined("tree-finder-breadcrumbs"),customElements.whenDefined("tree-finder-filters"),customElements.whenDefined("regular-table")]).then(()=>{customElements.define("tree-finder-grid",f)});var m=function(t,e){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},m(t,e)};function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}Object.create;function w(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,s,o=i.call(t),n=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)n.push(r.value)}catch(t){s={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return n}function g(t,e,i){if(i||2===arguments.length)for(var r,s=0,o=e.length;s<o;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;"function"==typeof SuppressedError&&SuppressedError;function b(t){return"function"==typeof t}function y(t){var e=t(function(t){Error.call(t),t.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var x=y(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}});function S(t,e){if(t){var i=t.indexOf(e);0<=i&&t.splice(i,1)}}var M=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var e;return t.prototype.unsubscribe=function(){var t,e,i,r,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var n=w(o),l=n.next();!l.done;l=n.next()){l.value.remove(this)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}else o.remove(this);var a=this.initialTeardown;if(b(a))try{a()}catch(t){s=t instanceof x?t.errors:[t]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var c=w(h),d=c.next();!d.done;d=c.next()){var u=d.value;try{C(u)}catch(t){s=null!=s?s:[],t instanceof x?s=g(g([],v(s)),v(t.errors)):s.push(t)}}}catch(t){i={error:t}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}}if(s)throw new x(s)}},t.prototype.add=function(e){var i;if(e&&e!==this)if(this.closed)C(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(i=this._finalizers)&&void 0!==i?i:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&S(e,t)},t.prototype.remove=function(e){var i=this._finalizers;i&&S(i,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),E=M.EMPTY;function z(t){return t instanceof M||t&&"closed"in t&&b(t.remove)&&b(t.add)&&b(t.unsubscribe)}function C(t){b(t)?t():t.unsubscribe()}var L={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},k={setTimeout:function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var s=k.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,g([t,e],v(i))):setTimeout.apply(void 0,g([t,e],v(i)))},clearTimeout:function(t){var e=k.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function T(){}var P=R("C",void 0,void 0);function R(t,e,i){return{kind:t,value:e,error:i}}var H=null;function D(t){if(L.useDeprecatedSynchronousErrorHandling){var e=!H;if(e&&(H={errorThrown:!1,error:null}),t(),e){var i=H,r=i.errorThrown,s=i.error;if(H=null,r)throw s}}else t()}var A=function(t){function e(e){var i=t.call(this)||this;return i.isStopped=!1,e?(i.destination=e,z(e)&&e.add(i)):i.destination=B,i}return p(e,t),e.create=function(t,e,i){return new j(t,e,i)},e.prototype.next=function(t){this.isStopped?N(function(t){return R("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?N(R("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?N(P,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(M),F=Function.prototype.bind;function O(t,e){return F.call(t,e)}var W=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){$(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){$(t)}else $(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){$(t)}},t}(),j=function(t){function e(e,i,r){var s,o,n=t.call(this)||this;b(e)||!e?s={next:null!=e?e:void 0,error:null!=i?i:void 0,complete:null!=r?r:void 0}:n&&L.useDeprecatedNextContext?((o=Object.create(e)).unsubscribe=function(){return n.unsubscribe()},s={next:e.next&&O(e.next,o),error:e.error&&O(e.error,o),complete:e.complete&&O(e.complete,o)}):s=e;return n.destination=new W(s),n}return p(e,t),e}(A);function $(t){var e;L.useDeprecatedSynchronousErrorHandling?(e=t,L.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=e)):function(t){k.setTimeout(function(){var e=L.onUnhandledError;if(!e)throw t;e(t)})}(t)}function N(t,e){var i=L.onStoppedNotification;i&&k.setTimeout(function(){return i(t,e)})}var B={closed:!0,next:T,error:function(t){throw t},complete:T},q="function"==typeof Symbol&&Symbol.observable||"@@observable";function I(t){return t}function U(t){return 0===t.length?I:1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}}var Y=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var r,s=this,o=(r=t)&&r instanceof A||function(t){return t&&b(t.next)&&b(t.error)&&b(t.complete)}(r)&&z(r)?t:new j(t,e,i);return D(function(){var t=s,e=t.operator,i=t.source;o.add(e?e.call(o,i):i?s._subscribe(o):s._trySubscribe(o))}),o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=K(e))(function(e,r){var s=new j({next:function(e){try{t(e)}catch(t){r(t),s.unsubscribe()}},error:r,complete:e});i.subscribe(s)})},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[q]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return U(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=K(t))(function(t,i){var r;e.subscribe(function(t){return r=t},function(t){return i(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function K(t){var e;return null!==(e=null!=t?t:L.Promise)&&void 0!==e?e:Promise}var X=y(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),G=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return p(e,t),e.prototype.lift=function(t){var e=new V(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new X},e.prototype.next=function(t){var e=this;D(function(){var i,r;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var s=w(e.currentObservers),o=s.next();!o.done;o=s.next()){o.value.next(t)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var e=this;D(function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var i=e.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;D(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,i=this,r=i.hasError,s=i.isStopped,o=i.observers;return r||s?E:(this.currentObservers=null,o.push(t),new M(function(){e.currentObservers=null,S(o,t)}))},e.prototype._checkFinalizedStatuses=function(t){var e=this,i=e.hasError,r=e.thrownError,s=e.isStopped;i?t.error(r):s&&t.complete()},e.prototype.asObservable=function(){var t=new Y;return t.source=this,t},e.create=function(t,e){return new V(t,e)},e}(Y),V=function(t){function e(e,i){var r=t.call(this)||this;return r.destination=e,r.source=i,r}return p(e,t),e.prototype.next=function(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)},e.prototype.error=function(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:E},e}(G);class Z{constructor(){this.copySub=new G,this.cutSub=new G,this.deleteSub=new G,this.pasteSub=new G,this.doCut=!1,this.memo=[]}copy(t){this.doCut=!1,this.memo=t,this.copySub.next(t)}cut(t){this.doCut=!0,this.memo=t,this.cutSub.next(t)}delete(t){this.deleteSub.next(t)}paste(t){this.pasteSub.next({destination:t,doCut:this.doCut,memo:this.memo}),this.doCut=!1}copySelection(t){this.copy(t.selection.map(t=>t.row))}cutSelection(t){this.cut(t.selection.map(t=>t.row))}deleteSelection(t){this.delete(t.selection.map(t=>t.row))}pasteSelection(t){var e,i;const r=null!==(i=null===(e=t.selectedLast)||void 0===e?void 0:e.row)&&void 0!==i?i:t.root.row;r&&this.paste(r)}open(t,e){t.openSub.next(e)}refresh(t,e){t.refreshSub.next(e)}}const J={};let Q=0,tt=-1;function et(t){const{path:e,kind:i,modDays:r=tt++,nchildren:s=100,ndirectories:o=10,randomize:n=!1}=t,l=new Date(24*r*60*60*1e3),a=n&&it.bool();return"dir"===i?{kind:i,path:e,modified:l,writable:a,getChildren:async()=>{const t=e.join("/");if(t in J)return J[t];const i=[],r=n?it.shuffle(rt):rt;for(let t=0;t<s;t++)i.push(et({kind:t<o?"dir":"text",path:[...e,t<o?`${r[t]}`:`file_${(""+Q++).padStart(7,"0")}.txt`],nchildren:s,ndirectories:o,randomize:n}));return J[t]=i,i}}:{kind:i,path:e,modified:l,writable:a}}var it;!function(t){t.bool=function(){return Math.random()<.5},t.shuffle=function(t,e=!1){for(let i=(t=e?t:[...t]).length-1;i>0;i--){const e=Math.floor(Math.random()*(i+1));[t[i],t[e]]=[t[e],t[i]]}return t}}(it||(it={}));const rt=["able","baker","charlie","dog","easy","fox","george","how","item","jig","king","love","mike","nan","oboe","peter","queen","roger","sugar","tare","uncle","victor","william","xray","yoke","zebra"];var st=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return p(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var i=t.prototype._subscribe.call(this,e);return!i.closed&&e.next(this._value),i},e.prototype.getValue=function(){var t=this,e=t.hasError,i=t.thrownError,r=t._value;if(e)throw i;return this._throwIfClosed(),r},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(G);const ot=["asc","desc",null],nt=ot[0];class lt{constructor(t){if(this._patterns={},t)for(const e of t)this.set(e)}set(t){const{col:e,pattern:i}=t;i?this._patterns[e]=i:delete this._patterns[e]}get any(){return!!Object.keys(this.patterns).length}get patterns(){return this._patterns}}class at{constructor(t){this.defaultColumn=l,t=null!=t?t:[{col:l,order:nt}],this.states=t.map((t,e)=>({...t,ix:e,sign:"desc"===t.order?-1:1})),this.byColumn=this.states.reduce((t,e)=>(t[e.col]=e,t),{})}}function ht(e,i=0){return function(r){for(const[s,o]of Object.entries(e.patterns)){if("path"===s)return r.getPathAtDepth(i).join("/").includes(o);{const e=r.row[s];if("string"==typeof e)return e.includes(o);if(e instanceof Date)return t.dateToStr(e,o);if("boolean"==typeof e){const t=Number(o);return!Number.isNaN(t)&&e===!!t||(e?"true":"false").includes(o)}return e==Number(o)}}return!0}}function ct(t){return function(e,i){for(const{col:r,sign:s}of t.states){let t,o=e.row[r],n=i.row[r];if(Array.isArray(o)&&(o=o[o.length-1],n=n[n.length-1]),t="string"==typeof o?o.localeCompare(n):o-n,t)return s*t}return 0}}function dt(t,e,i=!1){let r=[...t.states];if(e in t.byColumn){const{ix:i,order:s}=t.byColumn[e],o=ot[(ot.indexOf(s)+1)%ot.length];o?r[i]={col:e,order:o}:r.splice(i,1)}else{const t={col:e,order:nt};i?r.push(t):r=[t]}return new at(r)}async function ut({root:t,filterPatterns:e,pathDepth:i}){return t.filterer=ht(e,null!=i?i:t.row.path.length),t.flatten()}async function _t({root:t,filterPatterns:e,sortStates:i,col:r,multisort:s,pathDepth:o}){return r&&((i=dt(i,r,s)).states.length||(i=new at)),t.filterer=ht(e,null!=o?o:t.row.path.length),t.sorter=ct(i),[await t.flatten(),i]}async function ft({root:t,sortStates:e,col:i,multisort:r}){return i&&((e=dt(e,i,r)).states.length||(e=new at)),t.sorter=ct(e),[await t.flatten(),e]}class mt{constructor(){this._crumbsRows=[],this._crumbsRows=[],this.crumbNamesSub=new st([]),this.revertedCrumbSub=new st(void 0)}revert(t){this._crumbsRows=this._crumbsRows.slice(0,t+1);const e=this._crumbsRows.pop();return this.revertedCrumbSub.next(e),e}extend(t){this._crumbsRows=[...this._crumbsRows,...t],this._onCrumbUpdate();return this._crumbsRows[this._crumbsRows.length-1]}async _onCrumbUpdate(){this.crumbNamesSub.next(this._crumbsRows.map(t=>t.path[t.path.length-1]))}}class pt{constructor(t,e={}){this.columnWidthsSub=new st([]),this.drawSub=new st(!1),this.openSub=new G,this.refreshSub=new G,this.renamerSub=new G,this.selectionModel=new wt,this._renamerPath=null,this.crumbModel=new mt,this._filterPatterns=new lt,this._parentMap=new WeakMap,this._sortStates=new at,this.options=e,this.crumbModel.revertedCrumbSub.subscribe(async t=>{t&&(await this.open(t),this.requestDraw({autosize:!0}))}),this.openSub.subscribe(t=>t.map(t=>this.openDir(t))),this.refreshSub.subscribe(t=>{this._invalidate(t),this.flatten()}),this.renamerSub.subscribe(()=>this._renamerPath=null),this.open(t)}async open(...t){this.openSub.next(t)}async openDir(t){if("dir"!==t.kind)return;this._contents=[];const e=[t];for(;this._parentMap.has(e[0]);)e.unshift(this._parentMap.get(e[0]));this.crumbModel.extend(e),this._parentMap=new WeakMap,this._root=new a({row:t}),this.initColumns(),await this._root.getChildren(),await this.sort({autosize:!0})}initColumns(){var t;const e=null!==(t=this.options.columnNames)&&void 0!==t?t:Object.keys(this._root.row);this._columns=e.filter(t=>!["path","getChildren"].includes(t)),this._ixByColumn=Object.fromEntries(this._columns.map((t,e)=>[t,e+1]))}async collapse(t){const e=this._contents[t];let i=t+1,r=0;for(;this._contents[i]&&this._contents[i].row.path.length>e.row.path.length;)i++,r++;this._contents.splice(t+1,r),e.collapse(),this.requestDraw()}async expand(t){var e;const i=this._contents[t];await i.expand();for(const t of null!==(e=await(null==i?void 0:i.getChildren()))&&void 0!==e?e:[])this._parentMap.set(t.row,i.row);let r;[r,this._sortStates]=await _t({filterPatterns:this._filterPatterns,pathDepth:this.pathDepth,root:i,sortStates:this._sortStates}),this._contents.splice(t+1,0,...r),this.requestDraw()}async filter({autosize:t=!0}={}){await this._root.expand(),this._contents=await ut({filterPatterns:this._filterPatterns,root:this._root}),this.requestDraw({autosize:t})}async flatten({autosize:t=!0}={}){this._contents=await this._root.flatten(),this.requestDraw({autosize:t})}onFilterInput(t){this._filterPatterns.set(t),this.filter()}renamerTest(t){return null!==this._renamerPath&&t.equalPath(this._renamerPath)}requestDraw(t={}){const{autosize:e=!1}=t;if(t.delay){const{delay:e,...i}=t;setTimeout(()=>this.requestDraw(i),e)}this.drawSub.next(e)}async sort(t={}){const{autosize:e=!1,col:i,multisort:r}=t;await this._root.expand(),[this._contents,this._sortStates]=await _t({col:i,filterPatterns:this._filterPatterns,multisort:r,root:this._root,sortStates:this._sortStates}),this.requestDraw({autosize:e})}_invalidate(t){if(t){const e=new Set(t.map(t=>t.getChildren?t.path.join("/"):t.path.slice(0,-1).join("/")));this.contents.filter(t=>e.has(t.pathstr)).forEach(t=>t.invalidate())}else this._root.invalidate(!0)}get columns(){return this._columns}get contents(){return this.isBlank?[a.blank(["path",...this._columns])]:this._contents}get filterPatterns(){return this._filterPatterns}get isBlank(){return!this._contents.length&&this._columns.length}get ixByColumn(){return this._ixByColumn}get options(){return{...this._options}}set options({columnNames:t,doRefetch:e=!1,needsWidths:i=!1}){this._options={columnNames:t,doRefetch:e,needsWidths:i}}get pathDepth(){return this._root.row.path.length}set renamerPath(t){this._renamerPath=t}get root(){return this._root}get selection(){return this.selectionModel.get(this._contents)}get selectedLast(){return this.selectionModel.getLast(this._contents)}get sortStates(){return this._sortStates}}class wt{constructor(){this.clear()}clear(){this.pivot=null,this.range=[],this._lastPathstr=null,this.selection=new Set}get(t){return t.filter(t=>this.has(t))}getLast(t){if(!this._lastPathstr)return null;for(let e=0;e<t.length;e++)if(t[e].pathstr===this._lastPathstr)return t[e];return null}has(t){return this.selection.has(t.pathstr)}select(t,e=!1){e?this.range=[]:this.clear(),this._lastPathstr=t.pathstr,this.selection.has(this._lastPathstr)?this.selection.delete(this._lastPathstr):this.selection.add(this._lastPathstr),this.pivot=this.selection.size>0?this._lastPathstr:null}selectRange(t,e){for(const t of this.range)this.selection.delete(t);this.range=wt.findRange(this.pivot,t.pathstr,e.map(t=>t.pathstr));for(const t of this.range)this.selection.add(t)}get lastPathstr(){return this._lastPathstr}}!function(t){t.findRange=function(t,e,i){if(t===e)return[];const r=null!==t?i.indexOf(t):-1,s=i.indexOf(e),o=[];if(r>s)for(let t=s;t<r;t++)o.push(i[t]);else for(let t=r+1;t<=s;t++)o.push(i[t]);return o}}(wt||(wt={}));class vt extends HTMLElement{constructor(){super(...arguments),this._initialized=!1}connectedCallback(){this._initialized||(this.create_shadow_dom(),this._initialized=!0)}clear(){this.innerHTML=o.html`
      <tree-finder-breadcrumbs class="tf-panel-breadcrumbs" slot="breadcrumbs"></tree-finder-breadcrumbs>
      ${this.options.showFilter?'<tree-finder-filters class="tf-panel-filters" slot="filters"></tree-finder-filters>':'<div slot="filters"></div>'}
      <tree-finder-grid class="tf-panel-grid" slot="grid"></tree-finder-grid>
    `,[this.breadcrumbs,this.filters,this.grid]=this.children}init({root:t,options:e={},modelOptions:i={},gridOptions:r={}}){this.options=e,this.clear(),this._options.showFilter&&(i.needsWidths=!0),this._model=new pt(t,i),this.breadcrumbs.init(this._model),this.options.showFilter&&this.filters.init(this._model),this.grid.init(this._model,r),this._model.columnWidthsSub.subscribe(t=>{if(t.length){this.filters.getChild(0).style.marginLeft="12px";for(const[e,i]of t.entries()){const t=this.filters.getInput(e);t&&(t.style.width=i)}}}),this.draw()}async draw(){await this.grid.draw()}create_shadow_dom(){this.attachShadow({mode:"open"});this.shadowRoot.innerHTML=o.html`
      <style>
        :host {
          display: flex;
          flex-flow: column;
        }
        :host > div {
          position: relative;
        }
        :host > .tf-panel-filters-container {
          display: inline-block;
        }
        :host > .tf-panel-grid-container {
          flex: 1;
        }
      </style>
      <div class="tf-panel-breadcrumbs-container">
        ${'<slot name="breadcrumbs"></slot>'}
      </div>
      <div class="tf-panel-filters-container">
        ${'<slot name="filters"></slot>'}
      </div>
      <div class="tf-panel-grid-container">
        ${'<slot name="grid"></slot>'}
      </div>
    `,[this.shadowSheet,this.breadcrumbsContainer,this.filterContainer,this.gridContainer]=this.shadowRoot.children}get model(){return this._model}get options(){return{...this._options}}set options({showFilter:t=!1}){this._options={showFilter:t}}}document.createElement("tree-finder-panel").constructor===HTMLElement&&Promise.all([customElements.whenDefined("tree-finder-breadcrumbs"),customElements.whenDefined("tree-finder-filters"),customElements.whenDefined("tree-finder-grid")]).then(()=>{customElements.define("tree-finder-panel",vt)})})(),r})());


/***/ })

}]);
//# sourceMappingURL=vendors-node_modules_pnpm_tree-finder_base_1_0_3_node_modules_tree-finder_base_dist_tree-finder_js.f87fec5b1cb061af4b15.js.map