"use strict";
(self["webpackChunkjupyterlab_jupytext"] = self["webpackChunkjupyterlab_jupytext"] || []).push([["vendors-node_modules_jupyterlab-rise_lib_index_js"],{

/***/ "../../node_modules/jupyterlab-rise/lib/icons.js"
/*!*******************************************************!*\
  !*** ../../node_modules/jupyterlab-rise/lib/icons.js ***!
  \*******************************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RISEIcon: () => (/* binding */ RISEIcon),
/* harmony export */   fullScreenIcon: () => (/* binding */ fullScreenIcon)
/* harmony export */ });
/* harmony import */ var _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @jupyterlab/ui-components */ "webpack/sharing/consume/default/@jupyterlab/ui-components");
/* harmony import */ var _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _style_slideshow_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../style/slideshow.svg */ "../../node_modules/jupyterlab-rise/style/slideshow.svg");
/* harmony import */ var _style_fullscreen_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../style/fullscreen.svg */ "../../node_modules/jupyterlab-rise/style/fullscreen.svg");



const RISEIcon = new _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_0__.LabIcon({ name: 'RISE', svgstr: _style_slideshow_svg__WEBPACK_IMPORTED_MODULE_1__ });
const fullScreenIcon = new _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_0__.LabIcon({
    name: 'RISE:fullScreen',
    svgstr: _style_fullscreen_svg__WEBPACK_IMPORTED_MODULE_2__
});


/***/ },

/***/ "../../node_modules/jupyterlab-rise/lib/index.js"
/*!*******************************************************!*\
  !*** ../../node_modules/jupyterlab-rise/lib/index.js ***!
  \*******************************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IRisePreviewFactory: () => (/* reexport safe */ _tokens__WEBPACK_IMPORTED_MODULE_8__.IRisePreviewFactory),
/* harmony export */   IRisePreviewTracker: () => (/* reexport safe */ _tokens__WEBPACK_IMPORTED_MODULE_8__.IRisePreviewTracker),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _jupyterlab_application__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @jupyterlab/application */ "webpack/sharing/consume/default/@jupyterlab/application");
/* harmony import */ var _jupyterlab_application__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_application__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @jupyterlab/apputils */ "webpack/sharing/consume/default/@jupyterlab/apputils");
/* harmony import */ var _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _jupyterlab_notebook__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @jupyterlab/notebook */ "webpack/sharing/consume/default/@jupyterlab/notebook");
/* harmony import */ var _jupyterlab_notebook__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_notebook__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _jupyterlab_settingregistry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @jupyterlab/settingregistry */ "webpack/sharing/consume/default/@jupyterlab/settingregistry");
/* harmony import */ var _jupyterlab_settingregistry__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_settingregistry__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @jupyterlab/translation */ "webpack/sharing/consume/default/@jupyterlab/translation");
/* harmony import */ var _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_translation__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lumino_algorithm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lumino/algorithm */ "webpack/sharing/consume/default/@lumino/algorithm");
/* harmony import */ var _lumino_algorithm__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_lumino_algorithm__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./icons */ "../../node_modules/jupyterlab-rise/lib/icons.js");
/* harmony import */ var _preview__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./preview */ "../../node_modules/jupyterlab-rise/lib/preview.js");
/* harmony import */ var _tokens__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tokens */ "../../node_modules/jupyterlab-rise/lib/tokens.js");










/**
 * Command IDs namespace for JupyterLab RISE extension
 */
var CommandIDs;
(function (CommandIDs) {
    /**
     * Open the current notebook in a new browser tab
     */
    CommandIDs.openRise = 'RISE:slideshow';
    CommandIDs.riseFullScreen = 'RISE:fullscreen-plugin';
    /**
     * Open the current notebook in a IFrame within JupyterLab
     */
    CommandIDs.risePreview = 'RISE:preview';
    /**
     * Set the slide attribute of a cell
     */
    CommandIDs.riseSetSlideType = 'RISE:set-slide-type';
})(CommandIDs || (CommandIDs = {}));
const factory = {
    id: 'jupyterlab-rise:factory',
    provides: _tokens__WEBPACK_IMPORTED_MODULE_8__.IRisePreviewFactory,
    optional: [_jupyterlab_translation__WEBPACK_IMPORTED_MODULE_4__.ITranslator],
    activate: (app, translator) => {
        const { commands, docRegistry } = app;
        return new _preview__WEBPACK_IMPORTED_MODULE_7__.RisePreview.FactoryToken({
            commands,
            docRegistry,
            translator: translator !== null && translator !== void 0 ? translator : undefined
        });
    }
};
/**
 * Open the notebook with RISE.
 */
const plugin = {
    id: 'jupyterlab-rise:plugin',
    autoStart: true,
    requires: [_tokens__WEBPACK_IMPORTED_MODULE_8__.IRisePreviewFactory],
    optional: [
        _jupyterlab_notebook__WEBPACK_IMPORTED_MODULE_2__.INotebookTracker,
        _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_1__.ICommandPalette,
        _jupyterlab_application__WEBPACK_IMPORTED_MODULE_0__.ILayoutRestorer,
        _jupyterlab_settingregistry__WEBPACK_IMPORTED_MODULE_3__.ISettingRegistry,
        _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_4__.ITranslator
    ],
    provides: _tokens__WEBPACK_IMPORTED_MODULE_8__.IRisePreviewTracker,
    activate: (app, factory, notebookTracker, palette, restorer, settingRegistry, translator) => {
        console.log('JupyterLab extension jupyterlab-rise is activated!');
        // Create a widget tracker for Rise Previews.
        const tracker = new _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_1__.WidgetTracker({
            namespace: 'rise'
        });
        if (!notebookTracker) {
            return tracker;
        }
        const { commands, shell } = app;
        const trans = (translator !== null && translator !== void 0 ? translator : _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_4__.nullTranslator).load('rise');
        let settings = null;
        if (settingRegistry) {
            settingRegistry.load(plugin.id).then(config => {
                settings = config;
            });
        }
        if (restorer) {
            restorer.restore(tracker, {
                // Need to modify to handle auto full screen
                command: 'docmanager:open',
                args: panel => ({
                    path: panel.context.path,
                    factory: _preview__WEBPACK_IMPORTED_MODULE_7__.RisePreview.FACTORY_NAME
                }),
                name: panel => panel.context.path,
                when: app.serviceManager.ready
            });
        }
        function getCurrent(args) {
            var _a;
            const widget = (_a = notebookTracker === null || notebookTracker === void 0 ? void 0 : notebookTracker.currentWidget) !== null && _a !== void 0 ? _a : null;
            const activate = args['activate'] !== false;
            if (activate && widget) {
                shell.activateById(widget.id);
            }
            return widget;
        }
        function isEnabled() {
            return ((notebookTracker === null || notebookTracker === void 0 ? void 0 : notebookTracker.currentWidget) !== null &&
                (notebookTracker === null || notebookTracker === void 0 ? void 0 : notebookTracker.currentWidget) === shell.currentWidget);
        }
        factory.widgetCreated.connect((sender, widget) => {
            // Notify the widget tracker if restore data needs to update.
            widget.context.pathChanged.connect(() => {
                void tracker.save(widget);
            });
            // Add the notebook panel to the tracker.
            void tracker.add(widget);
        });
        tracker.widgetAdded.connect((sender, widget) => {
            widget.ready.then(() => { var _a; return (_a = widget.iframe) === null || _a === void 0 ? void 0 : _a.focus(); });
        });
        commands.addCommand(CommandIDs.openRise, {
            label: args => (args.toolbar ? '' : trans.__('Open as Reveal Slideshow')),
            caption: trans.__('Open the current notebook in a new browser tab as an RevealJS slideshow.'),
            execute: async () => {
                const current = notebookTracker.currentWidget;
                if (!current) {
                    return;
                }
                await current.context.save();
                window.open(_preview__WEBPACK_IMPORTED_MODULE_7__.RisePreview.getRiseUrl(current.context.path, current.content.activeCellIndex));
            },
            isEnabled
        });
        commands.addCommand(CommandIDs.risePreview, {
            label: args => args.toolbar ? '' : trans.__('Render as Reveal Slideshow'),
            caption: trans.__('Render the current notebook as Reveal Slideshow'),
            icon: _icons__WEBPACK_IMPORTED_MODULE_6__.RISEIcon,
            execute: async (args) => {
                const current = getCurrent(args);
                let context;
                if (current) {
                    context = current.context;
                    await context.save();
                    const widget = await commands.execute('docmanager:open', {
                        path: context.path,
                        factory: _preview__WEBPACK_IMPORTED_MODULE_7__.RisePreview.FACTORY_NAME,
                        options: {
                            mode: 'split-right'
                        }
                    });
                    const updateActiveIndex = (notebook) => {
                        widget.setActiveCellIndex(notebook.activeCellIndex, false);
                    };
                    widget.setActiveCellIndex(current.content.activeCellIndex);
                    current.content.activeCellChanged.connect(updateActiveIndex);
                    widget.disposed.connect(() => {
                        current.content.activeCellChanged.disconnect(updateActiveIndex);
                    });
                    if (args['fullscreen'] === true) {
                        widget.ready
                            .then(() => {
                            (0,_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_1__.showDialog)({
                                title: trans.__('Switch to full screen'),
                                body: trans.__('The slideshow is set to automatically open in full screen. Your web browser requires your confirmation to do so.')
                            }).then(result => {
                                if (result.button.accept) {
                                    commands.execute(CommandIDs.riseFullScreen, {
                                        id: widget.id
                                    });
                                }
                            });
                        })
                            .catch(reason => {
                            console.log(reason);
                        });
                    }
                }
            },
            isEnabled
        });
        commands.addCommand(CommandIDs.riseFullScreen, {
            label: trans.__('Full screen slideshow'),
            caption: trans.__('Toggle full screen the current active slideshow'),
            icon: _icons__WEBPACK_IMPORTED_MODULE_6__.fullScreenIcon,
            execute: async (args) => {
                var _a;
                if (args['id']) {
                    app.shell.activateById(args['id']);
                }
                const current = args['id']
                    ? (0,_lumino_algorithm__WEBPACK_IMPORTED_MODULE_5__.toArray)(app.shell.widgets('main')).find(widget => widget.id === args['id'])
                    : app.shell.currentWidget;
                if (current && tracker.has(current)) {
                    const iframe = current.iframe;
                    if (iframe) {
                        if (!document.fullscreenElement &&
                            !((_a = iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.fullscreenElement)) {
                            current.ready.then(() => {
                                var _a, _b;
                                (_b = (_a = iframe === null || iframe === void 0 ? void 0 : iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.document.querySelector('div.reveal')) === null || _b === void 0 ? void 0 : _b.requestFullscreen();
                            });
                        }
                        else {
                            if (document.exitFullscreen) {
                                await document.exitFullscreen();
                            }
                        }
                        iframe.focus();
                    }
                }
            },
            isEnabled: () => !!app.shell.currentWidget && tracker.has(app.shell.currentWidget)
        });
        commands.addCommand(CommandIDs.riseSetSlideType, {
            label: args => trans.__('Toggle slideshow %1 type', args['type']),
            caption: args => trans.__('(Un)set active cell as a %1 cell', args['type']),
            execute: args => {
                var _a, _b;
                const value = args['type'];
                const current = app.shell.currentWidget;
                if (current && notebookTracker.has(current)) {
                    const cellModel = (_a = current.content.activeCell) === null || _a === void 0 ? void 0 : _a.model;
                    if (cellModel) {
                        const currentValue = (_b = cellModel.getMetadata('slideshow')) !== null && _b !== void 0 ? _b : {};
                        if (value !== currentValue['slide_type']) {
                            const newValue = { ...currentValue };
                            if (value) {
                                newValue['slide_type'] = value;
                            }
                            else {
                                delete newValue['slide_type'];
                            }
                            if (Object.keys(newValue).length > 0) {
                                cellModel.setMetadata('slideshow', newValue);
                            }
                            else {
                                cellModel.deleteMetadata('slideshow');
                            }
                        }
                    }
                }
            },
            isToggled: args => {
                var _a, _b;
                const value = args['type'];
                const current = app.shell.currentWidget;
                if (current && notebookTracker.has(current)) {
                    const cellModel = (_a = current.content.activeCell) === null || _a === void 0 ? void 0 : _a.model;
                    if (cellModel) {
                        const currentValue = (_b = cellModel.getMetadata('slideshow')) !== null && _b !== void 0 ? _b : {};
                        return currentValue['slide_type'] === value && !!value;
                    }
                }
                return false;
            },
            isEnabled: args => {
                var _a;
                return ['slide', 'subslide', 'fragment', 'skip', 'notes'].includes((_a = args['type']) !== null && _a !== void 0 ? _a : '');
            }
        });
        notebookTracker.widgetAdded.connect(async (sender, panel) => {
            var _a, _b, _c;
            panel.toolbar.insertBefore('kernelName', 'RISE-button', new _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_1__.CommandToolbarButton({
                commands,
                id: CommandIDs.risePreview,
                args: { toolbar: true }
            }));
            // Don't trigger auto launch in stand-alone Rise application.
            if (app.name !== 'Rise') {
                await panel.context.ready;
                let autolaunch = (_c = ((_b = (_a = panel.content.model) === null || _a === void 0 ? void 0 : _a.getMetadata('rise')) !== null && _b !== void 0 ? _b : {})['autolaunch']) !== null && _c !== void 0 ? _c : false;
                if (settings) {
                    // @ts-expect-error unknown type
                    autolaunch |= settings.get('autolaunch').composite;
                }
                if (autolaunch) {
                    await commands.execute(CommandIDs.risePreview, {
                        fullscreen: true
                    });
                }
            }
        });
        if (palette) {
            const category = 'Notebook Operations';
            [CommandIDs.openRise, CommandIDs.risePreview].forEach(command => {
                palette.addItem({ command, category });
            });
        }
        return tracker;
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([factory, plugin]);


/***/ },

/***/ "../../node_modules/jupyterlab-rise/lib/preview.js"
/*!*********************************************************!*\
  !*** ../../node_modules/jupyterlab-rise/lib/preview.js ***!
  \*********************************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RisePreview: () => (/* binding */ RisePreview),
/* harmony export */   RisePreviewFactory: () => (/* binding */ RisePreviewFactory)
/* harmony export */ });
/* harmony import */ var _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @jupyterlab/apputils */ "webpack/sharing/consume/default/@jupyterlab/apputils");
/* harmony import */ var _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @jupyterlab/coreutils */ "webpack/sharing/consume/default/@jupyterlab/coreutils");
/* harmony import */ var _jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _jupyterlab_docregistry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @jupyterlab/docregistry */ "webpack/sharing/consume/default/@jupyterlab/docregistry");
/* harmony import */ var _jupyterlab_docregistry__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_docregistry__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @jupyterlab/translation */ "webpack/sharing/consume/default/@jupyterlab/translation");
/* harmony import */ var _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_translation__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @jupyterlab/ui-components */ "webpack/sharing/consume/default/@jupyterlab/ui-components");
/* harmony import */ var _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lumino_coreutils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lumino/coreutils */ "webpack/sharing/consume/default/@lumino/coreutils");
/* harmony import */ var _lumino_coreutils__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_lumino_coreutils__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _lumino_disposable__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lumino/disposable */ "webpack/sharing/consume/default/@lumino/disposable");
/* harmony import */ var _lumino_disposable__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_lumino_disposable__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lumino_signaling__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @lumino/signaling */ "webpack/sharing/consume/default/@lumino/signaling");
/* harmony import */ var _lumino_signaling__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_lumino_signaling__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _lumino_widgets__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @lumino/widgets */ "webpack/sharing/consume/default/@lumino/widgets");
/* harmony import */ var _lumino_widgets__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_lumino_widgets__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _icons__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./icons */ "../../node_modules/jupyterlab-rise/lib/icons.js");










/**
 * A DocumentWidget that shows a Rise preview in an IFrame.
 */
class RisePreview extends _jupyterlab_docregistry__WEBPACK_IMPORTED_MODULE_2__.DocumentWidget {
    /**
     * Instantiate a new RisePreview.
     * @param options The RisePreview instantiation options.
     */
    constructor(options) {
        super({
            ...options,
            content: new _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.IFrame({
                sandbox: [
                    'allow-same-origin',
                    'allow-scripts',
                    'allow-downloads',
                    'allow-modals',
                    'allow-popups'
                ]
            })
        });
        // Uncomment in dev mode to receive logs from the iframe
        //Private.setupLog();
        this._ready = new _lumino_coreutils__WEBPACK_IMPORTED_MODULE_5__.PromiseDelegate();
        const { getRiseUrl, context, renderOnSave, translator } = options;
        this.getRiseUrl = getRiseUrl;
        this._path = context.path;
        const trans = (translator !== null && translator !== void 0 ? translator : _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_3__.nullTranslator).load('rise');
        this.content.title.icon = _icons__WEBPACK_IMPORTED_MODULE_9__.RISEIcon;
        this._renderOnSave = renderOnSave !== null && renderOnSave !== void 0 ? renderOnSave : false;
        context.pathChanged.connect(() => {
            this.path = context.path;
        });
        const reloadButton = new _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.ToolbarButton({
            icon: _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_4__.refreshIcon,
            tooltip: trans.__('Reload Preview'),
            onClick: () => {
                this.reload();
            }
        });
        const renderOnSaveCheckbox = new Private.CheckBox({
            checked: this._renderOnSave,
            onChange: (event) => {
                var _a, _b;
                this._renderOnSave = (_b = (_a = event.target) === null || _a === void 0 ? void 0 : _a.checked) !== null && _b !== void 0 ? _b : false;
            },
            translator
        });
        this.toolbar.addItem('fullscreen', new _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.ToolbarButton({
            icon: _icons__WEBPACK_IMPORTED_MODULE_9__.fullScreenIcon,
            tooltip: trans.__('Open the slideshow in full screen'),
            onClick: () => {
                options.commands.execute('RISE:fullscreen-plugin');
            }
        }));
        if (context) {
            this.toolbar.addItem('renderOnSave', renderOnSaveCheckbox);
            void context.ready.then(() => {
                this.setActiveCellIndex(0)
                    .then(() => this._ready.resolve())
                    .catch(e => this._ready.reject(e));
                context.fileChanged.connect(() => {
                    if (this.renderOnSave) {
                        this.reload();
                    }
                });
            });
        }
        this.toolbar.addItem('spacer', _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.Toolbar.createSpacerItem());
        this.toolbar.addItem('reload', reloadButton);
    }
    /**
     * Promise that resolves when the slideshow is ready
     */
    get ready() {
        return this._ready.promise;
    }
    get iframe() {
        return this.content.node.querySelector('iframe');
    }
    /**
     * Dispose the preview widget.
     */
    dispose() {
        if (this.isDisposed) {
            return;
        }
        super.dispose();
        _lumino_signaling__WEBPACK_IMPORTED_MODULE_7__.Signal.clearData(this);
    }
    /**
     * Reload the preview.
     */
    reload() {
        const iframe = this.content.node.querySelector('iframe');
        if (iframe.contentWindow) {
            iframe.contentWindow.location.reload();
        }
    }
    /**
     * Whether the preview reloads when the context is saved.
     */
    get renderOnSave() {
        return this._renderOnSave;
    }
    async setActiveCellIndex(index, reload = true) {
        const iframe = this.iframe;
        if (reload) {
            this.content.url = this.getRiseUrl(this.path, index);
            await this._waitForIFrame(iframe);
        }
        else {
            if (iframe.contentWindow) {
                iframe.contentWindow.history.pushState(null, '', this.getRiseUrl(this.path, index));
                return Promise.resolve();
            }
            return Promise.reject('No content.');
        }
    }
    get path() {
        return this._path;
    }
    set path(v) {
        if (v !== this._path) {
            this._path = v;
            this.setActiveCellIndex(0);
        }
    }
    async _waitForIFrame(iframe) {
        var _a, _b;
        const ready = new _lumino_coreutils__WEBPACK_IMPORTED_MODULE_5__.PromiseDelegate();
        const setReady = () => {
            var _a;
            (_a = iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.removeEventListener('load', setReady);
            const waitForReveal = setInterval(() => {
                var _a;
                if ((_a = iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.querySelector('.reveal')) {
                    clearInterval(waitForReveal);
                    ready.resolve(true);
                }
            }, 500);
        };
        if (((_a = iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.readyState) === 'complete') {
            setReady();
        }
        else {
            (_b = iframe.contentWindow) === null || _b === void 0 ? void 0 : _b.addEventListener('load', setReady);
        }
        return ready.promise;
    }
}
/**
 * A namespace for RisePreview statics.
 */
(function (RisePreview) {
    RisePreview.FACTORY_NAME = 'rise';
    /**
     * Generate the URL required to open a file as RISE slideshow.
     *
     * @param path File path
     * @param activeCellIndex Active cell index
     * @returns URL to open
     */
    function getRiseUrl(path, activeCellIndex) {
        const baseUrl = _jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_1__.PageConfig.getBaseUrl();
        let url = `${baseUrl}rise/${path}`;
        if (typeof activeCellIndex === 'number') {
            url += _jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_1__.URLExt.objectToQueryString({ activeCellIndex });
        }
        return url;
    }
    RisePreview.getRiseUrl = getRiseUrl;
    /**
     * RISE Preview document factory token implementation.
     */
    class FactoryToken {
        constructor({ commands, docRegistry, fileTypes, translator }) {
            this._disposeFactory = null;
            this._widgetCreated = new _lumino_signaling__WEBPACK_IMPORTED_MODULE_7__.Signal(this);
            this._commands = commands;
            this._docRegistry = docRegistry;
            this._fileTypes = fileTypes !== null && fileTypes !== void 0 ? fileTypes : ['notebook'];
            this._translator = translator !== null && translator !== void 0 ? translator : _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_3__.nullTranslator;
            this._updateFactory();
        }
        /**
         * Add a new file type to the RISE preview factory.
         *
         * #### Notes
         * Useful to add file types for jupytext.
         *
         * @param ft File type
         */
        addFileType(ft) {
            if (!this._fileTypes.includes(ft)) {
                this._fileTypes.push(ft);
                this._updateFactory();
            }
        }
        /**
         * Signal emitted when a RISE preview is created.
         */
        get widgetCreated() {
            return this._widgetCreated;
        }
        _updateFactory() {
            if (this._disposeFactory) {
                this._disposeFactory.dispose();
                this._disposeFactory = null;
            }
            const trans = this._translator.load('rise');
            const factory = new RisePreviewFactory(getRiseUrl, this._commands, {
                name: RisePreview.FACTORY_NAME,
                label: trans.__('Rise Slides'),
                fileTypes: this._fileTypes,
                modelName: 'notebook'
            });
            factory.widgetCreated.connect((_, args) => {
                this._widgetCreated.emit(args);
            }, this);
            this._disposeFactory = _lumino_disposable__WEBPACK_IMPORTED_MODULE_6__.DisposableSet.from([
                this._docRegistry.addWidgetFactory(factory),
                factory
            ]);
        }
    }
    RisePreview.FactoryToken = FactoryToken;
})(RisePreview || (RisePreview = {}));
/**
 * RISE Preview widget factory
 */
class RisePreviewFactory extends _jupyterlab_docregistry__WEBPACK_IMPORTED_MODULE_2__.ABCWidgetFactory {
    constructor(getRiseUrl, commands, options) {
        super(options);
        this.getRiseUrl = getRiseUrl;
        this.commands = commands;
        this.defaultRenderOnSave = false;
    }
    createNewWidget(context) {
        return new RisePreview({
            context,
            commands: this.commands,
            getRiseUrl: this.getRiseUrl,
            renderOnSave: this.defaultRenderOnSave
        });
    }
}
var Private;
(function (Private) {
    /**
     * Simple checkbox
     */
    class CheckBox extends _lumino_widgets__WEBPACK_IMPORTED_MODULE_8__.Widget {
        constructor(options = {}) {
            var _a, _b, _c;
            const trans = ((_a = options.translator) !== null && _a !== void 0 ? _a : _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_3__.nullTranslator).load('rise');
            const node = document.createElement('label');
            node.insertAdjacentHTML('afterbegin', `<input name="renderOnSave" type="checkbox"></input>${trans.__('Render on Save')}`);
            super({ node });
            this.input = node.childNodes.item(0);
            this.checked = (_b = options.checked) !== null && _b !== void 0 ? _b : false;
            const noOp = () => {
                // no-op
            };
            this.onChange = (_c = options.onChange) !== null && _c !== void 0 ? _c : noOp;
        }
        /**
         * Checkbox status
         */
        get checked() {
            return this.input.checked;
        }
        set checked(v) {
            this.input.checked = v;
        }
        onAfterAttach(msg) {
            super.onAfterAttach(msg);
            this.input.addEventListener('change', this.onChange);
        }
        onBeforeDetach(msg) {
            this.input.removeEventListener('change', this.onChange);
            super.onBeforeDetach(msg);
        }
    }
    Private.CheckBox = CheckBox;
    function setupLog() {
        window.onmessage = (event) => {
            //console.log("EVENT: ", event);
            var _a, _b, _c, _d, _e, _f, _g, _h, _j;
            switch ((_a = event.data) === null || _a === void 0 ? void 0 : _a.level) {
                case 'debug':
                    console.debug(...((_c = (_b = event.data) === null || _b === void 0 ? void 0 : _b.msg) !== null && _c !== void 0 ? _c : []));
                    break;
                case 'info':
                    console.info(...((_e = (_d = event.data) === null || _d === void 0 ? void 0 : _d.msg) !== null && _e !== void 0 ? _e : []));
                    break;
                case 'warn':
                    console.warn(...((_g = (_f = event.data) === null || _f === void 0 ? void 0 : _f.msg) !== null && _g !== void 0 ? _g : []));
                    break;
                case 'error':
                    console.error(...((_j = (_h = event.data) === null || _h === void 0 ? void 0 : _h.msg) !== null && _j !== void 0 ? _j : []));
                    break;
                default:
                    console.log(event);
                    break;
            }
        };
    }
    Private.setupLog = setupLog;
})(Private || (Private = {}));


/***/ },

/***/ "../../node_modules/jupyterlab-rise/lib/tokens.js"
/*!********************************************************!*\
  !*** ../../node_modules/jupyterlab-rise/lib/tokens.js ***!
  \********************************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IRisePreviewFactory: () => (/* binding */ IRisePreviewFactory),
/* harmony export */   IRisePreviewTracker: () => (/* binding */ IRisePreviewTracker)
/* harmony export */ });
/* harmony import */ var _lumino_coreutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lumino/coreutils */ "webpack/sharing/consume/default/@lumino/coreutils");
/* harmony import */ var _lumino_coreutils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_lumino_coreutils__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The Rise Preview tracker token.
 */
const IRisePreviewTracker = new _lumino_coreutils__WEBPACK_IMPORTED_MODULE_0__.Token('jupyterlab-rise:IRisePreviewTracker', 'Adds a tracker for RISE slides preview widgets.');
/**
 * RISE Preview factory token.
 */
const IRisePreviewFactory = new _lumino_coreutils__WEBPACK_IMPORTED_MODULE_0__.Token('jupyterlab-rise:IRisePreviewFactory', 'Customize the RISE slides preview factory.');


/***/ },

/***/ "../../node_modules/jupyterlab-rise/style/fullscreen.svg"
/*!***************************************************************!*\
  !*** ../../node_modules/jupyterlab-rise/style/fullscreen.svg ***!
  \***************************************************************/
(module) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" viewBox=\"0 0 24 24\" width=\"16\" fill=\"#4f4f4f\">\n    <path class=\"jp-icon3\" d=\"M22 22v-6h-2v4h-4v2zM2 22h6v-2H4v-4H2zM22 2h-6v2h4v4h2zM2 2v6h2V4h4V2z\" />\n</svg>";

/***/ },

/***/ "../../node_modules/jupyterlab-rise/style/slideshow.svg"
/*!**************************************************************!*\
  !*** ../../node_modules/jupyterlab-rise/style/slideshow.svg ***!
  \**************************************************************/
(module) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" viewBox=\"0 0 24 24\" width=\"16\" fill=\"none\" stroke=\"#4f4f4f\">\n    <path d=\"M15 14.25l3 6m-9-6l-3 6m-4-16h20-2v10H4v-10z\" class=\"jp-icon3\" stroke-width=\"2\" />\n    <path d=\"M9.6 11.6v-1.5m-1.5 1.5V6.1m-1.5 5.5V8.1m5.5 3.5h3m-3-1.5h6m-6-1.5h6m-6-2h5\" class=\"jp-icon3\"\n        stroke-width=\"1.2\" />\n</svg>";

/***/ }

}]);
//# sourceMappingURL=vendors-node_modules_jupyterlab-rise_lib_index_js.836ea36e8b2ec2712bce.js.map